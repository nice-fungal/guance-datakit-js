{"version":3,"file":"dataflux-rum.js","mappings":"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AEoB,GAAG,CAAC;MAC1B,IAAI8H,kBAAY,CAAC1L,GAAG,CAACwC,GAAG,CAAC,KAAKoB,GAAG,EAAE;QACjC0I,SAAS,GAAG,KAAK;MACnB;MACAZ,kBAAY,CAACS,MAAM,CAAC3J,GAAG,CAAC;IAC1B,CAAC,CAAC,OAAO1D,GAAG,EAAE;MACZwN,SAAS,GAAG,KAAK;IACnB;IACA,OAAOA,SAAS;EAClB;AACF,CAAC;AACM,IAAIC,cAAc,GAAG;EAC1BF,SAAS,EAAE,SAAXA,SAASA,CAAA,EAAc;IACrB,IAAIC,SAAS,GAAG,IAAI;IAEpB,IAAI9J,GAAG,GAAG,wBAAwB;IAClC,IAAIoB,GAAG,GAAG,sBAAsB;IAChC,IAAI;MACF,IAAI2I,cAAc,IAAIA,cAAc,CAACL,OAAO,EAAE;QAC5CK,cAAc,CAACL,OAAO,CAAC1J,GAAG,EAAEoB,GAAG,CAAC;QAChC2I,cAAc,CAACH,UAAU,CAAC5J,GAAG,EAAEoB,GAAG,CAAC;QACnC0I,SAAS,GAAG,IAAI;MAClB,CAAC,MAAM;QACLA,SAAS,GAAG,KAAK;MACnB;IACF,CAAC,CAAC,OAAOnL,CAAC,EAAE;MACVmL,SAAS,GAAG,KAAK;IACnB;IACA,OAAOA,SAAS;EAClB;AACF,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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AAEqL,wBAAwB,CAAC;IACvE;IACA,OAAOQ,MAAM;EACf;EAEA,IAAIA,MAAM,GAAGX,aAAO,CAACE,WAAW,CAAC,KAAK,QAAQ,GAAGA,WAAW,GAAG,CAAC,CAAC;EACjE,KAAK,IAAIlL,GAAG,IAAIC,MAAM,EAAE;IACtB,IAAI1E,MAAM,CAACgC,SAAS,CAAC+B,cAAc,CAACnD,IAAI,CAAC8D,MAAM,EAAED,GAAG,CAAC,EAAE;MACrD2L,MAAM,CAAC3L,GAAG,CAAC,GAAGiL,SAAS,CACrBU,MAAM,CAAC3L,GAAG,CAAC,EACXC,MAAM,CAACD,GAAG,CAAC,EACXmL,wBACF,CAAC;IACH;EACF;EACA,OAAOQ,MAAM;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,SAASA,CAAC5K,KAAK,EAAE;EAC/B,OAAOiK,SAAS,CAAC1M,SAAS,EAAEyC,KAAK,CAAC;AACpC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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B+B,gBAAgB,EAChBoE,WAAW,EACX1C,kBAAkB,EAClB;EACArK,SAAS,CAACxwB,SAAS,CAACtB,kBAAkB,CAACI,YAAY,EAAE,UAAU4Y,IAAI,EAAE;IACnE8Y,SAAS,CAAC/xB,MAAM,CACdC,kBAAkB,CAACa,uBAAuB,EAC1Ci+B,iBAAiB,CAAC9lB,IAAI,EAAExR,aAAa,EAAEq3B,WAAW,EAAEpE,gBAAgB,CACtE,CAAC;EACH,CAAC,CAAC;EAEF,OAAOuB,UAAU,CACfh3C,QAAQ,EACR8sC,SAAS,EACT,uBAAuB,EACvBtqB,aAAa,EACbkxB,wBAAwB,EACxB,CAAClxB,aAAa,CAACu3B,kBAAkB,EACjC5C,kBACF,CAAC;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS2C,iBAAiBA,CAAC9lB,IAAI,EAAExR,aAAa,EAAEq3B,WAAW,EAAEpE,gBAAgB,EAAE;EAC7E;EACA,IAAIuE,UAAU,GAAGvE,gBAAgB,CAAC7wC,OAAO,CACvCovB,IAAI,CAACxa,WAAW,CAAClc,QAAQ,EACzB02B,IAAI,CAACx3B,QACP,CAAC;EACD,IAAIy9C,SAAS,GAAG;IACdxI,GAAG,EAAE;MACHyI,gBAAgB,EAAElmB,IAAI,CAACukB,eAAe;MACtC;MACA9kB,WAAW,EAAEumB;IACf,CAAC;IACD91B,IAAI,EAAE8P,IAAI,CAACxa,WAAW,CAACjc,SAAS;IAChC4M,IAAI,EAAE0F,YAAY,CAACI,IAAI;IACvB+jB,IAAI,EAAE;MACJ;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACAU,SAAS,EAAEV,IAAI,CAACslB,QAAQ;MACxBjuD,IAAI,EAAE2oC,IAAI,CAAC3oC,IAAI;MACf;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA8uD,YAAY,EAAEnmB,IAAI,CAACsjB,WAAW;MAC9B;MACA;MACA;MACA;MACA;MACA;MACAhhB,UAAU,EAAE35B,gBAAgB,CAACq3B,IAAI,CAACx3B,QAAQ;IAC5C,CAAC;IACD;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACAupB,OAAO,EAAE;MACP;MACA2O,SAAS,EAAEV,IAAI,CAAC6jB,eAAe,GAAG3pD,SAAS,GAAG;IAChD,CAAC;IACDksD,OAAO,EAAE;MACPC,YAAY,EAAE73B,aAAa,CAAC83B;IAC9B;EACF,CAAC;EACD,IAAI,CAACzoD,mBAAa,CAACmiC,IAAI,CAACskB,aAAa,CAAC,EAAE;IACtC2B,SAAS,CAACjmB,IAAI,CAACyC,cAAc,GAAGh6B,SAAS,CACvCu3B,IAAI,CAACskB,aAAa,EAClB37C,gBACF,CAAC;EACH;EACA;EACA;EACA;EACA;EACA;EACA,OAAO;IACLo0C,WAAW,EAAEkJ,SAAS;IACtB91C,SAAS,EAAE6vB,IAAI,CAACxa,WAAW,CAAClc,QAAQ;IACpC4zC,aAAa,EAAE;MACblxC,QAAQ,EAAEg0B,IAAI,CAACh0B;IACjB;EACF,CAAC;AACH,C;;AC/OoC;AACc;AASlB;AAChC;AACmF;AACnF;AACA;AACA;AACA;AAC0D;AAC1D;AACqD;AACqB;AACD;AACR;AACE;AACQ;AACe;AACH;AACvF;A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,GACpBxxD,aAAA,CAAO4F,OAAO,MAAK,QAAQ,GAAGA,OAAO,GAAG;MAAEvH,IAAI,EAAEuH;IAAQ,CAAC;IAC3DwrD,QAAQ,CAACpG,SAAS,CAACwG,gBAAgB,CAAC;IACpC;IACA;IACA;IACA;IACA;IACA;EACF,CAAC,CAAC;EAEF,IAAIC,YAAY,GAAGryD,aAAa,CAAC;IAC/BwhC,IAAI,EAAEz/B,eAAO,CAAC,UAAU+0B,iBAAiB,EAAE;MACzCk7B,QAAQ,CAACxwB,IAAI,CAAC1K,iBAAiB,CAAC;IAClC,CAAC;IACD;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACF,CAAC,CAAC;EACF,OAAOu7B,YAAY;AACrB;AACA,SAASF,uBAAuBA,CAACG,gBAAgB,EAAElB,cAAc,EAAE;EACjE,OAAOrxD,YAAM,CACX;IACEyhC,IAAI,EAAE,SAANA,IAAIA,CAAY1K,iBAAiB,EAAE;MACjC2oB,8BAA8B,CAAC,cAAc,EAAE3oB,iBAAiB,CAAC;IACnE,CAAC;IACDA,iBAAiB,EAAEw7B,gBAAgB,CAACd,oBAAoB,CAAC;EAC3D,CAAC,EACDJ,cACF,CAAC;AACH,C;;AC5QA;AACgC;AACiB;AACjD;AACA;AACA;AACA;AACO,IAAImB,WAAW,GAAGV,gBAAgB,CAAC1D,QAAQ,EAAE,aAAa,EAAE;EACjE0C,kBAAkB,EAAE,IAAI;EACxBoB,oBAAoB,EAAE;AACxB,CAAC,CAAC;;AAEF,+D;;ACZ8C","sources":["webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///../../node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///../../src/helper/display.js","webpack:///../../src/helper/catchUserErrors.js","webpack:///../src/init.js","webpack:///../../src/helper/getZoneJsOriginalValue.js","webpack:///../../src/helper/monitor.js","webpack:///../../src/helper/timer.js","webpack:///../../src/helper/tools.js","webpack:///../../src/helper/boundedBuffer.js","webpack:///../../src/helper/valueHistory.js","webpack:///../../src/helper/deviceInfo.js","webpack:///../../src/helper/enums.js","webpack:///../../src/helper/instrumentMethod.js","webpack:///../../../src/helper/serialisation/jsonStringify.js","webpack:///../../src/tracekit/computeStackTrace.js","webpack:///../../src/tracekit/tracekit.js","webpack:///../../src/tracekit/index.js","webpack:///../../src/helper/byteUtils.js","webpack:///../../src/helper/sanitize.js","webpack:///../../src/helper/errorTools.js","webpack:///../../src/error/trackRuntimeError.js","webpack:///../../src/helper/lifeCycle.js","webpack:///../../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///../../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///../../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack:///../../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack:///../../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///../../node_modules/@babel/runtime/helpers/esm/toArray.js","webpack:///../../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///../../src/helper/limitModification.js","webpack:///../../src/helper/createEventRateLimiter.js","webpack:///../../src/helper/observable.js","webpack:///../../src/helper/urlPolyfill.js","webpack:///../../src/helper/readBytesFromStream.js","webpack:///../../src/helper/requestIdleCallback.js","webpack:///../../src/helper/taskQueue.js","webpack:///../../src/configuration/transportConfiguration.js","webpack:///../../src/browser/cookie.js","webpack:///../../src/session/sessionConstants.js","webpack:///../../src/session/sessionState.js","webpack:///../../src/session/sessionInCookie.js","webpack:///../../src/session/sessionInLocalStorage.js","webpack:///../../src/session/sessionStoreOperations.js","webpack:///../../src/session/sessionStore.js","webpack:///../../src/configuration/configuration.js","webpack:///../../src/browser/fetchObservable.js","webpack:///../../src/browser/addEventListener.js","webpack:///../../src/browser/xhrObservable.js","webpack:///../../src/browser/pageExitObservable.js","webpack:///../../src/browser/runOnReadyState.js","webpack:///../src/dataMap.js","webpack:///../../src/session/sessionManagement.js","webpack:///../../src/transport/sendWithRetryStrategy.js","webpack:///../../src/transport/httpRequest.js","webpack:///../../../src/helper/serialisation/rowData.js","webpack:///../../src/transport/batch.js","webpack:///../../src/transport/flushController.js","webpack:///../../src/transport/startBatchWithReplica.js","webpack:///../../src/transport/eventBridge.js","webpack:///../../src/transport/index.js","webpack:///../../src/synthetics/syntheticsWorkerValues.js","webpack:///../../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack:///../../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack:///../../node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///../../../src/helper/serialisation/contextManager.js","webpack:///../../../src/helper/serialisation/const.js","webpack:///../../../src/helper/serialisation/storedContextManager.js","webpack:///../../../src/helper/serialisation/customerDataTracker.js","webpack:///../../src/helper/encoder.js","webpack:///../../src/user/user.js","webpack:///../core/esm/user/index.js","webpack:///../../src/helper/polyfills.js","webpack:///../../src/helper/displayAlreadyInitializedError.js","webpack:///../src/index.js","webpack:///./src/domain/rumSessionManager.js","webpack:///./src/domain/usr/index.js","webpack:///./src/domain/locationChangeObservable.js","webpack:///./src/transport/startRumBatch.js","webpack:///./src/domain/assembly.js","webpack:///./src/domain/initViewportObservable.js","webpack:///./src/domain/contexts/displayContext.js","webpack:///./src/domain/contexts/internalContext.js","webpack:///./src/domain/contexts/urlContexts.js","webpack:///./src/domain/contexts/viewContexts.js","webpack:///./src/domain/contexts/pageStateHistory.js","webpack:///./src/domain/rumEventsCollection/error/errorCollection.js","webpack:///./src/domain/rumEventsCollection/view/trackViews.js","webpack:///./src/domain/rumEventsCollection/view/viewCollection.js","webpack:///./src/boot/rum.js","webpack:///./src/domain/contexts/commonContext.js","webpack:///./src/boot/buildEnv.js","webpack:///./src/domain/configuration.js","webpack:///./src/boot/perStartRum.js","webpack:///./src/boot/rumPublicApi.js","webpack:///./src/boot/rum.entry.js","webpack:///./src/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","export var ConsoleApiName = {\n  // log: 'log',\n  // debug: 'debug',\n  // info: 'info',\n  warn: 'warn',\n  error: 'error'\n}\nexport var globalConsole = console\n\nexport var originalConsoleMethods = {}\nObject.keys(ConsoleApiName).forEach(function (name) {\n  originalConsoleMethods[name] = globalConsole[name]\n})\n\nvar PREFIX = 'GUANCE Browser SDK:'\n\nexport var display = {\n  // debug: originalConsoleMethods.debug.bind(globalConsole, PREFIX),\n  // log: originalConsoleMethods.log.bind(globalConsole, PREFIX),\n  // info: originalConsoleMethods.info.bind(globalConsole, PREFIX),\n  warn: originalConsoleMethods.warn.bind(globalConsole, PREFIX),\n  error: originalConsoleMethods.error.bind(globalConsole, PREFIX)\n}\n","import { display } from './display'\n\nexport function catchUserErrors(fn, errorMsg) {\n  return function() {\n    var args = [].slice.call(arguments)\n    try {\n      return fn.apply(this, args)\n    } catch (err) {\n      display.error(errorMsg, err)\n    }\n  }\n}","import { each, assign } from './helper/tools'\n// import { setDebugMode } from './helper/monitor'\nimport { catchUserErrors } from './helper/catchUserErrors'\n\nexport function makePublicApi(stub) {\n  var publicApi = assign(\n    {\n      onReady: function (callback) {\n        callback()\n      }\n    },\n    stub\n  )\n\n  // Add an \"hidden\" property to set debug mode. We define it that way to hide it\n  // as much as possible but of course it's not a real protection.\n  // Object.defineProperty(publicApi, '_setDebug', {\n  //   get: function () {\n  //     return setDebugMode\n  //   },\n  //   enumerable: false\n  // })\n\n  return publicApi\n}\nexport function defineGlobal(global, name, api) {\n  var existingGlobalVariable = global[name]\n  global[name] = api\n  if (existingGlobalVariable && existingGlobalVariable.q) {\n    each(existingGlobalVariable.q, function (fn) {\n      catchUserErrors(fn, 'onReady callback threw an error:')()\n    })\n  }\n}\n\nexport function getGlobalObject() {\n  if (typeof globalThis === 'object') {\n    return globalThis\n  }\n  Object.defineProperty(Object.prototype, '_gc_temp_', {\n    get: function () {\n      return this\n    },\n    configurable: true\n  })\n  // @ts-ignore\n  var globalObject = _gc_temp_\n  // @ts-ignore\n  delete Object.prototype._gc_temp_\n  if (typeof globalObject !== 'object') {\n    // on safari _gc_temp_ is available on window but not globally\n    // fallback on other browser globals check\n    if (typeof self === 'object') {\n      globalObject = self\n    } else if (typeof window === 'object') {\n      globalObject = window\n    } else {\n      globalObject = {}\n    }\n  }\n  return globalObject\n}\n","import { getGlobalObject } from '../init'\n/**\n * Gets the original value for a DOM API that was potentially patched by Zone.js.\n *\n * Zone.js[1] is a library that patches a bunch of JS and DOM APIs. It usually stores the original\n * value of the patched functions/constructors/methods in a hidden property prefixed by\n * __zone_symbol__.\n *\n * In multiple occasions, we observed that Zone.js is the culprit of important issues leading to\n * browser resource exhaustion (memory leak, high CPU usage). This method is used as a workaround to\n * use the original DOM API instead of the one patched by Zone.js.\n *\n * [1]: https://github.com/angular/angular/tree/main/packages/zone.js\n */\nexport function getZoneJsOriginalValue(target, name) {\n  var browserWindow = getGlobalObject()\n  var original\n  if (\n    browserWindow.Zone &&\n    typeof browserWindow.Zone.__symbol__ === 'function'\n  ) {\n    original = target[browserWindow.Zone.__symbol__(name)]\n  }\n  if (!original) {\n    original = target[name]\n  }\n  return original\n}\n","import { ConsoleApiName, display } from './display'\nvar onMonitorErrorCollected\nvar debugMode = false\n\n// export function startMonitorErrorCollection(newOnMonitorErrorCollected) {\n//   onMonitorErrorCollected = newOnMonitorErrorCollected\n// }\n\n// export function setDebugMode(newDebugMode) {\n//   debugMode = newDebugMode\n// }\n\nexport function resetMonitor() {\n  onMonitorErrorCollected = undefined\n  debugMode = false\n}\n\nexport function monitor(fn) {\n  return function () {\n    return callMonitored(fn, this, arguments)\n  }\n}\n\nexport function callMonitored(fn, context, args) {\n  try {\n    return fn.apply(context, args)\n  } catch (e) {\n    // displayIfDebugEnabled(e)\n    if (onMonitorErrorCollected) {\n      try {\n        onMonitorErrorCollected(e)\n      } catch (e) {\n        // displayIfDebugEnabled(e)\n      }\n    }\n  }\n}\n\n// export function displayIfDebugEnabled() {\n//   var args = [].slice.call(arguments)\n//   //   display.error.apply(null, ['[MONITOR]'].concat(args))\n//   if (debugMode) {\n//     display.error.apply(null, ['[MONITOR]'].concat(args))\n//   }\n// }\n","import { getZoneJsOriginalValue } from './getZoneJsOriginalValue'\nimport { getGlobalObject } from '../init'\nimport { monitor } from './monitor'\nexport function setTimeout(callback, delay) {\n  return getZoneJsOriginalValue(getGlobalObject(), 'setTimeout')(\n    monitor(callback),\n    delay\n  )\n}\n\nexport function clearTimeout(timeoutId) {\n  getZoneJsOriginalValue(getGlobalObject(), 'clearTimeout')(timeoutId)\n}\n\nexport function setInterval(callback, delay) {\n  return getZoneJsOriginalValue(getGlobalObject(), 'setInterval')(\n    monitor(callback),\n    delay\n  )\n}\n\nexport function clearInterval(timeoutId) {\n  getZoneJsOriginalValue(getGlobalObject(), 'clearInterval')(timeoutId)\n}\n","// import { display } from './display'\nimport { setTimeout, clearTimeout } from './timer'\nvar ArrayProto = Array.prototype\n// var FuncProto = Function.prototype\nvar ObjProto = Object.prototype\nvar slice = ArrayProto.slice\nvar toString = ObjProto.toString\nvar hasOwnProperty = ObjProto.hasOwnProperty\nvar nativeForEach = ArrayProto.forEach\nvar nativeIsArray = Array.isArray\nvar breaker = false\nexport var each = function (obj, iterator, context) {\n  if (obj === null) return false\n  if (nativeForEach && obj.forEach === nativeForEach) {\n    obj.forEach(iterator, context)\n  } else if (obj.length === +obj.length) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (i in obj && iterator.call(context, obj[i], i, obj) === breaker) {\n        return false\n      }\n    }\n  } else {\n    for (var key in obj) {\n      if (hasOwnProperty.call(obj, key)) {\n        if (iterator.call(context, obj[key], key, obj) === breaker) {\n          return false\n        }\n      }\n    }\n  }\n}\nexport function assign(target) {\n  each(slice.call(arguments, 1), function (source) {\n    for (var prop in source) {\n      if (Object.prototype.hasOwnProperty.call(source, prop)) {\n        target[prop] = source[prop]\n      }\n    }\n  })\n  return target\n}\n\nexport function shallowClone(object) {\n  return assign({}, object)\n}\nexport var extend = function (obj) {\n  each(slice.call(arguments, 1), function (source) {\n    for (var prop in source) {\n      if (source[prop] !== void 0) {\n        obj[prop] = source[prop]\n      }\n    }\n  })\n  return obj\n}\nexport var extend2Lev = function (obj) {\n  each(slice.call(arguments, 1), function (source) {\n    for (var prop in source) {\n      if (source[prop] !== void 0) {\n        if (isObject(source[prop]) && isObject(obj[prop])) {\n          extend(obj[prop], source[prop])\n        } else {\n          obj[prop] = source[prop]\n        }\n      }\n    }\n  })\n  return obj\n}\n// export var coverExtend = function (obj) {\n//   each(slice.call(arguments, 1), function (source) {\n//     for (var prop in source) {\n//       if (source[prop] !== void 0 && obj[prop] === void 0) {\n//         obj[prop] = source[prop]\n//       }\n//     }\n//   })\n//   return obj\n// }\nexport var isArray =\n  nativeIsArray ||\n  function (obj) {\n    return toString.call(obj) === '[object Array]'\n  }\nexport var isFunction = function (f) {\n  if (!f) {\n    return false\n  }\n  try {\n    return /^\\s*\\bfunction\\b/.test(f)\n  } catch (err) {\n    return false\n  }\n}\nexport var isArguments = function (obj) {\n  return !!(obj && hasOwnProperty.call(obj, 'callee'))\n}\nexport var toArray = function (iterable) {\n  if (!iterable) return []\n  if (iterable.toArray) {\n    return iterable.toArray()\n  }\n  if (isArray(iterable)) {\n    return slice.call(iterable)\n  }\n  if (isArguments(iterable)) {\n    return slice.call(iterable)\n  }\n  return values(iterable)\n}\nexport var values = function (obj) {\n  var results = []\n  if (obj === null) {\n    return results\n  }\n  each(obj, function (value) {\n    results[results.length] = value\n  })\n  return results\n}\nexport var keys = function (obj) {\n  var results = []\n  if (obj === null) {\n    return results\n  }\n  each(obj, function (value, key) {\n    results[results.length] = key\n  })\n  return results\n}\n// export var indexOf = function (arr, target) {\n//   var indexOf = arr.indexOf\n//   if (indexOf) {\n//     return indexOf.call(arr, target)\n//   } else {\n//     for (var i = 0; i < arr.length; i++) {\n//       if (target === arr[i]) {\n//         return i\n//       }\n//     }\n//     return -1\n//   }\n// }\n// export var hasAttribute = function (ele, attr) {\n//   if (ele.hasAttribute) {\n//     return ele.hasAttribute(attr)\n//   } else {\n//     return !!(ele.attributes[attr] && ele.attributes[attr].specified)\n//   }\n// }\nexport var filter = function (arr, fn, self) {\n  if (arr.filter) {\n    return arr.filter(fn)\n  }\n  var ret = []\n  for (var i = 0; i < arr.length; i++) {\n    if (!hasOwnProperty.call(arr, i)) {\n      continue\n    }\n    var val = arr[i]\n    if (fn.call(self, val, i, arr)) {\n      ret.push(val)\n    }\n  }\n  return ret\n}\nexport var map = function (arr, fn, self) {\n  if (arr.map) {\n    return arr.map(fn)\n  }\n  var ret = []\n  for (var i = 0; i < arr.length; i++) {\n    if (!hasOwnProperty.call(arr, i)) {\n      continue\n    }\n    var val = arr[i]\n    ret.push(fn.call(self, val, i, arr))\n  }\n  return ret\n}\nexport var some = function (arr, fn, self) {\n  if (arr.some) {\n    return arr.some(fn)\n  }\n  var flag = false\n  for (var i = 0; i < arr.length; i++) {\n    if (!hasOwnProperty.call(arr, i)) {\n      continue\n    }\n    var val = arr[i]\n    if (fn.call(self, val, i, arr)) {\n      flag = true\n      break\n    }\n  }\n  return flag\n}\nexport var every = function (arr, fn, self) {\n  if (arr.every) {\n    return arr.every(fn)\n  }\n  var flag = true\n  for (var i = 0; i < arr.length; i++) {\n    if (!hasOwnProperty.call(arr, i)) {\n      continue\n    }\n    var val = arr[i]\n    if (!fn.call(self, val, i, arr)) {\n      flag = false\n      break\n    }\n  }\n  return flag\n}\n// export var matchList = function (list, value, useStartsWith) {\n//   if (useStartsWith === undefined) {\n//     useStartsWith = false\n//   }\n//   return some(list, function (item) {\n//     try {\n//       if (typeof item === 'function') {\n//         return item(value)\n//       } else if (item instanceof RegExp) {\n//         return item.test(value)\n//       } else if (typeof item === 'string') {\n//         return useStartsWith ? startsWith(value, item) : item === value\n//       }\n//     } catch (e) {\n//       display.error(e)\n//     }\n//     return false\n//   })\n// }\n// https://github.com/jquery/jquery/blob/a684e6ba836f7c553968d7d026ed7941e1a612d8/src/selector/escapeSelector.js\nexport var cssEscape = function (str) {\n  str = str + ''\n  if (window.CSS && window.CSS.escape) {\n    return window.CSS.escape(str)\n  }\n\n  // eslint-disable-next-line no-control-regex\n  return str.replace(\n    /([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\x80-\\uFFFF\\w-]/g,\n    function (ch, asCodePoint) {\n      if (asCodePoint) {\n        // U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\n        if (ch === '\\0') {\n          return '\\uFFFD'\n        }\n        // Control characters and (dependent upon position) numbers get escaped as code points\n        return (\n          ch.slice(0, -1) +\n          '\\\\' +\n          ch.charCodeAt(ch.length - 1).toString(16) +\n          ' '\n        )\n      }\n      // Other potentially-special ASCII characters get backslash-escaped\n      return '\\\\' + ch\n    }\n  )\n}\n// export var inherit = function (subclass, superclass) {\n//   var F = function () {}\n//   F.prototype = superclass.prototype\n//   subclass.prototype = new F()\n//   subclass.prototype.constructor = subclass\n//   subclass.superclass = superclass.prototype\n//   return subclass\n// }\n// export var tirm = function (str) {\n//   return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '')\n// }\nexport var isObject = function (obj) {\n  if (obj === null) return false\n  return toString.call(obj) === '[object Object]'\n}\n\nexport var isEmptyObject = function (obj) {\n  if (isObject(obj)) {\n    for (var key in obj) {\n      if (hasOwnProperty.call(obj, key)) {\n        return false\n      }\n    }\n    return true\n  } else {\n    return false\n  }\n}\nexport var objectEntries = function (object) {\n  var res = []\n  each(object, function (value, key) {\n    res.push([key, value])\n  })\n  return res\n}\n// export var isUndefined = function (obj) {\n//   return obj === void 0\n// }\nexport var isString = function (obj) {\n  return toString.call(obj) === '[object String]'\n}\nexport var isDate = function (obj) {\n  return toString.call(obj) === '[object Date]'\n}\nexport var isBoolean = function (obj) {\n  return toString.call(obj) === '[object Boolean]'\n}\nexport var isNumber = function (obj) {\n  return toString.call(obj) === '[object Number]' && /[\\d\\.]+/.test(String(obj))\n}\n// export var isElement = function (obj) {\n//   return !!(obj && obj.nodeType === 1)\n// }\n// export var isJSONString = function (str) {\n//   try {\n//     JSON.parse(str)\n//   } catch (e) {\n//     return false\n//   }\n//   return true\n// }\n// export var safeJSONParse = function (str) {\n//   var val = null\n//   try {\n//     val = JSON.parse(str)\n//   } catch (e) {\n//     return false\n//   }\n//   return val\n// }\n\nexport var encodeDates = function (obj) {\n  each(obj, function (v, k) {\n    if (isDate(v)) {\n      obj[k] = formatDate(v)\n    } else if (isObject(v)) {\n      obj[k] = encodeDates(v)\n    }\n  })\n  return obj\n}\n// export var mediaQueriesSupported = function () {\n//   return (\n//     typeof window.matchMedia !== 'undefined' ||\n//     typeof window.msMatchMedia !== 'undefined'\n//   )\n// }\n// export var getScreenOrientation = function () {\n//   var screenOrientationAPI =\n//     screen.msOrientation ||\n//     screen.mozOrientation ||\n//     (screen.orientation || {}).type\n//   var screenOrientation = ''\n//   if (screenOrientationAPI) {\n//     screenOrientation =\n//       screenOrientationAPI.indexOf('landscape') > -1 ? 'landscape' : 'portrait'\n//   } else if (mediaQueriesSupported()) {\n//     var matchMediaFunc = window.matchMedia || window.msMatchMedia\n//     if (matchMediaFunc('(orientation: landscape)').matches) {\n//       screenOrientation = 'landscape'\n//     } else if (matchMediaFunc('(orientation: portrait)').matches) {\n//       screenOrientation = 'portrait'\n//     }\n//   }\n//   return screenOrientation\n// }\n// export var now =\n//   Date.now ||\n//   function () {\n//     return new Date().getTime()\n//   }\n\nexport var throttle = function (fn, wait, options) {\n  var needLeadingExecution =\n    options && options.leading !== undefined ? options.leading : true\n  var needTrailingExecution =\n    options && options.trailing !== undefined ? options.trailing : true\n  let inWaitPeriod = false\n  let pendingExecutionWithParameters\n  let pendingTimeoutId\n  var context = this\n  return {\n    throttled: function () {\n      if (inWaitPeriod) {\n        pendingExecutionWithParameters = arguments\n        return\n      }\n\n      if (needLeadingExecution) {\n        fn.apply(context, arguments)\n      } else {\n        pendingExecutionWithParameters = arguments\n      }\n      inWaitPeriod = true\n      pendingTimeoutId = setTimeout(function () {\n        if (needTrailingExecution && pendingExecutionWithParameters) {\n          fn.apply(context, pendingExecutionWithParameters)\n        }\n        inWaitPeriod = false\n        pendingExecutionWithParameters = undefined\n      }, wait)\n    },\n    cancel: function () {\n      clearTimeout(pendingTimeoutId)\n      inWaitPeriod = false\n      pendingExecutionWithParameters = undefined\n    }\n  }\n}\n// export var hashCode = function (str) {\n//   if (typeof str !== 'string') {\n//     return 0\n//   }\n//   var hash = 0\n//   var char = null\n//   if (str.length == 0) {\n//     return hash\n//   }\n//   for (var i = 0; i < str.length; i++) {\n//     char = str.charCodeAt(i)\n//     hash = (hash << 5) - hash + char\n//     hash = hash & hash\n//   }\n//   return hash\n// }\nexport var formatDate = function (d) {\n  function pad(n) {\n    return n < 10 ? '0' + n : n\n  }\n\n  return (\n    d.getFullYear() +\n    '-' +\n    pad(d.getMonth() + 1) +\n    '-' +\n    pad(d.getDate()) +\n    ' ' +\n    pad(d.getHours()) +\n    ':' +\n    pad(d.getMinutes()) +\n    ':' +\n    pad(d.getSeconds()) +\n    '.' +\n    pad(d.getMilliseconds())\n  )\n}\nexport var searchObjDate = function (o) {\n  if (isObject(o)) {\n    each(o, function (a, b) {\n      if (isObject(a)) {\n        searchObjDate(o[b])\n      } else {\n        if (isDate(a)) {\n          o[b] = formatDate(a)\n        }\n      }\n    })\n  }\n}\n// export var formatJsonString = function (obj) {\n//   try {\n//     return JSON.stringify(obj, null, '  ')\n//   } catch (e) {\n//     return JSON.stringify(obj)\n//   }\n// }\n// export var formatString = function (str) {\n//   if (str.length > MAX_STRING_LENGTH) {\n//     sd.log('--' + str)\n//     return str.slice(0, MAX_STRING_LENGTH)\n//   } else {\n//     return str\n//   }\n// }\nexport var searchObjString = function (o) {\n  if (isObject(o)) {\n    each(o, function (a, b) {\n      if (isObject(a)) {\n        searchObjString(o[b])\n      } else {\n        if (isString(a)) {\n          o[b] = formatString(a)\n        }\n      }\n    })\n  }\n}\nexport var unique = function (ar) {\n  var temp,\n    n = [],\n    o = {}\n  for (var i = 0; i < ar.length; i++) {\n    temp = ar[i]\n    if (!(temp in o)) {\n      o[temp] = true\n      n.push(temp)\n    }\n  }\n  return n\n}\n// export var strip_empty_properties = function (p) {\n//   var ret = {}\n//   each(p, function (v, k) {\n//     if (v != null) {\n//       ret[k] = v\n//     }\n//   })\n//   return ret\n// }\nexport var utf8Encode = function (string) {\n  string = (string + '').replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n')\n\n  var utftext = '',\n    start,\n    end\n  var stringl = 0,\n    n\n\n  start = end = 0\n  stringl = string.length\n\n  for (n = 0; n < stringl; n++) {\n    var c1 = string.charCodeAt(n)\n    var enc = null\n\n    if (c1 < 128) {\n      end++\n    } else if (c1 > 127 && c1 < 2048) {\n      enc = String.fromCharCode((c1 >> 6) | 192, (c1 & 63) | 128)\n    } else {\n      enc = String.fromCharCode(\n        (c1 >> 12) | 224,\n        ((c1 >> 6) & 63) | 128,\n        (c1 & 63) | 128\n      )\n    }\n    if (enc !== null) {\n      if (end > start) {\n        utftext += string.substring(start, end)\n      }\n      utftext += enc\n      start = end = n + 1\n    }\n  }\n\n  if (end > start) {\n    utftext += string.substring(start, string.length)\n  }\n\n  return utftext\n}\nexport var base64Encode = function (data) {\n  if (typeof btoa === 'function') {\n    return btoa(\n      encodeURIComponent(data).replace(/%([0-9A-F]{2})/g, function (match, p1) {\n        return String.fromCharCode('0x' + p1)\n      })\n    )\n  }\n  data = String(data)\n  var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n  var o1,\n    o2,\n    o3,\n    h1,\n    h2,\n    h3,\n    h4,\n    bits,\n    i = 0,\n    ac = 0,\n    enc = '',\n    tmp_arr = []\n  if (!data) {\n    return data\n  }\n  data = utf8Encode(data)\n  do {\n    o1 = data.charCodeAt(i++)\n    o2 = data.charCodeAt(i++)\n    o3 = data.charCodeAt(i++)\n\n    bits = (o1 << 16) | (o2 << 8) | o3\n\n    h1 = (bits >> 18) & 0x3f\n    h2 = (bits >> 12) & 0x3f\n    h3 = (bits >> 6) & 0x3f\n    h4 = bits & 0x3f\n    tmp_arr[ac++] =\n      b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4)\n  } while (i < data.length)\n\n  enc = tmp_arr.join('')\n\n  switch (data.length % 3) {\n    case 1:\n      enc = enc.slice(0, -2) + '=='\n      break\n    case 2:\n      enc = enc.slice(0, -1) + '='\n      break\n  }\n\n  return enc\n}\n/**\n * UUID v4\n * from https://gist.github.com/jed/982883\n */\nexport function UUID(placeholder) {\n  return placeholder\n    ? // eslint-disable-next-line  no-bitwise\n      (\n        parseInt(placeholder, 10) ^\n        ((Math.random() * 16) >> (parseInt(placeholder, 10) / 4))\n      ).toString(16)\n    : `${1e7}-${1e3}-${4e3}-${8e3}-${1e11}`.replace(/[018]/g, UUID)\n}\n\n/**\n * url, e.g.\n * \n * /authors/345             ->  /authors/?\n * /authors/abc             ->  /authors/abc\n * /authors/a4c             ->  /authors/?\n * /v2/authors/345          ->  /?/authors/?\n * /authors/abc#/books/678  ->  /authors/abc#/books/?\n * /authors/345#/books/678  ->  /authors/?/books/?\n */\nexport function replaceNumberCharByPath(path) {\n  var pathGroup = ''\n  if (path) {\n    pathGroup = path.replace(/\\/([^\\/]*)\\d([^\\/]*)/g, '/?').replace(/\\/$/g, '')\n  }\n  return pathGroup || '/'\n}\n\nexport var urlParse = function (para) {\n  var URLParser = function (a) {\n    this._fields = {\n      Username: 4,\n      Password: 5,\n      Port: 7,\n      Protocol: 2,\n      Host: 6,\n      Path: 8,\n      URL: 0,\n      QueryString: 9,\n      Fragment: 10\n    }\n    this._values = {}\n    this._regex = null\n    this._regex =\n      /^((\\w+):\\/\\/)?((\\w+):?(\\w+)?@)?([^\\/\\?:]+):?(\\d+)?(\\/?[^\\?#]+)?\\??([^#]+)?#?(\\w*)/\n\n    if (typeof a != 'undefined') {\n      this._parse(a)\n    }\n  }\n  URLParser.prototype.setUrl = function (a) {\n    this._parse(a)\n  }\n  URLParser.prototype._initValues = function () {\n    for (var a in this._fields) {\n      this._values[a] = ''\n    }\n  }\n  URLParser.prototype.addQueryString = function (queryObj) {\n    if (typeof queryObj !== 'object') {\n      return false\n    }\n    var query = this._values.QueryString || ''\n    for (var i in queryObj) {\n      if (new RegExp(i + '[^&]+').test(query)) {\n        query = query.replace(new RegExp(i + '[^&]+'), i + '=' + queryObj[i])\n      } else {\n        if (query.slice(-1) === '&') {\n          query = query + i + '=' + queryObj[i]\n        } else {\n          if (query === '') {\n            query = i + '=' + queryObj[i]\n          } else {\n            query = query + '&' + i + '=' + queryObj[i]\n          }\n        }\n      }\n    }\n    this._values.QueryString = query\n  }\n  URLParser.prototype.getParse = function () {\n    return this._values\n  }\n  URLParser.prototype.getUrl = function () {\n    var url = ''\n    url += this._values.Origin\n    // url += this._values.Port ? ':' + this._values.Port : ''\n    url += this._values.Path\n    url += this._values.QueryString ? '?' + this._values.QueryString : ''\n    return url\n  }\n  URLParser.prototype._parse = function (a) {\n    this._initValues()\n    var b = this._regex.exec(a)\n    if (!b) {\n      throw 'DPURLParser::_parse -> Invalid URL'\n    }\n    for (var c in this._fields) {\n      if (typeof b[this._fields[c]] != 'undefined') {\n        this._values[c] = b[this._fields[c]]\n      }\n    }\n    this._values['Path'] = this._values['Path'] || '/'\n    this._values['Hostname'] = this._values['Host'].replace(/:\\d+$/, '')\n    this._values['Origin'] =\n      this._values['Protocol'] +\n      '://' +\n      this._values['Hostname'] +\n      (this._values.Port ? ':' + this._values.Port : '')\n    // this._values['Hostname'] = this._values['Host'].replace(/:\\d+$/, '')\n    // this._values['Origin'] =\n    //   this._values['Protocol'] + '://' + this._values['Hostname']\n  }\n  return new URLParser(para)\n}\n// export function elementMatches(element, selector) {\n//   if (element.matches) {\n//     return element.matches(selector)\n//   }\n//   // IE11 support\n//   if (element.msMatchesSelector) {\n//     return element.msMatchesSelector(selector)\n//   }\n//   return false\n// }\n\nexport var localStorage = {\n  get: function (name) {\n    return window.localStorage.getItem(name)\n  },\n\n  parse: function (name) {\n    var storedValue\n    try {\n      storedValue = JSON.parse(localStorage.get(name)) || null\n    } catch (err) {\n      sd.log(err)\n    }\n    return storedValue\n  },\n\n  set: function (name, value) {\n    window.localStorage.setItem(name, value)\n  },\n\n  remove: function (name) {\n    window.localStorage.removeItem(name)\n  },\n\n  isSupport: function () {\n    var supported = true\n    try {\n      var key = '__sensorsdatasupport__'\n      var val = 'testIsSupportStorage'\n      localStorage.set(key, val)\n      if (localStorage.get(key) !== val) {\n        supported = false\n      }\n      localStorage.remove(key)\n    } catch (err) {\n      supported = false\n    }\n    return supported\n  }\n}\nexport var sessionStorage = {\n  isSupport: function () {\n    var supported = true\n\n    var key = '__sensorsdatasupport__'\n    var val = 'testIsSupportStorage'\n    try {\n      if (sessionStorage && sessionStorage.setItem) {\n        sessionStorage.setItem(key, val)\n        sessionStorage.removeItem(key, val)\n        supported = true\n      } else {\n        supported = false\n      }\n    } catch (e) {\n      supported = false\n    }\n    return supported\n  }\n}\n// export var isSupportCors = function () {\n//   if (typeof window.XMLHttpRequest === 'undefined') {\n//     return false\n//   }\n//   if ('withCredentials' in new XMLHttpRequest()) {\n//     return true\n//   } else if (typeof XDomainRequest !== 'undefined') {\n//     return true\n//   } else {\n//     return false\n//   }\n// }\n// export var xhr = function (cors) {\n//   if (cors) {\n//     if (\n//       typeof window.XMLHttpRequest !== 'undefined' &&\n//       'withCredentials' in new XMLHttpRequest()\n//     ) {\n//       return new XMLHttpRequest()\n//     } else if (typeof XDomainRequest !== 'undefined') {\n//       return new XDomainRequest()\n//     } else {\n//       return null\n//     }\n//   } else {\n//     if (typeof window.XMLHttpRequest !== 'undefined') {\n//       return new XMLHttpRequest()\n//     }\n//     if (window.ActiveXObject) {\n//       try {\n//         return new ActiveXObject('Msxml2.XMLHTTP')\n//       } catch (d) {\n//         try {\n//           return new ActiveXObject('Microsoft.XMLHTTP')\n//         } catch (d) {\n//           console.log(d)\n//         }\n//       }\n//     }\n//   }\n// }\n// export var ajax = function (para) {\n//   para.timeout = para.timeout || 20000\n\n//   para.credentials =\n//     typeof para.credentials === 'undefined' ? true : para.credentials\n\n//   function getJSON(data) {\n//     if (!data) {\n//       return ''\n//     }\n//     try {\n//       return JSON.parse(data)\n//     } catch (e) {\n//       return {}\n//     }\n//   }\n\n//   var g = xhr(para.cors)\n\n//   if (!g) {\n//     return false\n//   }\n\n//   if (!para.type) {\n//     para.type = para.data ? 'POST' : 'GET'\n//   }\n//   para = extend(\n//     {\n//       success: function () {},\n//       error: function () {}\n//     },\n//     para\n//   )\n\n//   try {\n//     if (typeof g === 'object' && 'timeout' in g) {\n//       g.timeout = para.timeout\n//     } else {\n//       setTimeout(function () {\n//         g.abort()\n//       }, para.timeout + 500)\n//     }\n//   } catch (e) {\n//     try {\n//       setTimeout(function () {\n//         g.abort()\n//       }, para.timeout + 500)\n//     } catch (e2) {}\n//   }\n\n//   g.onreadystatechange = function () {\n//     try {\n//       if (g.readyState == 4) {\n//         if ((g.status >= 200 && g.status < 300) || g.status == 304) {\n//           para.success(getJSON(g.responseText))\n//         } else {\n//           para.error(getJSON(g.responseText), g.status)\n//         }\n//         g.onreadystatechange = null\n//         g.onload = null\n//       }\n//     } catch (e) {\n//       g.onreadystatechange = null\n//       g.onload = null\n//     }\n//   }\n\n//   g.open(para.type, para.url, true)\n\n//   try {\n//     if (para.credentials) {\n//       g.withCredentials = true\n//     }\n//     if (isObject(para.header)) {\n//       for (var i in para.header) {\n//         g.setRequestHeader(i, para.header[i])\n//       }\n//     }\n\n//     if (para.data) {\n//       if (!para.cors) {\n//         g.setRequestHeader('X-Requested-With', 'XMLHttpRequest')\n//       }\n//       if (para.contentType === 'application/json') {\n//         g.setRequestHeader('Content-type', 'application/json; charset=UTF-8')\n//       } else {\n//         g.setRequestHeader('Content-type', 'application/x-www-form-urlencoded')\n//       }\n//     }\n//   } catch (e) {}\n\n//   g.send(para.data || null)\n// }\n// export var loadScript = function (para) {\n//   para = extend(\n//     {\n//       success: function () {},\n//       error: function () {},\n//       appendCall: function (g) {\n//         document.getElementsByTagName('head')[0].appendChild(g)\n//       }\n//     },\n//     para\n//   )\n\n//   var g = null\n//   if (para.type === 'css') {\n//     g = document.createElement('link')\n//     g.rel = 'stylesheet'\n//     g.href = para.url\n//   }\n//   if (para.type === 'js') {\n//     g = document.createElement('script')\n//     g.async = 'async'\n//     g.setAttribute('charset', 'UTF-8')\n//     g.src = para.url\n//     g.type = 'text/javascript'\n//   }\n//   g.onload = g.onreadystatechange = function () {\n//     if (\n//       !this.readyState ||\n//       this.readyState === 'loaded' ||\n//       this.readyState === 'complete'\n//     ) {\n//       para.success()\n//       g.onload = g.onreadystatechange = null\n//     }\n//   }\n//   g.onerror = function () {\n//     para.error()\n//     g.onerror = null\n//   }\n//   para.appendCall(g)\n// }\n// export var getHostname = function (url, defaultValue) {\n//   if (!defaultValue || typeof defaultValue !== 'string') {\n//     defaultValue = 'hostname'\n//   }\n//   var hostname = null\n//   try {\n//     hostname = URL(url).hostname\n//   } catch (e) {}\n//   return hostname || defaultValue\n// }\nexport var getQueryParamsFromUrl = function (url) {\n  var result = {}\n  var arr = url.split('?')\n  var queryString = arr[1] || ''\n  if (queryString) {\n    result = getURLSearchParams('?' + queryString)\n  }\n  return result\n}\n\nexport var getURLSearchParams = function (queryString) {\n  queryString = queryString || ''\n  var decodeParam = function (str) {\n    return decodeURIComponent(str)\n  }\n  var args = {}\n  var query = queryString.substring(1)\n  var pairs = query.split('&')\n  for (var i = 0; i < pairs.length; i++) {\n    var pos = pairs[i].indexOf('=')\n    if (pos === -1) continue\n    var name = pairs[i].substring(0, pos)\n    var value = pairs[i].substring(pos + 1)\n    name = decodeParam(name)\n    value = decodeParam(value)\n    args[name] = value\n  }\n  return args\n}\nfunction createCircularReferenceChecker() {\n  if (typeof WeakSet !== 'undefined') {\n    var set = new WeakSet()\n    return {\n      hasAlreadyBeenSeen: function (value) {\n        var has = set.has(value)\n        if (!has) {\n          set.add(value)\n        }\n        return has\n      }\n    }\n  }\n  var array = []\n  return {\n    hasAlreadyBeenSeen: function (value) {\n      var has = array.indexOf(value) >= 0\n      if (!has) {\n        array.push(value)\n      }\n      return has\n    }\n  }\n}\n/**\n * Similar to `typeof`, but distinguish plain objects from `null` and arrays\n */\nexport function getType(value) {\n  if (value === null) {\n    return 'null'\n  }\n  if (Array.isArray(value)) {\n    return 'array'\n  }\n  return typeof value\n}\n/**\n * Iterate over source and affect its sub values into destination, recursively.\n * If the source and destination can't be merged, return source.\n */\nexport function mergeInto(destination, source, circularReferenceChecker) {\n  // ignore the source if it is undefined\n  if (typeof circularReferenceChecker === 'undefined') {\n    circularReferenceChecker = createCircularReferenceChecker()\n  }\n  if (source === undefined) {\n    return destination\n  }\n\n  if (typeof source !== 'object' || source === null) {\n    // primitive values - just return source\n    return source\n  } else if (source instanceof Date) {\n    return new Date(source.getTime())\n  } else if (source instanceof RegExp) {\n    var flags =\n      source.flags ||\n      // old browsers compatibility\n      [\n        source.global ? 'g' : '',\n        source.ignoreCase ? 'i' : '',\n        source.multiline ? 'm' : '',\n        source.sticky ? 'y' : '',\n        source.unicode ? 'u' : ''\n      ].join('')\n    return new RegExp(source.source, flags)\n  }\n\n  if (circularReferenceChecker.hasAlreadyBeenSeen(source)) {\n    // remove circular references\n    return undefined\n  } else if (Array.isArray(source)) {\n    var merged = Array.isArray(destination) ? destination : []\n    for (var i = 0; i < source.length; ++i) {\n      merged[i] = mergeInto(merged[i], source[i], circularReferenceChecker)\n    }\n    return merged\n  }\n\n  var merged = getType(destination) === 'object' ? destination : {}\n  for (var key in source) {\n    if (Object.prototype.hasOwnProperty.call(source, key)) {\n      merged[key] = mergeInto(\n        merged[key],\n        source[key],\n        circularReferenceChecker\n      )\n    }\n  }\n  return merged\n}\n\n/**\n * A simplistic implementation of a deep clone algorithm.\n * Caveats:\n * - It doesn't maintain prototype chains - don't use with instances of custom classes.\n * - It doesn't handle Map and Set\n */\nexport function deepClone(value) {\n  return mergeInto(undefined, value)\n}\n\n// export var getCurrentDomain = function (url) {\n//   var cookieTopLevelDomain = getCookieTopLevelDomain()\n//   if (url === '') {\n//     return 'url'\n//   } else if (cookieTopLevelDomain === '') {\n//     return 'url'\n//   } else {\n//     return cookieTopLevelDomain\n//   }\n// }\n// export var getCookieTopLevelDomain = function (hostname) {\n//   hostname = hostname || window.location.hostname\n//   var splitResult = hostname.split('.')\n//   if (\n//     isArray(splitResult) &&\n//     splitResult.length >= 2 &&\n//     !/^(\\d+\\.)+\\d+$/.test(hostname)\n//   ) {\n//     var domainStr = '.' + splitResult.splice(splitResult.length - 1, 1)\n//     while (splitResult.length > 0) {\n//       domainStr =\n//         '.' + splitResult.splice(splitResult.length - 1, 1) + domainStr\n//       document.cookie = 'domain_test=true; path=/; domain=' + domainStr\n//       if (document.cookie.indexOf('domain_test=true') !== -1) {\n//         var now = new Date()\n//         now.setTime(now.getTime() - 1000)\n//         document.cookie =\n//           'domain_test=true; expires=' +\n//           now.toGMTString() +\n//           '; path=/; domain=' +\n//           domainStr\n//         return domainStr\n//       }\n//     }\n//   }\n//   return ''\n// }\n// export var strToUnicode = function (str) {\n//   if (typeof str !== 'string') {\n//     return str\n//   }\n//   var nstr = ''\n//   for (var i = 0; i < str.length; i++) {\n//     nstr += '\\\\' + str.charCodeAt(i).toString(16)\n//   }\n//   return nstr\n// }\n// export var autoExeQueue = function () {\n//   var queue = {\n//     items: [],\n//     enqueue: function (val) {\n//       this.items.push(val)\n//       this.start()\n//     },\n//     dequeue: function () {\n//       return this.items.shift()\n//     },\n//     getCurrentItem: function () {\n//       return this.items[0]\n//     },\n//     isRun: false,\n//     start: function () {\n//       if (this.items.length > 0 && !this.isRun) {\n//         this.isRun = true\n//         this.getCurrentItem().start()\n//       }\n//     },\n//     close: function () {\n//       this.dequeue()\n//       this.isRun = false\n//       this.start()\n//     }\n//   }\n//   return queue\n// }\n// export var strip_sa_properties = function (p) {\n//   if (!isObject(p)) {\n//     return p\n//   }\n//   each(p, function (v, k) {\n//     if (isArray(v)) {\n//       var temp = []\n//       each(v, function (arrv) {\n//         if (isString(arrv)) {\n//           temp.push(arrv)\n//         } else {\n//           console.log(\n//             '-',\n//             k,\n//             v,\n//             ','\n//           )\n//         }\n//       })\n//       if (temp.length !== 0) {\n//         p[k] = temp\n//       } else {\n//         delete p[k]\n//         console.log('')\n//       }\n//     }\n//     if (\n//       !(\n//         isString(v) ||\n//         isNumber(v) ||\n//         isDate(v) ||\n//         isBoolean(v) ||\n//         isArray(v) ||\n//         isFunction(v) ||\n//         k === '$option'\n//       )\n//     ) {\n//       console.log('-', k, v, '-')\n//       delete p[k]\n//     }\n//   })\n//   return p\n// }\n\n// export var searchConfigData = function (data) {\n//   if (typeof data === 'object' && data.$option) {\n//     var data_config = data.$option\n//     delete data.$option\n//     return data_config\n//   } else {\n//     return {}\n//   }\n// }\n//  src  k+sp   e  k==e  k  e  k+sp \n// abcd=1&b=1&c=3;\n// abdc=1;b=1;a=3;\n// export var stringSplice = function (src, k, e, sp) {\n//   if (src === '') {\n//     return ''\n//   }\n//   sp = sp === '' ? '=' : sp\n//   k += sp\n//   var ps = src.indexOf(k)\n//   if (ps < 0) {\n//     return ''\n//   }\n//   ps += k.length\n//   var pe = pe < ps ? src.length : src.indexOf(e, ps)\n//   return src.substring(ps, pe)\n// }\nexport function getStatusGroup(status) {\n  if (!status) return status === 0 ? undefined : status\n  return (\n    String(status).substr(0, 1) + String(status).substr(1).replace(/\\d*/g, 'x')\n  )\n}\n// export var getReferrer = function () {\n//   var ref = document.referrer.toLowerCase()\n//   var re = /^[^\\?&#]*.swf([\\?#])?/\n//   //  Referer  URL \n//   if (ref === '' || ref.match(re)) {\n//     ref = stringSplice(window.location.href, 'ref', '&', '')\n//     if (ref !== '') {\n//       return encodeURIComponent(ref)\n//     }\n//   }\n//   return encodeURIComponent(ref)\n// }\n// export var typeDecide = function (o, type) {\n//   return toString.call(o) === '[object ' + type + ']'\n// }\n\nexport function noop() {}\n\nexport var ONE_SECOND = 1000\nexport var ONE_MINUTE = 60 * ONE_SECOND\nexport var ONE_HOUR = 60 * ONE_MINUTE\nexport var ONE_DAY = 24 * ONE_HOUR\nexport var ONE_YEAR = 365 * ONE_DAY\n\n/**\n * Return true if the draw is successful\n * @param threshold between 0 and 100\n */\nexport function performDraw(threshold) {\n  return threshold !== 0 && Math.random() * 100 <= threshold\n}\n\nexport function round(num, decimals) {\n  return +num.toFixed(decimals)\n}\n\nexport function msToNs(duration) {\n  if (typeof duration !== 'number') {\n    return duration\n  }\n  return round(duration * 1e6, 0)\n}\nexport function mapValues(object, fn) {\n  var newObject = {}\n  each(object, function (value, key) {\n    newObject[key] = fn(value)\n  })\n\n  return newObject\n}\n\nexport function toServerDuration(duration) {\n  if (!isNumber(duration)) {\n    return duration\n  }\n  return round(duration * 1e6, 0)\n}\nexport function getRelativeTime(timestamp) {\n  return timestamp - getNavigationStart()\n}\nexport function preferredNow() {\n  return relativeNow()\n}\nexport function getTimestamp(relativeTime) {\n  return Math.round(getNavigationStart() + relativeTime)\n}\nexport function relativeNow() {\n  return performance.now()\n}\n\nexport function clocksNow() {\n  return { relative: relativeNow(), timeStamp: timeStampNow() }\n}\nexport function timeStampNow() {\n  return dateNow()\n}\n\nexport function looksLikeRelativeTime(time) {\n  return time < ONE_YEAR\n}\nexport function dateNow() {\n  // Do not use `Date.now` because sometimes websites are wrongly \"polyfilling\" it. For example, we\n  // had some users using a very old version of `datejs`, which patched `Date.now` to return a Date\n  // instance instead of a timestamp[1]. Those users are unlikely to fix this, so let's handle this\n  // case ourselves.\n  // [1]: https://github.com/datejs/Datejs/blob/97f5c7c58c5bc5accdab8aa7602b6ac56462d778/src/core-debug.js#L14-L16\n  return new Date().getTime()\n}\n\nexport function elapsed(start, end) {\n  return end - start\n}\n\nexport function clocksOrigin() {\n  return { relative: 0, timeStamp: getNavigationStart() }\n}\n// export function preferredClock(clocks) {\n//   return clocks.relative\n// }\n// export function preferredTimeStamp(clocks) {\n//   return getTimestamp(clocks.relative)\n// }\nexport function relativeToClocks(relative) {\n  return { relative: relative, timeStamp: getCorrectedTimeStamp(relative) }\n}\nexport function currentDrift() {\n  // eslint-disable-next-line @typescript-eslint/restrict-plus-operands\n  return Math.round(dateNow() - (getNavigationStart() + performance.now()))\n}\nexport function addDuration(a, b) {\n  return a + b\n}\nfunction getCorrectedTimeStamp(relativeTime) {\n  var correctedOrigin = dateNow() - performance.now()\n  // apply correction only for positive drift\n  if (correctedOrigin > getNavigationStart()) {\n    return Math.round(correctedOrigin + relativeTime)\n  }\n  return getTimestamp(relativeTime)\n}\n/**\n * Navigation start slightly change on some rare cases\n */\nvar navigationStart\nexport function getNavigationStart() {\n  if (navigationStart === undefined) {\n    navigationStart = performance.timing.navigationStart\n  }\n  return navigationStart\n}\n\nvar COMMA_SEPARATED_KEY_VALUE = /([\\w-]+)\\s*=\\s*([^;]+)/g\nexport function findCommaSeparatedValue(rawString, name) {\n  COMMA_SEPARATED_KEY_VALUE.lastIndex = 0\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    var match = COMMA_SEPARATED_KEY_VALUE.exec(rawString)\n    if (match) {\n      if (match[1] === name) {\n        return match[2]\n      }\n    } else {\n      break\n    }\n  }\n}\n\nexport function findCommaSeparatedValues(rawString) {\n  var result = new Map()\n  COMMA_SEPARATED_KEY_VALUE.lastIndex = 0\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    var match = COMMA_SEPARATED_KEY_VALUE.exec(rawString)\n    if (match) {\n      result.set(match[1], match[2])\n    } else {\n      break\n    }\n  }\n  return result\n}\nexport function findByPath(source, path) {\n  var pathArr = path.split('.')\n  while (pathArr.length) {\n    var key = pathArr.shift()\n    if (\n      source &&\n      isObject(source) &&\n      key in source &&\n      hasOwnProperty.call(source, key)\n    ) {\n      source = source[key]\n    } else {\n      return undefined\n    }\n  }\n  return source\n}\nexport function safeTruncate(candidate, length) {\n  var lastChar = candidate.charCodeAt(length - 1)\n  // check if it is the high part of a surrogate pair\n  if (lastChar >= 0xd800 && lastChar <= 0xdbff) {\n    return candidate.slice(0, length + 1)\n  }\n  return candidate.slice(0, length)\n}\nexport function isMatchOption(item) {\n  const itemType = getType(item)\n  return (\n    itemType === 'string' || itemType === 'function' || item instanceof RegExp\n  )\n}\nexport function includes(candidate, search) {\n  // tslint:disable-next-line: no-unsafe-any\n  return candidate.indexOf(search) !== -1\n}\n\nexport function find(array, predicate) {\n  for (var i = 0; i < array.length; i += 1) {\n    var item = array[i]\n    if (predicate(item, i, array)) {\n      return item\n    }\n  }\n  return undefined\n}\nexport function arrayFrom(arrayLike) {\n  if (Array.from) {\n    return Array.from(arrayLike)\n  }\n  var array = []\n  if (arrayLike instanceof Set) {\n    arrayLike.forEach(function (item) {\n      array.push(item)\n    })\n  } else {\n    for (var i = 0; i < arrayLike.length; i++) {\n      array.push(arrayLike[i])\n    }\n  }\n  return array\n}\nexport function findLast(array, predicate) {\n  for (var i = array.length - 1; i >= 0; i -= 1) {\n    var item = array[i]\n    if (predicate(item, i, array)) {\n      return item\n    }\n  }\n  return undefined\n}\nexport function isPercentage(value) {\n  return isNumber(value) && value >= 0 && value <= 100\n}\n\nexport function getLocationOrigin() {\n  return getLinkElementOrigin(window.location)\n}\nexport var Browser = {\n  IE: 0,\n  CHROMIUM: 1,\n  SAFARI: 2,\n  OTHER: 3\n}\nexport function isIE() {\n  return detectBrowserCached() === Browser.IE\n}\nexport function isChromium() {\n  return detectBrowserCached() === Browser.CHROMIUM\n}\nexport function isSafari() {\n  return detectBrowserCached() === Browser.SAFARI\n}\nvar browserCache\nfunction detectBrowserCached() {\n  return isNullUndefinedDefaultValue(\n    browserCache,\n    (browserCache = detectBrowser())\n  )\n}\nexport function detectBrowser(browserWindow) {\n  if (typeof browserWindow === 'undefined') {\n    browserWindow = window\n  }\n  var userAgent = browserWindow.navigator.userAgent\n  if (browserWindow.chrome || /HeadlessChrome/.test(userAgent)) {\n    return Browser.CHROMIUM\n  }\n\n  if (\n    // navigator.vendor is deprecated, but it is the most resilient way we found to detect\n    // \"Apple maintained browsers\" (AKA Safari). If one day it gets removed, we still have the\n    // useragent test as a semi-working fallback.\n    browserWindow.navigator.vendor?.indexOf('Apple') === 0 ||\n    (/safari/i.test(userAgent) && !/chrome|android/i.test(userAgent))\n  ) {\n    return Browser.SAFARI\n  }\n\n  if (browserWindow.document.documentMode) {\n    return Browser.IE\n  }\n\n  return Browser.OTHER\n}\n\n/**\n * IE fallback\n * https://developer.mozilla.org/en-US/docs/Web/API/HTMLHyperlinkElementUtils/origin\n */\nexport function getLinkElementOrigin(element) {\n  if (element.origin && element.origin !== 'null') {\n    return element.origin\n  }\n  var sanitizedHost = element.host.replace(/(:80|:443)$/, '')\n  return element.protocol + '//' + sanitizedHost\n}\n\nexport function withSnakeCaseKeys(candidate) {\n  var result = {}\n  each(candidate, function (value, key) {\n    result[toSnakeCase(key)] = deepSnakeCase(value)\n  })\n  return result\n}\n\nexport function deepSnakeCase(candidate) {\n  if (isArray(candidate)) {\n    return map(candidate, function (value) {\n      return deepSnakeCase(value)\n    })\n  }\n  if (typeof candidate === 'object' && candidate !== null) {\n    return withSnakeCaseKeys(candidate)\n  }\n  return candidate\n}\n\nexport function toSnakeCase(word) {\n  return word\n    .replace(/[A-Z]/g, function (uppercaseLetter, index) {\n      return (index !== 0 ? '_' : '') + uppercaseLetter.toLowerCase()\n    })\n    .replace(/-/g, '_')\n}\n\nexport function isNullUndefinedDefaultValue(data, defaultValue) {\n  if (data !== null && data !== void 0) {\n    return data\n  } else {\n    return defaultValue\n  }\n}\n\nexport function objectHasValue(object, value) {\n  return some(keys(object), function (key) {\n    return object[key] === value\n  })\n}\nexport function startsWith(candidate, search) {\n  return candidate.slice(0, search.length) === search\n}\n\nexport function endsWith(candidate, search) {\n  return candidate.slice(-search.length) === search\n}\n// export function removeDuplicates(array) {\n//   var set = new Set()\n//   array.forEach(function (item) {\n//     set.add(item)\n//   })\n//   return arrayFrom(set)\n// }\n\nexport function removeItem(array, item) {\n  var index = array.indexOf(item)\n  if (index >= 0) {\n    array.splice(index, 1)\n  }\n}\nexport function tryToClone(response) {\n  try {\n    return response.clone()\n  } catch (e) {\n    // clone can throw if the response has already been used by another instrumentation or is disturbed\n    return\n  }\n}\nexport function isHashAnAnchor(hash) {\n  var correspondingId = hash.substr(1)\n  if (!correspondingId) return false\n  return !!document.getElementById(correspondingId)\n}\nexport function getPathFromHash(hash) {\n  var index = hash.indexOf('?')\n  return index < 0 ? hash : hash.slice(0, index)\n}\n\nexport function discardNegativeDuration(duration) {\n  return isNumber(duration) && duration < 0 ? undefined : duration\n}\n","import { removeItem } from './tools'\nvar BUFFER_LIMIT = 500\nexport function createBoundedBuffer() {\n  var buffer = []\n\n  var add = function (callback) {\n    var length = buffer.push(callback)\n    if (length > BUFFER_LIMIT) {\n      buffer.splice(0, 1)\n    }\n  }\n\n  var remove = function (callback) {\n    removeItem(buffer, callback)\n  }\n\n  const drain = function (arg) {\n    buffer.forEach(function (callback) {\n      callback(arg)\n    })\n    buffer.length = 0\n  }\n\n  return {\n    add: add,\n    remove: add,\n    drain: drain\n  }\n}\n","import { relativeNow, ONE_MINUTE, removeItem, addDuration } from './tools'\nimport { setInterval, clearInterval } from './timer'\nvar END_OF_TIMES = Infinity\n\nexport var CLEAR_OLD_VALUES_INTERVAL = ONE_MINUTE\nlet cleanupHistoriesInterval = null\n\nconst cleanupTasks = new Set()\n\nfunction cleanupHistories() {\n  cleanupTasks.forEach((task) => task())\n}\n/**\n *\n * @param {expireDelay,maxEntries } params\n * @returns\n */\nexport function createValueHistory(params) {\n  var expireDelay = params.expireDelay\n  var maxEntries = params.maxEntries\n\n  var entries = []\n  if (cleanupHistoriesInterval) {\n    cleanupHistoriesInterval = setInterval(function () {\n      return clearExpiredValues()\n    }, CLEAR_OLD_VALUES_INTERVAL)\n  }\n\n  function clearExpiredValues() {\n    var oldTimeThreshold = relativeNow() - expireDelay\n    while (\n      entries.length > 0 &&\n      entries[entries.length - 1].endTime < oldTimeThreshold\n    ) {\n      entries.pop()\n    }\n  }\n  cleanupTasks.add(clearExpiredValues)\n  function add(value, startTime) {\n    var entry = {\n      value: value,\n      startTime: startTime,\n      endTime: END_OF_TIMES,\n      remove: function () {\n        removeItem(entries, entry)\n      },\n      close: function (endTime) {\n        entry.endTime = endTime\n      }\n    }\n\n    if (maxEntries && entries.length >= maxEntries) {\n      entries.pop()\n    }\n\n    entries.unshift(entry)\n\n    return entry\n  }\n\n  function find(startTime, options) {\n    if (typeof startTime === 'undefined') {\n      startTime = END_OF_TIMES\n    }\n    if (typeof options === 'undefined') {\n      options = { returnInactive: false }\n    }\n    for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n      var entry = entries_1[_i]\n      if (entry.startTime <= startTime) {\n        if (options.returnInactive || startTime <= entry.endTime) {\n          return entry.value\n        }\n        break\n      }\n    }\n  }\n\n  function closeActive(endTime) {\n    var latestEntry = entries[0]\n    if (latestEntry && latestEntry.endTime === END_OF_TIMES) {\n      latestEntry.close(endTime)\n    }\n  }\n\n  function findAll(startTime, duration) {\n    if (startTime === undefined) {\n      startTime = END_OF_TIMES\n    }\n    if (duration === undefined) {\n      duration = 0\n    }\n    var endTime = addDuration(startTime, duration)\n    return entries\n      .filter(function (entry) {\n        return entry.startTime <= endTime && startTime <= entry.endTime\n      })\n      .map(function (entry) {\n        return entry.value\n      })\n  }\n\n  /**\n   * Remove all entries from this collection.\n   */\n  function reset() {\n    entries = []\n  }\n\n  /**\n   * Stop internal garbage collection of past entries.\n   */\n  function stop() {\n    cleanupTasks.delete(clearExpiredValues)\n    if (cleanupTasks.size === 0 && cleanupHistoriesInterval) {\n      clearInterval(cleanupHistoriesInterval)\n      cleanupHistoriesInterval = null\n    }\n  }\n\n  return {\n    add: add,\n    find: find,\n    closeActive: closeActive,\n    findAll: findAll,\n    reset: reset,\n    stop: stop\n  }\n}\n","import { display } from '../helper/display'\nimport { monitor } from '../helper/monitor'\nvar VariableLibrary = {\n  navigator:\n    typeof window !== 'undefined' && typeof window.navigator != 'undefined'\n      ? window.navigator\n      : {},\n  // map\n  infoMap: {\n    engine: ['WebKit', 'Trident', 'Gecko', 'Presto'],\n    browser: [\n      'Safari',\n      'Chrome',\n      'Edge',\n      'IE',\n      'IE 11',\n      'IE 10',\n      'IE 9',\n      'IE 8',\n      'IE 7',\n      'Firefox',\n      'Firefox Focus',\n      'Chromium',\n      'Opera',\n      'Vivaldi',\n      'Yandex',\n      'Arora',\n      'Lunascape',\n      'QupZilla',\n      'Coc Coc',\n      'Kindle',\n      'Iceweasel',\n      'Konqueror',\n      'Iceape',\n      'SeaMonkey',\n      'Epiphany',\n      '360',\n      '360SE',\n      '360EE',\n      'UC',\n      'QQBrowser',\n      'QQ',\n      'Baidu',\n      'Maxthon',\n      'Sogou',\n      'LBBROWSER',\n      '2345Explorer',\n      'TheWorld',\n      'XiaoMi',\n      'Quark',\n      'Qiyu',\n      'Wechat',\n      ,\n      'WechatWork',\n      'Taobao',\n      'Alipay',\n      'Weibo',\n      'Douban',\n      'Suning',\n      'iQiYi'\n    ],\n    os: [\n      'Windows',\n      'Linux',\n      'Mac OS',\n      'Android',\n      'Ubuntu',\n      'FreeBSD',\n      'Debian',\n      'iOS',\n      'Windows Phone',\n      'BlackBerry',\n      'MeeGo',\n      'Symbian',\n      'Chrome OS',\n      'WebOS'\n    ],\n    device: ['Mobile', 'Tablet', 'iPad']\n  }\n}\n// \nvar MethodLibrary = {\n  // \n  getMatchMap: monitor(function (u) {\n    return {\n      // \n      Trident: u.indexOf('Trident') > -1 || u.indexOf('NET CLR') > -1,\n      Presto: u.indexOf('Presto') > -1,\n      WebKit: u.indexOf('AppleWebKit') > -1,\n      Gecko: u.indexOf('Gecko/') > -1,\n      // \n      Safari: u.indexOf('Safari') > -1,\n      Chrome: u.indexOf('Chrome') > -1 || u.indexOf('CriOS') > -1,\n      IE: u.indexOf('MSIE') > -1 || u.indexOf('Trident') > -1,\n      Edge: u.indexOf('Edge') > -1 || u.indexOf('Edg') > -1,\n      Firefox: u.indexOf('Firefox') > -1 || u.indexOf('FxiOS') > -1,\n      'Firefox Focus': u.indexOf('Focus') > -1,\n      Chromium: u.indexOf('Chromium') > -1,\n      Opera: u.indexOf('Opera') > -1 || u.indexOf('OPR') > -1,\n      Vivaldi: u.indexOf('Vivaldi') > -1,\n      Yandex: u.indexOf('YaBrowser') > -1,\n      Arora: u.indexOf('Arora') > -1,\n      Lunascape: u.indexOf('Lunascape') > -1,\n      QupZilla: u.indexOf('QupZilla') > -1,\n      'Coc Coc': u.indexOf('coc_coc_browser') > -1,\n      Kindle: u.indexOf('Kindle') > -1 || u.indexOf('Silk/') > -1,\n      Iceweasel: u.indexOf('Iceweasel') > -1,\n      Konqueror: u.indexOf('Konqueror') > -1,\n      Iceape: u.indexOf('Iceape') > -1,\n      SeaMonkey: u.indexOf('SeaMonkey') > -1,\n      Epiphany: u.indexOf('Epiphany') > -1,\n      360: u.indexOf('QihooBrowser') > -1 || u.indexOf('QHBrowser') > -1,\n      '360EE': u.indexOf('360EE') > -1,\n      '360SE': u.indexOf('360SE') > -1,\n      UC: u.indexOf('UC') > -1 || u.indexOf(' UBrowser') > -1,\n      QQBrowser: u.indexOf('QQBrowser') > -1,\n      QQ: u.indexOf('QQ/') > -1,\n      Baidu: u.indexOf('Baidu') > -1 || u.indexOf('BIDUBrowser') > -1,\n      Maxthon: u.indexOf('Maxthon') > -1,\n      Sogou: u.indexOf('MetaSr') > -1 || u.indexOf('Sogou') > -1,\n      LBBROWSER: u.indexOf('LBBROWSER') > -1,\n      '2345Explorer': u.indexOf('2345Explorer') > -1,\n      TheWorld: u.indexOf('TheWorld') > -1,\n      XiaoMi: u.indexOf('MiuiBrowser') > -1,\n      Quark: u.indexOf('Quark') > -1,\n      Qiyu: u.indexOf('Qiyu') > -1,\n      Wechat: u.indexOf('MicroMessenger') > -1,\n      Taobao: u.indexOf('AliApp(TB') > -1,\n      Alipay: u.indexOf('AliApp(AP') > -1,\n      Weibo: u.indexOf('Weibo') > -1,\n      Douban: u.indexOf('com.douban.frodo') > -1,\n      Suning: u.indexOf('SNEBUY-APP') > -1,\n      iQiYi: u.indexOf('IqiyiApp') > -1,\n      // \n      Windows: u.indexOf('Windows') > -1,\n      Linux: u.indexOf('Linux') > -1 || u.indexOf('X11') > -1,\n      'Mac OS': u.indexOf('Macintosh') > -1,\n      Android: u.indexOf('Android') > -1 || u.indexOf('Adr') > -1,\n      Ubuntu: u.indexOf('Ubuntu') > -1,\n      FreeBSD: u.indexOf('FreeBSD') > -1,\n      Debian: u.indexOf('Debian') > -1,\n      'Windows Phone':\n        u.indexOf('IEMobile') > -1 || u.indexOf('Windows Phone') > -1,\n      BlackBerry: u.indexOf('BlackBerry') > -1 || u.indexOf('RIM') > -1,\n      MeeGo: u.indexOf('MeeGo') > -1,\n      Symbian: u.indexOf('Symbian') > -1,\n      iOS: u.indexOf('like Mac OS X') > -1,\n      'Chrome OS': u.indexOf('CrOS') > -1,\n      WebOS: u.indexOf('hpwOS') > -1,\n      // \n      Mobile:\n        u.indexOf('Mobi') > -1 ||\n        u.indexOf('iPh') > -1 ||\n        u.indexOf('480') > -1,\n      Tablet: u.indexOf('Tablet') > -1 || u.indexOf('Nexus 7') > -1,\n      iPad: u.indexOf('iPad') > -1\n    }\n  }),\n  // map\n  matchInfoMap: monitor(function (_this) {\n    var u = VariableLibrary.navigator.userAgent || ''\n    var match = MethodLibrary.getMatchMap(u)\n    for (var s in VariableLibrary.infoMap) {\n      for (var i = 0; i < VariableLibrary.infoMap[s].length; i++) {\n        var value = VariableLibrary.infoMap[s][i]\n        if (match[value]) {\n          _this[s] = value\n        }\n      }\n    }\n  }),\n  // \n  getOS: monitor(function () {\n    var _this = this\n    MethodLibrary.matchInfoMap(_this)\n    return _this.os || 'Unknown'\n  }),\n  // \n  getOSVersion: monitor(function () {\n    var _this = this\n    var u = VariableLibrary.navigator.userAgent || ''\n    _this.osVersion = ''\n    _this.osMajor = ''\n    // \n    var osVersion = {\n      Windows: function () {\n        var v = u.replace(/^.*Windows NT ([\\d.]+);.*$/, '$1')\n        var oldWindowsVersionMap = {\n          6.4: '10',\n          6.3: '8.1',\n          6.2: '8',\n          6.1: '7',\n          '6.0': 'Vista',\n          5.2: 'XP',\n          5.1: 'XP',\n          '5.0': '2000'\n        }\n        return oldWindowsVersionMap[v] || v\n      },\n      Android: function () {\n        return u.replace(/^.*Android ([\\d.]+);.*$/, '$1')\n      },\n      iOS: function () {\n        return u.replace(/^.*OS ([\\d_]+) like.*$/, '$1').replace(/_/g, '.')\n      },\n      Debian: function () {\n        return u.replace(/^.*Debian\\/([\\d.]+).*$/, '$1')\n      },\n      'Windows Phone': function () {\n        return u.replace(/^.*Windows Phone( OS)? ([\\d.]+);.*$/, '$2')\n      },\n      'Mac OS': function () {\n        return u.replace(/^.*Mac OS X ([\\d_]+).*$/, '$1').replace(/_/g, '.')\n      },\n      WebOS: function () {\n        return u.replace(/^.*hpwOS\\/([\\d.]+);.*$/, '$1')\n      }\n    }\n    if (osVersion[_this.os]) {\n      _this.osVersion = osVersion[_this.os]()\n      if (_this.osVersion === u) {\n        _this.osVersion = ''\n      }\n    }\n    if (_this.osVersion) {\n      _this.osMajor =\n        _this.osVersion.split('.').length && _this.osVersion.split('.')[0]\n    }\n    return {\n      version: _this.osVersion,\n      osMajor: _this.osMajor\n    }\n  }),\n  // \n  getOrientationStatu: monitor(function () {\n    var orientationStatus = ''\n    var orientation = window.matchMedia('(orientation: portrait)')\n    if (orientation.matches) {\n      orientationStatus = ''\n    } else {\n      orientationStatus = ''\n    }\n    return orientationStatus\n  }),\n  // \n  getDeviceType: monitor(function () {\n    var _this = this\n    _this.device = 'PC'\n    MethodLibrary.matchInfoMap(_this)\n    return _this.device\n  }),\n  // \n  getNetwork: monitor(function () {\n    var connection =\n      window.navigator.connection ||\n      window.navigator.mozConnection ||\n      window.navigator.webkitConnection\n    var result = 'unknown'\n    var type = connection ? connection.type || connection.effectiveType : null\n    if (type && typeof type === 'string') {\n      switch (type) {\n        // possible type values\n        case 'bluetooth':\n        case 'cellular':\n          result = 'cellular'\n          break\n        case 'none':\n          result = 'none'\n          break\n        case 'ethernet':\n        case 'wifi':\n        case 'wimax':\n          result = 'wifi'\n          break\n        case 'other':\n        case 'unknown':\n          result = 'unknown'\n          break\n        // possible effectiveType values\n        case 'slow-2g':\n        case '2g':\n        case '3g':\n          result = 'cellular'\n          break\n        case '4g':\n          result = 'wifi'\n          break\n        default:\n          break\n      }\n    }\n    return result\n  }),\n  // \n  getLanguage: monitor(function () {\n    var _this = this\n    _this.language = (function () {\n      var language =\n        VariableLibrary.navigator.browserLanguage ||\n        VariableLibrary.navigator.language ||\n        ''\n      var arr = language.split('-')\n      if (arr[1]) {\n        arr[1] = arr[1].toUpperCase()\n      }\n      return arr.join('_')\n    })()\n    return _this.language\n  }),\n  getTimeZone: monitor(function () {\n    const timeZone = Intl.DateTimeFormat().resolvedOptions().timeZone\n    return timeZone\n  }),\n  // \n  getBrowserInfo: monitor(function () {\n    var _this = this\n    MethodLibrary.matchInfoMap(_this)\n\n    var u = VariableLibrary.navigator.userAgent || ''\n\n    var _mime = function (option, value) {\n      var mimeTypes = VariableLibrary.navigator.mimeTypes\n      for (var key in mimeTypes) {\n        if (mimeTypes[key][option] == value) {\n          return true\n        }\n      }\n      return false\n    }\n\n    var match = MethodLibrary.getMatchMap(u)\n\n    var is360 = false\n    if (typeof window !== 'undefined' && window.chrome) {\n      var chrome_version = u.replace(/^.*Chrome\\/([\\d]+).*$/, '$1')\n      if (chrome_version > 36 && window.showModalDialog) {\n        is360 = true\n      } else if (chrome_version > 45) {\n        is360 = _mime('type', 'application/vnd.chromium.remoting-viewer')\n      }\n    }\n    if (match['Baidu'] && match['Opera']) {\n      match['Baidu'] = false\n    }\n    if (match['Mobile']) {\n      match['Mobile'] = !(u.indexOf('iPad') > -1)\n    }\n    if (is360) {\n      if (_mime('type', 'application/gameplugin')) {\n        match['360SE'] = true\n      } else if (\n        VariableLibrary.navigator &&\n        VariableLibrary.navigator.connection &&\n        typeof VariableLibrary.navigator['connection']['saveData'] ==\n          'undefined'\n      ) {\n        match['360SE'] = true\n      } else {\n        match['360EE'] = true\n      }\n    }\n    if (match['IE'] || match['Edge']) {\n      var navigator_top = window.screenTop - window.screenY\n      switch (navigator_top) {\n        case 71: // ,\n          break\n        case 74: // ,\n          break\n        case 99: // ,\n          break\n        case 102: // ,\n          match['360EE'] = true\n          break\n        case 75: // ,\n          break\n        case 74: // ,\n          break\n        case 105: // ,\n          break\n        case 104: // ,\n          match['360SE'] = true\n          break\n        default:\n          break\n      }\n    }\n\n    var browerVersionMap = {\n      Safari: function () {\n        return u.replace(/^.*Version\\/([\\d.]+).*$/, '$1')\n      },\n      Chrome: function () {\n        return u\n          .replace(/^.*Chrome\\/([\\d.]+).*$/, '$1')\n          .replace(/^.*CriOS\\/([\\d.]+).*$/, '$1')\n      },\n      IE: function () {\n        return u\n          .replace(/^.*MSIE ([\\d.]+).*$/, '$1')\n          .replace(/^.*rv:([\\d.]+).*$/, '$1')\n      },\n      Edge: function () {\n        return u.replace(/^.*Edge?\\/([\\d.]+).*$/, '$1')\n      },\n      Firefox: function () {\n        return u\n          .replace(/^.*Firefox\\/([\\d.]+).*$/, '$1')\n          .replace(/^.*FxiOS\\/([\\d.]+).*$/, '$1')\n      },\n      'Firefox Focus': function () {\n        return u.replace(/^.*Focus\\/([\\d.]+).*$/, '$1')\n      },\n      Chromium: function () {\n        return u.replace(/^.*Chromium\\/([\\d.]+).*$/, '$1')\n      },\n      Opera: function () {\n        return u\n          .replace(/^.*Opera\\/([\\d.]+).*$/, '$1')\n          .replace(/^.*OPR\\/([\\d.]+).*$/, '$1')\n      },\n      Vivaldi: function () {\n        return u.replace(/^.*Vivaldi\\/([\\d.]+).*$/, '$1')\n      },\n      Yandex: function () {\n        return u.replace(/^.*YaBrowser\\/([\\d.]+).*$/, '$1')\n      },\n      Arora: function () {\n        return u.replace(/^.*Arora\\/([\\d.]+).*$/, '$1')\n      },\n      Lunascape: function () {\n        return u.replace(/^.*Lunascape[\\/\\s]([\\d.]+).*$/, '$1')\n      },\n      QupZilla: function () {\n        return u.replace(/^.*QupZilla[\\/\\s]([\\d.]+).*$/, '$1')\n      },\n      'Coc Coc': function () {\n        return u.replace(/^.*coc_coc_browser\\/([\\d.]+).*$/, '$1')\n      },\n      Kindle: function () {\n        return u.replace(/^.*Version\\/([\\d.]+).*$/, '$1')\n      },\n      Iceweasel: function () {\n        return u.replace(/^.*Iceweasel\\/([\\d.]+).*$/, '$1')\n      },\n      Konqueror: function () {\n        return u.replace(/^.*Konqueror\\/([\\d.]+).*$/, '$1')\n      },\n      Iceape: function () {\n        return u.replace(/^.*Iceape\\/([\\d.]+).*$/, '$1')\n      },\n      SeaMonkey: function () {\n        return u.replace(/^.*SeaMonkey\\/([\\d.]+).*$/, '$1')\n      },\n      Epiphany: function () {\n        return u.replace(/^.*Epiphany\\/([\\d.]+).*$/, '$1')\n      },\n      360: function () {\n        return u.replace(/^.*QihooBrowser\\/([\\d.]+).*$/, '$1')\n      },\n      '360SE': function () {\n        var hash = {\n          63: '10.0',\n          55: '9.1',\n          45: '8.1',\n          42: '8.0',\n          31: '7.0',\n          21: '6.3'\n        }\n        var chrome_version = u.replace(/^.*Chrome\\/([\\d]+).*$/, '$1')\n        return hash[chrome_version] || ''\n      },\n      '360EE': function () {\n        var hash = { 69: '11.0', 63: '9.5', 55: '9.0', 50: '8.7', 30: '7.5' }\n        var chrome_version = u.replace(/^.*Chrome\\/([\\d]+).*$/, '$1')\n        return hash[chrome_version] || ''\n      },\n      Maxthon: function () {\n        return u.replace(/^.*Maxthon\\/([\\d.]+).*$/, '$1')\n      },\n      QQBrowser: function () {\n        return u.replace(/^.*QQBrowser\\/([\\d.]+).*$/, '$1')\n      },\n      QQ: function () {\n        return u.replace(/^.*QQ\\/([\\d.]+).*$/, '$1')\n      },\n      Baidu: function () {\n        return u.replace(/^.*BIDUBrowser[\\s\\/]([\\d.]+).*$/, '$1')\n      },\n      UC: function () {\n        return u.replace(/^.*UC?Browser\\/([\\d.]+).*$/, '$1')\n      },\n      Sogou: function () {\n        return u\n          .replace(/^.*SE ([\\d.X]+).*$/, '$1')\n          .replace(/^.*SogouMobileBrowser\\/([\\d.]+).*$/, '$1')\n      },\n      LBBROWSER: function () {\n        var version = ''\n        if (u.indexOf('LieBaoFast') > -1) {\n          version = u.replace(/^.*LieBaoFast\\/([\\d.]+).*$/, '$1')\n        }\n        var hash = {\n          57: '6.5',\n          49: '6.0',\n          46: '5.9',\n          42: '5.3',\n          39: '5.2',\n          34: '5.0',\n          29: '4.5',\n          21: '4.0'\n        }\n        var chrome_version = u.replace(/^.*Chrome\\/([\\d]+).*$/, '$1')\n        return version || hash[chrome_version] || ''\n      },\n      '2345Explorer': function () {\n        return u.replace(/^.*2345Explorer\\/([\\d.]+).*$/, '$1')\n      },\n      TheWorld: function () {\n        return u.replace(/^.*TheWorld ([\\d.]+).*$/, '$1')\n      },\n      XiaoMi: function () {\n        return u.replace(/^.*MiuiBrowser\\/([\\d.]+).*$/, '$1')\n      },\n      Quark: function () {\n        return u.replace(/^.*Quark\\/([\\d.]+).*$/, '$1')\n      },\n      Qiyu: function () {\n        return u.replace(/^.*Qiyu\\/([\\d.]+).*$/, '$1')\n      },\n      Wechat: function () {\n        return u.replace(/^.*MicroMessenger\\/([\\d.]+).*$/, '$1')\n      },\n      WechatWork: function () {\n        return u.replace(/^.*wxwork\\/([\\d.]+).*$/, '$1')\n      },\n      Taobao: function () {\n        return u.replace(/^.*AliApp\\(TB\\/([\\d.]+).*$/, '$1')\n      },\n      Alipay: function () {\n        return u.replace(/^.*AliApp\\(AP\\/([\\d.]+).*$/, '$1')\n      },\n      Weibo: function () {\n        return u.replace(/^.*weibo__([\\d.]+).*$/, '$1')\n      },\n      Douban: function () {\n        return u.replace(/^.*com.douban.frodo\\/([\\d.]+).*$/, '$1')\n      },\n      Suning: function () {\n        return u.replace(/^.*SNEBUY-APP([\\d.]+).*$/, '$1')\n      },\n      iQiYi: function () {\n        return u.replace(/^.*IqiyiVersion\\/([\\d.]+).*$/, '$1')\n      }\n    }\n    _this.browserVersion = ''\n    _this.browserMajor = ''\n    if (browerVersionMap[_this.browser]) {\n      _this.browserVersion = browerVersionMap[_this.browser]()\n      if (_this.browserVersion == u) {\n        _this.browserVersion = ''\n      }\n    }\n    if (_this.browser == 'Chrome' && u.match(/\\S+Browser/)) {\n      _this.browser = u.match(/\\S+Browser/)[0]\n      _this.version = u.replace(/^.*Browser\\/([\\d.]+).*$/, '$1')\n    }\n    if (_this.browser == 'Edge') {\n      if (_this.version > '75') {\n        _this.engine = 'Blink'\n      } else {\n        _this.engine = 'EdgeHTML'\n      }\n    }\n    if (_this.browser == 'Chrome' && parseInt(_this.browserVersion) > 27) {\n      _this.engine = 'Blink'\n    } else if (\n      match['Chrome'] &&\n      _this.engine == 'WebKit' &&\n      parseInt(_this.browserVersion) > 27\n    ) {\n      _this.engine = 'Blink'\n    } else if (_this.browser == 'Opera' && parseInt(_this.version) > 12) {\n      _this.engine = 'Blink'\n    } else if (_this.browser == 'Yandex') {\n      _this.engine = 'Blink'\n    }\n    if (_this.browserVersion) {\n      _this.browserMajor =\n        _this.browserVersion.split('.').length &&\n        this.browserVersion.split('.')[0]\n    }\n    return {\n      browser: _this.browser,\n      browserVersion: _this.browserVersion,\n      engine: _this.engine,\n      browserMajor: _this.browserMajor\n    }\n  }),\n}\nvar _deviceInfo = {}\nif (typeof window !== 'undefined') {\n  _deviceInfo = {\n    os: MethodLibrary.getOS(),\n    osVersion: MethodLibrary.getOSVersion().version,\n    osVersionMajor: MethodLibrary.getOSVersion().osMajor,\n    browser: MethodLibrary.getBrowserInfo().browser,\n    browserVersion: MethodLibrary.getBrowserInfo().browserVersion,\n    browserVersionMajor: MethodLibrary.getBrowserInfo().browserMajor,\n    screenSize: window.screen.width + '*' + window.screen.height,\n    networkType: MethodLibrary.getNetwork(),\n    device: MethodLibrary.getDeviceType(),\n    timeZone: MethodLibrary.getTimeZone()\n  }\n}\nexport var deviceInfo = _deviceInfo\n","export var DOM_EVENT = {\n  BEFORE_UNLOAD: 'beforeunload',\n  CLICK: 'click',\n  DBL_CLICK: 'dblclick',\n  KEY_DOWN: 'keydown',\n  LOAD: 'load',\n  POP_STATE: 'popstate',\n  SCROLL: 'scroll',\n  TOUCH_START: 'touchstart',\n  TOUCH_END: 'touchend',\n  TOUCH_MOVE: 'touchmove',\n  VISIBILITY_CHANGE: 'visibilitychange',\n  PAGE_SHOW: 'pageshow',\n  FREEZE: 'freeze',\n  RESUME: 'resume',\n  DOM_CONTENT_LOADED: 'DOMContentLoaded',\n  POINTER_DOWN: 'pointerdown',\n  POINTER_UP: 'pointerup',\n  POINTER_CANCEL: 'pointercancel',\n  HASH_CHANGE: 'hashchange',\n  PAGE_HIDE: 'pagehide',\n  MOUSE_DOWN: 'mousedown',\n  MOUSE_UP: 'mouseup',\n  MOUSE_MOVE: 'mousemove',\n  FOCUS: 'focus',\n  BLUR: 'blur',\n  CONTEXT_MENU: 'contextmenu',\n  RESIZE: 'resize',\n  CHANGE: 'change',\n  INPUT: 'input',\n  PLAY: 'play',\n  PAUSE: 'pause',\n  SECURITY_POLICY_VIOLATION: 'securitypolicyviolation',\n  SELECTION_CHANGE: 'selectionchange',\n  STORAGE: 'storage'\n}\nexport var ResourceType = {\n  DOCUMENT: 'document',\n  XHR: 'xhr',\n  BEACON: 'beacon',\n  FETCH: 'fetch',\n  CSS: 'css',\n  JS: 'js',\n  IMAGE: 'image',\n  FONT: 'font',\n  MEDIA: 'media',\n  OTHER: 'other'\n}\n\nexport var ActionType = {\n  CLICK: 'click',\n  CUSTOM: 'custom'\n}\nexport var FrustrationType = {\n  RAGE_CLICK: 'rage_click',\n  ERROR_CLICK: 'error_click',\n  DEAD_CLICK: 'dead_click'\n}\nexport var RumEventType = {\n  ACTION: 'action',\n  ERROR: 'error',\n  LONG_TASK: 'long_task',\n  VIEW: 'view',\n  RESOURCE: 'resource',\n  LOGGER: 'logger'\n}\nexport var RumLongTaskEntryType = {\n  LONG_TASK: 'long-task',\n  LONG_ANIMATION_FRAME: 'long-animation-frame'\n}\nexport var ViewLoadingType = {\n  INITIAL_LOAD: 'initial_load',\n  ROUTE_CHANGE: 'route_change'\n}\nexport var RequestType = {\n  FETCH: ResourceType.FETCH,\n  XHR: ResourceType.XHR\n}\n\nexport var TraceType = {\n  DDTRACE: 'ddtrace',\n  ZIPKIN_MULTI_HEADER: 'zipkin',\n  ZIPKIN_SINGLE_HEADER: 'zipkin_single_header',\n  W3C_TRACEPARENT: 'w3c_traceparent',\n  W3C_TRACEPARENT_64: 'w3c_traceparent_64bit',\n  SKYWALKING_V3: 'skywalking_v3',\n  JAEGER: 'jaeger'\n}\nexport var ErrorHandling = {\n  HANDLED: 'handled',\n  UNHANDLED: 'unhandled'\n}\nexport var NonErrorPrefix = {\n  UNCAUGHT: 'Uncaught',\n  PROVIDED: 'Provided'\n}\n","import { noop, arrayFrom, startsWith } from './tools'\nimport { setTimeout } from './timer'\nimport { callMonitored } from './monitor'\n// import { createHandlingStack } from './errorTools'\nexport function instrumentMethod(targetPrototype, method, onPreCall, opts) {\n  var computeHandlingStack = false; // opts && opts.computeHandlingStack  //  fetch  xhr  true\n  var original = targetPrototype[method]\n\n  if (typeof original !== 'function') {\n    if (startsWith(method, 'on')) {\n      original = noop\n    } else {\n      return { stop: noop }\n    }\n  }\n\n  var stopped = false\n\n  var instrumentation = function () {\n    if (stopped) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-return, @typescript-eslint/no-unsafe-call\n      return original.apply(this, arguments)\n    }\n\n    var parameters = arrayFrom(arguments)\n\n    var postCallCallback\n\n    callMonitored(onPreCall, null, [\n      {\n        target: this,\n        parameters: parameters,\n        onPostCall: function (callback) {\n          postCallCallback = callback\n        },\n        handlingStack: undefined // computeHandlingStack ? createHandlingStack() : undefined\n      }\n    ])\n\n    var result = original.apply(this, parameters)\n\n    if (postCallCallback) {\n      callMonitored(postCallCallback, null, [result])\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n    return result\n  }\n\n  targetPrototype[method] = instrumentation\n\n  return {\n    stop: function () {\n      stopped = true\n      // If the instrumentation has been removed by a third party, keep the last one\n      if (targetPrototype[method] === instrumentation) {\n        targetPrototype[method] = original\n      }\n    }\n  }\n}\n\nexport function instrumentSetter(targetPrototype, property, after) {\n  var originalDescriptor = Object.getOwnPropertyDescriptor(\n    targetPrototype,\n    property\n  )\n  if (\n    !originalDescriptor ||\n    !originalDescriptor.set ||\n    !originalDescriptor.configurable\n  ) {\n    return { stop: noop }\n  }\n\n  var stoppedInstrumentation = noop\n  var instrumentation = function (target, value) {\n    // put hooked setter into event loop to avoid of set latency\n    setTimeout(function () {\n      if (instrumentation !== stoppedInstrumentation) {\n        after(target, value)\n      }\n    }, 0)\n  }\n\n  var instrumentationWrapper = function (value) {\n    originalDescriptor.set.call(this, value)\n    instrumentation(this, value)\n  }\n\n  Object.defineProperty(targetPrototype, property, {\n    set: instrumentationWrapper\n  })\n\n  return {\n    stop: function () {\n      if (\n        Object.getOwnPropertyDescriptor(targetPrototype, property) &&\n        Object.getOwnPropertyDescriptor(targetPrototype, property).set ===\n          instrumentationWrapper\n      ) {\n        Object.defineProperty(targetPrototype, property, originalDescriptor)\n      }\n      instrumentation = stoppedInstrumentation\n    }\n  }\n}\n","import { noop } from '../tools'\n\n/**\n * Custom implementation of JSON.stringify that ignores some toJSON methods. We need to do that\n * because some sites badly override toJSON on certain objects. Removing all toJSON methods from\n * nested values would be too costly, so we just detach them from the root value, and native classes\n * used to build JSON values (Array and Object).\n *\n * Note: this still assumes that JSON.stringify is correct.\n */\nexport function jsonStringify(value, replacer, space) {\n  if (typeof value !== 'object' || value === null) {\n    return JSON.stringify(value)\n  }\n\n  // Note: The order matter here. We need to detach toJSON methods on parent classes before their\n  // subclasses.\n  var restoreObjectPrototypeToJson = detachToJsonMethod(Object.prototype)\n  var restoreArrayPrototypeToJson = detachToJsonMethod(Array.prototype)\n  var restoreValuePrototypeToJson = detachToJsonMethod(\n    Object.getPrototypeOf(value)\n  )\n  var restoreValueToJson = detachToJsonMethod(value)\n\n  try {\n    return JSON.stringify(value, replacer, space)\n  } catch {\n    return '<error: unable to serialize object>'\n  } finally {\n    restoreObjectPrototypeToJson()\n    restoreArrayPrototypeToJson()\n    restoreValuePrototypeToJson()\n    restoreValueToJson()\n  }\n}\n\nexport function detachToJsonMethod(value) {\n  const object = value\n  const objectToJson = object.toJSON\n  if (objectToJson) {\n    delete object.toJSON\n    return function () {\n      object.toJSON = objectToJson\n    }\n  }\n  return noop\n}\n","import { each } from '../helper/tools'\nvar UNKNOWN_FUNCTION = '?'\n\n/**\n * Computes a stack trace for an exception.\n */\nexport function computeStackTrace(ex) {\n  var stack = []\n\n  var stackProperty = tryToGetString(ex, 'stack')\n  var exString = String(ex)\n  if (stackProperty && stackProperty.startsWith(exString)) {\n    stackProperty = stackProperty.slice(exString.length)\n  }\n  if (stackProperty) {\n    each(stackProperty.split('\\n'), function (line) {\n      var stackFrame =\n        parseChromeLine(line) ||\n        parseChromeAnonymousLine(line) ||\n        parseWinLine(line) ||\n        parseGeckoLine(line)\n      if (stackFrame) {\n        if (!stackFrame.func && stackFrame.line) {\n          stackFrame.func = UNKNOWN_FUNCTION\n        }\n        stack.push(stackFrame)\n      }\n    })\n  }\n\n  return {\n    message: tryToGetString(ex, 'message'),\n    name: tryToGetString(ex, 'name'),\n    stack: stack\n  }\n}\nvar fileUrl =\n  '((?:file|https?|blob|chrome-extension|electron|native|eval|webpack|<anonymous>|\\\\w+\\\\.|\\\\/).*?)'\n\nvar filePosition = '(?::(\\\\d+))'\nvar CHROME_LINE_RE = new RegExp(\n  '^\\\\s*at (.*?) ?\\\\(' +\n    fileUrl +\n    filePosition +\n    '?' +\n    filePosition +\n    '?\\\\)?\\\\s*$',\n  'i'\n)\nvar CHROME_EVAL_RE = new RegExp(\n  '\\\\((\\\\S*)' + filePosition + filePosition + '\\\\)'\n)\n\nfunction parseChromeLine(line) {\n  var parts = CHROME_LINE_RE.exec(line)\n\n  if (!parts) {\n    return\n  }\n\n  var isNative = parts[2] && parts[2].indexOf('native') === 0 // start of line\n  var isEval = parts[2] && parts[2].indexOf('eval') === 0 // start of line\n  var submatch = CHROME_EVAL_RE.exec(parts[2])\n\n  if (isEval && submatch) {\n    // throw out eval line/column and use top-most line/column number\n    parts[2] = submatch[1] // url\n    parts[3] = submatch[2] // line\n    parts[4] = submatch[3] // column\n  }\n\n  return {\n    args: isNative ? [parts[2]] : [],\n    column: parts[4] ? +parts[4] : undefined,\n    func: parts[1] || UNKNOWN_FUNCTION,\n    line: parts[3] ? +parts[3] : undefined,\n    url: !isNative ? parts[2] : undefined\n  }\n}\n\nvar CHROME_ANONYMOUS_FUNCTION_RE = new RegExp(\n  '^\\\\s*at ?' + fileUrl + filePosition + '?' + filePosition + '??\\\\s*$',\n  'i'\n)\n\nfunction parseChromeAnonymousLine(line) {\n  var parts = CHROME_ANONYMOUS_FUNCTION_RE.exec(line)\n\n  if (!parts) {\n    return\n  }\n\n  return {\n    args: [],\n    column: parts[3] ? +parts[3] : undefined,\n    func: UNKNOWN_FUNCTION,\n    line: parts[2] ? +parts[2] : undefined,\n    url: parts[1]\n  }\n}\n\nvar WINJS_LINE_RE =\n  /^\\s*at (?:((?:\\[object object\\])?.+) )?\\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i\n\nfunction parseWinLine(line) {\n  var parts = WINJS_LINE_RE.exec(line)\n  if (!parts) {\n    return\n  }\n\n  return {\n    args: [],\n    column: parts[4] ? +parts[4] : undefined,\n    func: parts[1] || UNKNOWN_FUNCTION,\n    line: +parts[3],\n    url: parts[2]\n  }\n}\n\nvar GECKO_LINE_RE =\n  /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\\[native).*?|[^@]*bundle|\\[wasm code\\])(?::(\\d+))?(?::(\\d+))?\\s*$/i\nvar GECKO_EVAL_RE = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i\n\nfunction parseGeckoLine(line) {\n  var parts = GECKO_LINE_RE.exec(line)\n  if (!parts) {\n    return\n  }\n\n  var isEval = parts[3] && parts[3].indexOf(' > eval') > -1\n  var submatch = GECKO_EVAL_RE.exec(parts[3])\n\n  if (isEval && submatch) {\n    // throw out eval line/column and use top-most line number\n    parts[3] = submatch[1]\n    parts[4] = submatch[2]\n    parts[5] = undefined // no column when eval\n  }\n\n  return {\n    args: parts[2] ? parts[2].split(',') : [],\n    column: parts[5] ? +parts[5] : undefined,\n    func: parts[1] || UNKNOWN_FUNCTION,\n    line: parts[4] ? +parts[4] : undefined,\n    url: parts[3]\n  }\n}\n\nfunction tryToGetString(candidate, property) {\n  if (typeof candidate !== 'object' || !candidate || !(property in candidate)) {\n    return undefined\n  }\n  var value = candidate[property]\n  return typeof value === 'string' ? value : undefined\n}\n","import { instrumentMethod } from '../helper/instrumentMethod'\nimport { isNullUndefinedDefaultValue } from '../helper/tools'\nimport { computeStackTrace } from './computeStackTrace'\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Error_types\nvar ERROR_TYPES_RE =\n  /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\\s\\S]*)$/\n/**\n * Cross-browser collection of unhandled errors\n *\n * Supports:\n * - Firefox: full stack trace with line numbers, plus column number\n * on top frame; column number is not guaranteed\n * - Opera: full stack trace with line and column numbers\n * - Chrome: full stack trace with line and column numbers\n * - Safari: line and column number for the top frame only; some frames\n * may be missing, and column number is not guaranteed\n * - IE: line and column number for the top frame only; some frames\n * may be missing, and column number is not guaranteed\n *\n * In theory, TraceKit should work on all of the following versions:\n * - IE5.5+ (only 8.0 tested)\n * - Firefox 0.9+ (only 3.5+ tested)\n * - Opera 7+ (only 10.50 tested; versions 9 and earlier may require\n * Exceptions Have Stacktrace to be enabled in opera:config)\n * - Safari 3+ (only 4+ tested)\n * - Chrome 1+ (only 5+ tested)\n * - Konqueror 3.5+ (untested)\n *\n * Tries to catch all unhandled errors and report them to the\n * callback.\n *\n * Callbacks receive a StackTrace object as described in the\n * computeStackTrace docs.\n *\n * @memberof TraceKit\n * @namespace\n */\n\nexport function startUnhandledErrorCollection(callback) {\n  var _instrumentOnError = instrumentOnError(callback)\n  var _instrumentUnhandledRejection = instrumentUnhandledRejection(callback)\n  return {\n    stop: function () {\n      _instrumentOnError.stop()\n      _instrumentUnhandledRejection.stop()\n    }\n  }\n}\n\n/**\n * Install a global onerror handler\n */\nfunction instrumentOnError(callback) {\n  return instrumentMethod(window, 'onerror', function (params) {\n    var parameters = params.parameters\n    var messageObj = parameters[0]\n    var url = parameters[1]\n    var line = parameters[2]\n    var column = parameters[3]\n    var errorObj = parameters[4]\n    var stackTrace\n    if (errorObj instanceof Error) {\n      stackTrace = computeStackTrace(errorObj)\n    } else {\n      var location = {\n        url: url,\n        column: column,\n        line: line\n      }\n      var parse = tryToParseMessage(messageObj)\n\n      stackTrace = {\n        name: parse.name,\n        message: parse.message,\n        stack: [location]\n      }\n    }\n    callback(stackTrace, isNullUndefinedDefaultValue(errorObj, messageObj))\n  })\n}\nfunction tryToParseMessage(messageObj) {\n  let name\n  let message\n  if ({}.toString.call(messageObj) === '[object String]') {\n    var groups = ERROR_TYPES_RE.exec(messageObj)\n    if (groups) {\n      name = groups[1]\n      message = groups[2]\n    }\n  }\n  return { name: name, message: message }\n}\n/**\n * Install a global onunhandledrejection handler\n */\nfunction instrumentUnhandledRejection(callback) {\n  return instrumentMethod(window, 'onunhandledrejection', function (params) {\n    var parameters = params.parameters\n    var e = parameters[0]\n    var reason = e.reason || 'Empty reason'\n    var stack = computeStackTrace(reason)\n    callback(stack, reason)\n  })\n}\n","export { computeStackTrace } from './computeStackTrace'\nexport { startUnhandledErrorCollection } from './tracekit'\n","export var ONE_KIBI_BYTE = 1024\nexport var ONE_MEBI_BYTE = 1024 * ONE_KIBI_BYTE\n// eslint-disable-next-line no-control-regex\nvar HAS_MULTI_BYTES_CHARACTERS = /[^\\u0000-\\u007F]/\n\nexport function computeBytesCount(candidate) {\n  // Accurate bytes count computations can degrade performances when there is a lot of events to process\n  if (!HAS_MULTI_BYTES_CHARACTERS.test(candidate)) {\n    return candidate.length\n  }\n\n  if (window.TextEncoder !== undefined) {\n    return new TextEncoder().encode(candidate).length\n  }\n\n  return new Blob([candidate]).size\n}\nexport function concatBuffers(buffers) {\n  var length = buffers.reduce(function (total, buffer) {\n    return total + buffer.length\n  }, 0)\n  var result = new Uint8Array(length)\n  var offset = 0\n  for (var _i = 0, buffers_1 = buffers; _i < buffers_1.length; _i++) {\n    var buffer = buffers_1[_i]\n    result.set(buffer, offset)\n    offset += buffer.length\n  }\n  return result\n}\n","import { display } from './display'\nimport { ONE_KIBI_BYTE } from './byteUtils'\nimport { detachToJsonMethod } from './serialisation/jsonStringify'\n\n// The maximum size of a single event is 256KiB. By default, we ensure that user-provided data\n// going through sanitize fits inside our events, while leaving room for other contexts, metadata, ...\nvar SANITIZE_DEFAULT_MAX_CHARACTER_COUNT = 220 * ONE_KIBI_BYTE\n\n// Symbol for the root element of the JSONPath used for visited objects\nvar JSON_PATH_ROOT_ELEMENT = '$'\n\n// When serializing (using JSON.stringify) a key of an object, { key: 42 } gets wrapped in quotes as \"key\".\n// With the separator (:), we need to add 3 characters to the count.\nvar KEY_DECORATION_LENGTH = 3\n\n/**\n * Ensures user-provided data is 'safe' for the SDK\n * - Deep clones data\n * - Removes cyclic references\n * - Transforms unserializable types to a string representation\n *\n * LIMITATIONS:\n * - Size is in characters, not byte count (may differ according to character encoding)\n * - Size does not take into account indentation that can be applied to JSON.stringify\n * - Non-numerical properties of Arrays are ignored. Same behavior as JSON.stringify\n *\n * @param source              User-provided data meant to be serialized using JSON.stringify\n * @param maxCharacterCount   Maximum number of characters allowed in serialized form\n */\n\nexport function sanitize(source, maxCharacterCount) {\n  if (maxCharacterCount === undefined) {\n    maxCharacterCount = SANITIZE_DEFAULT_MAX_CHARACTER_COUNT\n  }\n  // Unbind any toJSON function we may have on [] or {} prototypes\n  var restoreObjectPrototypeToJson = detachToJsonMethod(Object.prototype)\n  var restoreArrayPrototypeToJson = detachToJsonMethod(Array.prototype)\n\n  // Initial call to sanitizeProcessor - will populate containerQueue if source is an Array or a plain Object\n  var containerQueue = []\n  var visitedObjectsWithPath = new WeakMap()\n  var sanitizedData = sanitizeProcessor(\n    source,\n    JSON_PATH_ROOT_ELEMENT,\n    undefined,\n    containerQueue,\n    visitedObjectsWithPath\n  )\n  var accumulatedCharacterCount =\n    (JSON.stringify(sanitizedData) && JSON.stringify(sanitizedData).length) || 0\n  if (accumulatedCharacterCount > maxCharacterCount) {\n    warnOverCharacterLimit(maxCharacterCount, 'discarded', source)\n    return undefined\n  }\n\n  while (\n    containerQueue.length > 0 &&\n    accumulatedCharacterCount < maxCharacterCount\n  ) {\n    var containerToProcess = containerQueue.shift()\n    var separatorLength = 0 // 0 for the first element, 1 for subsequent elements\n\n    // Arrays and Objects have to be handled distinctly to ensure\n    // we do not pick up non-numerical properties from Arrays\n    if (Array.isArray(containerToProcess.source)) {\n      for (var key = 0; key < containerToProcess.source.length; key++) {\n        var targetData = sanitizeProcessor(\n          containerToProcess.source[key],\n          containerToProcess.path,\n          key,\n          containerQueue,\n          visitedObjectsWithPath\n        )\n\n        if (targetData !== undefined) {\n          accumulatedCharacterCount += JSON.stringify(targetData).length\n        } else {\n          // When an element of an Array (targetData) is undefined, it is serialized as null:\n          // JSON.stringify([undefined]) => '[null]' - This accounts for 4 characters\n          accumulatedCharacterCount += 4\n        }\n        accumulatedCharacterCount += separatorLength\n        separatorLength = 1\n        if (accumulatedCharacterCount > maxCharacterCount) {\n          warnOverCharacterLimit(maxCharacterCount, 'truncated', source)\n          break\n        }\n        containerToProcess.target[key] = targetData\n      }\n    } else {\n      for (var key in containerToProcess.source) {\n        if (\n          Object.prototype.hasOwnProperty.call(containerToProcess.source, key)\n        ) {\n          var targetData = sanitizeProcessor(\n            containerToProcess.source[key],\n            containerToProcess.path,\n            key,\n            containerQueue,\n            visitedObjectsWithPath\n          )\n          // When a property of an object has an undefined value, it will be dropped during serialization:\n          // JSON.stringify({a:undefined}) => '{}'\n          if (targetData !== undefined) {\n            accumulatedCharacterCount +=\n              JSON.stringify(targetData).length +\n              separatorLength +\n              key.length +\n              KEY_DECORATION_LENGTH\n            separatorLength = 1\n          }\n          if (accumulatedCharacterCount > maxCharacterCount) {\n            warnOverCharacterLimit(maxCharacterCount, 'truncated', source)\n            break\n          }\n          containerToProcess.target[key] = targetData\n        }\n      }\n    }\n  }\n\n  // Rebind detached toJSON functions\n  restoreObjectPrototypeToJson()\n  restoreArrayPrototypeToJson()\n\n  return sanitizedData\n}\n\n/**\n * Internal function to factorize the process common to the\n * initial call to sanitize, and iterations for Arrays and Objects\n *\n */\nfunction sanitizeProcessor(\n  source,\n  parentPath,\n  key,\n  queue,\n  visitedObjectsWithPath\n) {\n  // Start by handling toJSON, as we want to sanitize its output\n  var sourceToSanitize = tryToApplyToJSON(source)\n\n  if (!sourceToSanitize || typeof sourceToSanitize !== 'object') {\n    return sanitizePrimitivesAndFunctions(sourceToSanitize)\n  }\n\n  var sanitizedSource = sanitizeObjects(sourceToSanitize)\n  if (\n    sanitizedSource !== '[Object]' &&\n    sanitizedSource !== '[Array]' &&\n    sanitizedSource !== '[Error]'\n  ) {\n    return sanitizedSource\n  }\n\n  // Handle potential cyclic references\n  // We need to use source as sourceToSanitize could be a reference to a new object\n  // At this stage, we know the source is an object type\n  var sourceAsObject = source\n  if (visitedObjectsWithPath.has(sourceAsObject)) {\n    return (\n      '[Reference seen at ' + visitedObjectsWithPath.get(sourceAsObject) + ']'\n    )\n  }\n\n  // Add processed source to queue\n  var currentPath = key !== undefined ? parentPath + '.' + key : parentPath\n  var target = Array.isArray(sourceToSanitize) ? [] : {}\n  visitedObjectsWithPath.set(sourceAsObject, currentPath)\n  queue.push({ source: sourceToSanitize, target, path: currentPath })\n\n  return target\n}\n\n/**\n * Handles sanitization of simple, non-object types\n *\n */\nfunction sanitizePrimitivesAndFunctions(value) {\n  // BigInt cannot be serialized by JSON.stringify(), convert it to a string representation\n  if (typeof value === 'bigint') {\n    return '[BigInt] ' + value.toString()\n  }\n  // Functions cannot be serialized by JSON.stringify(). Moreover, if a faulty toJSON is present, it needs to be converted\n  // so it won't prevent stringify from serializing later\n  if (typeof value === 'function') {\n    return '[Function] ' + value.name || 'unknown'\n  }\n  // JSON.stringify() does not serialize symbols.\n  if (typeof value === 'symbol') {\n    // symbol.description is part of ES2019+\n    return '[Symbol] ' + value.description || value.toString()\n  }\n\n  return value\n}\n\n/**\n * Handles sanitization of object types\n *\n * LIMITATIONS\n * - If a class defines a toStringTag Symbol, it will fall in the catch-all method and prevent enumeration of properties.\n * To avoid this, a toJSON method can be defined.\n * - IE11 does not return a distinct type for objects such as Map, WeakMap, ... These objects will pass through and their\n * properties enumerated if any.\n *\n */\nfunction sanitizeObjects(value) {\n  try {\n    // Handle events - Keep a simple implementation to avoid breaking changes\n    if (value instanceof Event) {\n      return sanitizeEvent(value)\n    }\n    if (value instanceof RegExp) {\n      return `[RegExp] ${value.toString()}`\n    }\n    // Handle all remaining object types in a generic way\n    var result = Object.prototype.toString.call(value)\n    var match = result.match(/\\[object (.*)\\]/)\n    if (match && match[1]) {\n      return '[' + match[1] + ']'\n    }\n  } catch {\n    // If the previous serialization attempts failed, and we cannot convert using\n    // Object.prototype.toString, declare the value unserializable\n  }\n  return '[Unserializable]'\n}\nfunction sanitizeEvent(event) {\n  return {\n    type: event.type,\n    isTrusted: event.isTrusted,\n    currentTarget: event.currentTarget\n      ? sanitizeObjects(event.currentTarget)\n      : null,\n    target: event.target ? sanitizeObjects(event.target) : null\n  }\n}\n/**\n * Checks if a toJSON function exists and tries to execute it\n *\n */\nfunction tryToApplyToJSON(value) {\n  var object = value\n  if (object && typeof object.toJSON === 'function') {\n    try {\n      return object.toJSON()\n    } catch {\n      // If toJSON fails, we continue by trying to serialize the value manually\n    }\n  }\n\n  return value\n}\n\n/**\n * Helper function to display the warning when the accumulated character count is over the limit\n */\nfunction warnOverCharacterLimit(maxCharacterCount, changeType, source) {\n  display.warn(\n    'The data provided has been ' +\n      changeType +\n      ' as it is over the limit of ' +\n      maxCharacterCount +\n      ' characters:',\n    source\n  )\n}\n","import { each, noop } from './tools'\nimport { jsonStringify } from '../helper/serialisation/jsonStringify'\nimport { computeStackTrace } from '../tracekit'\nimport { callMonitored } from '../helper/monitor'\nimport { sanitize } from '../helper/sanitize'\nexport var NO_ERROR_STACK_PRESENT_MESSAGE =\n  'No stack, consider using an instance of Error'\nexport var ErrorSource = {\n  AGENT: 'agent',\n  CONSOLE: 'console',\n  NETWORK: 'network',\n  SOURCE: 'source',\n  LOGGER: 'logger',\n  CUSTOM: 'custom'\n}\n\nexport function computeRawError(data) {\n  var stackTrace = data.stackTrace\n  var originalError = data.originalError\n  var handlingStack = data.handlingStack\n  var startClocks = data.startClocks\n  var nonErrorPrefix = data.nonErrorPrefix\n  var source = data.source\n  var handling = data.handling\n  var isErrorInstance = originalError instanceof Error\n  var message = computeMessage(\n    stackTrace,\n    isErrorInstance,\n    nonErrorPrefix,\n    originalError\n  )\n  var stack = hasUsableStack(isErrorInstance, stackTrace)\n    ? toStackTraceString(stackTrace)\n    : NO_ERROR_STACK_PRESENT_MESSAGE\n  var causes = isErrorInstance\n    ? flattenErrorCauses(originalError, source)\n    : undefined\n  var type = stackTrace && stackTrace.name\n\n  return {\n    startClocks: startClocks,\n    source: source,\n    handling: handling,\n    originalError: originalError,\n    message: message,\n    stack: stack,\n    handlingStack: handlingStack,\n    type: type,\n    causes: causes\n  }\n}\nfunction computeMessage(\n  stackTrace,\n  isErrorInstance,\n  nonErrorPrefix,\n  originalError\n) {\n  // Favor stackTrace message only if tracekit has really been able to extract something meaningful (message + name)\n  // TODO rework tracekit integration to avoid scattering error building logic\n  return stackTrace && stackTrace.message && stackTrace && stackTrace.name\n    ? stackTrace.message\n    : !isErrorInstance\n    ? nonErrorPrefix + ' ' + jsonStringify(sanitize(originalError))\n    : 'Empty message'\n}\nfunction hasUsableStack(isErrorInstance, stackTrace) {\n  if (stackTrace === undefined) {\n    return false\n  }\n  if (isErrorInstance) {\n    return true\n  }\n  // handle cases where tracekit return stack = [] or stack = [{url: undefined, line: undefined, column: undefined}]\n  // TODO rework tracekit integration to avoid generating those unusable stack\n  return (\n    stackTrace.stack.length > 0 &&\n    (stackTrace.stack.length > 1 || stackTrace.stack[0].url !== undefined)\n  )\n}\n\nexport function formatUnknownError(\n  stackTrace,\n  errorObject,\n  nonErrorPrefix,\n  handlingStack\n) {\n  if (\n    !stackTrace ||\n    (stackTrace.message === undefined && !(errorObject instanceof Error))\n  ) {\n    return {\n      message: nonErrorPrefix + '' + jsonStringify(errorObject),\n      stack: 'No stack, consider using an instance of Error',\n      handlingStack: handlingStack,\n      type: stackTrace && stackTrace.name\n    }\n  }\n  return {\n    message: stackTrace.message || 'Empty message',\n    stack: toStackTraceString(stackTrace),\n    handlingStack: handlingStack,\n    type: stackTrace.name\n  }\n}\n/**\n Creates a stacktrace without SDK internal frames.\n \n Constraints:\n - Has to be called at the utmost position of the call stack.\n - No internal monitoring should encapsulate the function, that is why we need to use callMonitored inside of it.\n */\nexport function createHandlingStack() {\n  /**\n   * Skip the two internal frames:\n   * - SDK API (console.error, ...)\n   * - this function\n   * in order to keep only the user calls\n   */\n  var internalFramesToSkip = 2\n  var error = new Error()\n  var formattedStack\n\n  // IE needs to throw the error to fill in the stack trace\n  if (!error.stack) {\n    try {\n      throw error\n    } catch (e) {\n      noop()\n    }\n  }\n  callMonitored(function () {\n    var stackTrace = computeStackTrace(error)\n    stackTrace.stack = stackTrace.stack.slice(internalFramesToSkip)\n    formattedStack = toStackTraceString(stackTrace)\n  })\n\n  return formattedStack\n}\nexport function toStackTraceString(stack) {\n  var result = formatErrorMessage(stack)\n  each(stack.stack, function (frame) {\n    var func = frame.func === '?' ? '<anonymous>' : frame.func\n    var args =\n      frame.args && frame.args.length > 0\n        ? '(' + frame.args.join(', ') + ')'\n        : ''\n    var line = frame.line ? ':' + frame.line : ''\n    var column = frame.line && frame.column ? ':' + frame.column : ''\n    result += '\\n  at ' + func + args + ' @ ' + frame.url + line + column\n  })\n  return result\n}\nexport function formatErrorMessage(stack) {\n  return (stack.name || 'Error') + ': ' + stack.message\n}\nexport function getFileFromStackTraceString(stack) {\n  var execResult = /@ (.+)/.exec(stack)\n  return execResult && execResult[1]\n}\nexport function flattenErrorCauses(error, parentSource) {\n  var currentError = error\n  var causes = []\n  while (\n    currentError &&\n    currentError.cause instanceof Error &&\n    causes.length < 10\n  ) {\n    var stackTrace = computeStackTrace(currentError.cause)\n    causes.push({\n      message: currentError.cause.message,\n      source: parentSource,\n      type: stackTrace && stackTrace.name,\n      stack: stackTrace && toStackTraceString(stackTrace)\n    })\n    currentError = currentError.cause\n  }\n  return causes.length ? causes : undefined\n}\n","import { ErrorSource, computeRawError } from '../helper/errorTools'\nimport { clocksNow } from '../helper/tools'\nimport { ErrorHandling, NonErrorPrefix } from '../helper/enums'\nimport { startUnhandledErrorCollection } from '../tracekit'\n\nexport function trackRuntimeError(errorObservable) {\n  return startUnhandledErrorCollection(function (stackTrace, originalError) {\n    errorObservable.notify(\n      computeRawError({\n        stackTrace: stackTrace,\n        originalError: originalError,\n        startClocks: clocksNow(),\n        nonErrorPrefix: NonErrorPrefix.UNCAUGHT,\n        source: ErrorSource.SOURCE,\n        handling: ErrorHandling.UNHANDLED\n      })\n    )\n  })\n}\n","import { each, filter } from './tools'\nexport var LifeCycleEventType = {\n  AUTO_ACTION_COMPLETED: 'AUTO_ACTION_COMPLETED',\n  BEFORE_VIEW_CREATED: 'BEFORE_VIEW_CREATED',\n  VIEW_CREATED: 'VIEW_CREATED',\n  VIEW_UPDATED: 'VIEW_UPDATED',\n  BEFORE_VIEW_UPDATED: 'BEFORE_VIEW_UPDATED',\n  VIEW_ENDED: 'VIEW_ENDED',\n  AFTER_VIEW_ENDED: 'AFTER_VIEW_ENDED',\n  SESSION_RENEWED: 'SESSION_RENEWED',\n  SESSION_EXPIRED: 'SESSION_EXPIRED',\n  PAGE_EXITED: 'PAGE_EXITED',\n  REQUEST_STARTED: 'REQUEST_STARTED',\n  REQUEST_COMPLETED: 'REQUEST_COMPLETED',\n  RAW_RUM_EVENT_COLLECTED: 'RAW_RUM_EVENT_COLLECTED',\n  RUM_EVENT_COLLECTED: 'RUM_EVENT_COLLECTED',\n  RAW_ERROR_COLLECTED: 'RAW_ERROR_COLLECTED',\n  RAW_LOG_COLLECTED: 'RAW_LOG_COLLECTED',\n  LOG_COLLECTED: 'LOG_COLLECTED'\n}\nexport function LifeCycle() {\n  this.callbacks = {}\n}\nLifeCycle.prototype = {\n  notify: function (eventType, data) {\n    var eventCallbacks = this.callbacks[eventType]\n    if (eventCallbacks) {\n      each(eventCallbacks, function (callback) {\n        callback(data)\n      })\n    }\n  },\n  subscribe: function (eventType, callback) {\n    if (!this.callbacks[eventType]) {\n      this.callbacks[eventType] = []\n    }\n    this.callbacks[eventType].push(callback)\n    var _this = this\n    return {\n      unsubscribe: function () {\n        _this.callbacks[eventType] = filter(\n          _this.callbacks[eventType],\n          function (other) {\n            return other !== callback\n          }\n        )\n      }\n    }\n  }\n}\n","function _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\nexport { _arrayWithHoles as default };","function _iterableToArray(r) {\n  if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r);\n}\nexport { _iterableToArray as default };","function _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nexport { _arrayLikeToArray as default };","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? arrayLikeToArray(r, a) : void 0;\n  }\n}\nexport { _unsupportedIterableToArray as default };","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nexport { _nonIterableRest as default };","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nfunction _toArray(r) {\n  return arrayWithHoles(r) || iterableToArray(r) || unsupportedIterableToArray(r) || nonIterableRest();\n}\nexport { _toArray as default };","function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nexport { _iterableToArrayLimit as default };","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nfunction _slicedToArray(r, e) {\n  return arrayWithHoles(r) || iterableToArrayLimit(r, e) || unsupportedIterableToArray(r, e) || nonIterableRest();\n}\nexport { _slicedToArray as default };","import { objectEntries, getType, deepClone } from './tools'\nimport { sanitize } from './sanitize'\n\nexport function limitModification(object, modifiableFieldPaths, modifier) {\n  const clone = deepClone(object)\n  const result = modifier(clone)\n\n  objectEntries(modifiableFieldPaths).forEach(([fieldPath, fieldType]) =>\n    // Traverse both object and clone simultaneously up to the path and apply the modification from the clone to the original object when the type is valid\n    setValueAtPath(object, clone, fieldPath.split(/\\.|(?=\\[\\])/), fieldType)\n  )\n\n  return result\n}\n\nfunction setValueAtPath(object, clone, pathSegments, fieldType) {\n  const [field, ...restPathSegments] = pathSegments\n\n  if (field === '[]') {\n    if (Array.isArray(object) && Array.isArray(clone)) {\n      object.forEach((item, i) =>\n        setValueAtPath(item, clone[i], restPathSegments, fieldType)\n      )\n    }\n\n    return\n  }\n\n  if (!isValidObject(object) || !isValidObject(clone)) {\n    return\n  }\n\n  if (restPathSegments.length > 0) {\n    return setValueAtPath(\n      object[field],\n      clone[field],\n      restPathSegments,\n      fieldType\n    )\n  }\n\n  setNestedValue(object, field, clone[field], fieldType)\n}\n\nfunction setNestedValue(object, field, value, fieldType) {\n  const newType = getType(value)\n\n  if (newType === fieldType) {\n    object[field] = sanitize(value)\n  } else if (\n    fieldType === 'object' &&\n    (newType === 'undefined' || newType === 'null')\n  ) {\n    object[field] = {}\n  }\n}\n\nfunction isValidObject(object) {\n  return getType(object) === 'object'\n}\n","import { ErrorSource } from './errorTools'\nimport { clocksNow, ONE_MINUTE } from './tools'\nimport { setTimeout } from './timer'\nexport function createEventRateLimiter(eventType, limit, onLimitReached) {\n  var eventCount = 0\n  var allowNextEvent = false\n  return {\n    isLimitReached: function () {\n      if (eventCount === 0) {\n        setTimeout(function () {\n          eventCount = 0\n        }, ONE_MINUTE)\n      }\n      eventCount += 1\n      if (eventCount <= limit || allowNextEvent) {\n        allowNextEvent = false\n        return false\n      }\n      if (eventCount === limit + 1) {\n        allowNextEvent = true\n        try {\n          onLimitReached({\n            message:\n              'Reached max number of ' + eventType + 's by minute: ' + limit,\n            source: ErrorSource.AGENT,\n            startClocks: clocksNow()\n          })\n        } finally {\n          allowNextEvent = false\n        }\n      }\n      return true\n    }\n  }\n}\n","import { each, filter, map } from './tools'\nvar _Observable = function (onFirstSubscribe) {\n  this.observers = []\n  this.onLastUnsubscribe = undefined\n  this.onFirstSubscribe = onFirstSubscribe\n}\n_Observable.prototype = {\n  subscribe: function (f) {\n    this.observers.push(f)\n    if (this.observers.length === 1 && this.onFirstSubscribe) {\n      this.onLastUnsubscribe = this.onFirstSubscribe(this) || undefined\n    }\n    var _this = this\n    return {\n      unsubscribe: function () {\n        _this.observers = filter(_this.observers, function (other) {\n          return f !== other\n        })\n        if (!_this.observers.length && _this.onLastUnsubscribe) {\n          _this.onLastUnsubscribe()\n        }\n      }\n    }\n  },\n  notify: function (data) {\n    each(this.observers, function (observer) {\n      observer(data)\n    })\n  }\n}\nexport var Observable = _Observable\n\nexport function mergeObservables() {\n  var observables = [].slice.call(arguments)\n  return new Observable(function (globalObservable) {\n    var subscriptions = map(observables, function (observable) {\n      return observable.subscribe(function (data) {\n        return globalObservable.notify(data)\n      })\n    })\n    return function () {\n      return each(subscriptions, function (subscription) {\n        return subscription.unsubscribe()\n      })\n    }\n  })\n}\n","import { getLinkElementOrigin, getLocationOrigin } from './tools'\n\nexport function normalizeUrl(url) {\n  return buildUrl(url, getLocationOrigin()).href\n}\n\nexport function isValidUrl(url) {\n  try {\n    return !!buildUrl(url)\n  } catch (e) {\n    return false\n  }\n}\n\n// export function haveSameOrigin(url1, url2) {\n//   return getOrigin(url1) === getOrigin(url2)\n// }\n\nexport function getOrigin(url) {\n  return getLinkElementOrigin(buildUrl(url))\n}\n\nexport function getPathName(url) {\n  var pathname = buildUrl(url).pathname\n  return pathname[0] === '/' ? pathname : '/' + pathname\n}\n\nexport function getSearch(url) {\n  return buildUrl(url).search\n}\n\nexport function getHash(url) {\n  return buildUrl(url).hash\n}\n\nexport function buildUrl(url, base) {\n  if (checkURLSupported()) {\n    return base !== undefined ? new URL(url, base) : new URL(url)\n  }\n  if (base === undefined && !/:/.test(url)) {\n    throw new Error('Invalid URL: ' + url)\n  }\n  var doc = document\n  var anchorElement = doc.createElement('a')\n  if (base !== undefined) {\n    doc = document.implementation.createHTMLDocument('')\n    var baseElement = doc.createElement('base')\n    baseElement.href = base\n    doc.head.appendChild(baseElement)\n    doc.body.appendChild(anchorElement)\n  }\n  anchorElement.href = url\n  return anchorElement\n}\n\nvar isURLSupported\nfunction checkURLSupported() {\n  if (isURLSupported !== undefined) {\n    return isURLSupported\n  }\n  try {\n    var url = new URL('http://test/path')\n    isURLSupported = url.href === 'http://test/path'\n    return isURLSupported\n  } catch (e) {\n    isURLSupported = false\n  }\n  return isURLSupported\n}\n","import { noop, each } from './tools'\nimport { monitor } from './monitor'\n/**\n * Read bytes from a ReadableStream until at least `limit` bytes have been read (or until the end of\n * the stream). The callback is invoked with the at most `limit` bytes, and indicates that the limit\n * has been exceeded if more bytes were available.\n */\nexport function readBytesFromStream(stream, callback, options) {\n  var reader = stream.getReader()\n  var chunks = []\n  var readBytesCount = 0\n\n  readMore()\n\n  function readMore() {\n    reader.read().then(\n      monitor(function (result) {\n        if (result.done) {\n          onDone()\n          return\n        }\n\n        if (options.collectStreamBody) {\n          chunks.push(result.value)\n        }\n        readBytesCount += result.value.length\n\n        if (readBytesCount > options.bytesLimit) {\n          onDone()\n        } else {\n          readMore()\n        }\n      }),\n      monitor(function (error) {\n        callback(error)\n      })\n    )\n  }\n\n  function onDone() {\n    reader.cancel().catch(\n      // we don't care if cancel fails, but we still need to catch the error to avoid reporting it\n      // as an unhandled rejection\n      noop\n    )\n\n    var bytes\n    var limitExceeded\n    if (options.collectStreamBody) {\n      var completeBuffer\n      if (chunks.length === 1) {\n        // optimization: if the response is small enough to fit in a single buffer (provided by the browser), just\n        // use it directly.\n        completeBuffer = chunks[0]\n      } else {\n        // else, we need to copy buffers into a larger buffer to concatenate them.\n        completeBuffer = new Uint8Array(readBytesCount)\n        var offset = 0\n        each(chunks, function (chunk) {\n          completeBuffer.set(chunk, offset)\n          offset += chunk.length\n        })\n      }\n      bytes = completeBuffer.slice(0, options.bytesLimit)\n      limitExceeded = completeBuffer.length > options.bytesLimit\n    }\n    callback(undefined, bytes, limitExceeded)\n  }\n}\n","import { setTimeout, clearTimeout } from './timer'\nimport { monitor } from './monitor'\nimport { dateNow } from './tools'\n\n/**\n * 'requestIdleCallback' with a shim.\n */\nexport function requestIdleCallback(callback, opts) {\n  // Note: check both 'requestIdleCallback' and 'cancelIdleCallback' existence because some polyfills only implement 'requestIdleCallback'.\n  if (window.requestIdleCallback && window.cancelIdleCallback) {\n    const id = window.requestIdleCallback(monitor(callback), opts)\n    return function () {\n      return window.cancelIdleCallback(id)\n    }\n  }\n  return requestIdleCallbackShim(callback)\n}\n\nexport const MAX_TASK_TIME = 50\n\n/*\n * Shim from https://developer.chrome.com/blog/using-requestidlecallback#checking_for_requestidlecallback\n * Note: there is no simple way to support the \"timeout\" option, so we ignore it.\n */\nexport function requestIdleCallbackShim(callback) {\n  const start = dateNow()\n  const timeoutId = setTimeout(function () {\n    callback({\n      didTimeout: false,\n      timeRemaining: function () {\n        return Math.max(0, MAX_TASK_TIME - (dateNow() - start))\n      }\n    })\n  }, 0)\n  return function () {\n    return clearTimeout(timeoutId)\n  }\n}\n","import { ONE_SECOND } from './tools'\nimport { requestIdleCallback } from './requestIdleCallback'\n\n/**\n * Maximum delay before starting to execute tasks in the queue. We don't want to wait too long\n * before running tasks, as it might hurt reliability (ex: if the user navigates away, we might lose\n * the opportunity to send some data). We also don't want to run tasks too often, as it might hurt\n * performance.\n */\nconst IDLE_CALLBACK_TIMEOUT = ONE_SECOND\n\n/**\n * Maximum amount of time allocated to running tasks when a timeout (`IDLE_CALLBACK_TIMEOUT`) is\n * reached. We should not run tasks for too long as it will hurt performance, but we should still\n * run some tasks to avoid postponing them forever.\n *\n * Rational: Running tasks for 30ms every second (IDLE_CALLBACK_TIMEOUT) should be acceptable.\n */\nexport const MAX_EXECUTION_TIME_ON_TIMEOUT = 30\n\nexport function createTaskQueue() {\n  const pendingTasks = []\n\n  function run(deadline) {\n    let executionTimeRemaining\n    if (deadline.didTimeout) {\n      const start = performance.now()\n      executionTimeRemaining = function () {\n        return MAX_EXECUTION_TIME_ON_TIMEOUT - (performance.now() - start)\n      }\n    } else {\n      executionTimeRemaining = deadline.timeRemaining.bind(deadline)\n    }\n\n    while (executionTimeRemaining() > 0 && pendingTasks.length) {\n      pendingTasks.shift()()\n    }\n\n    if (pendingTasks.length) {\n      scheduleNextRun()\n    }\n  }\n\n  function scheduleNextRun() {\n    requestIdleCallback(run, { timeout: IDLE_CALLBACK_TIMEOUT })\n  }\n\n  return {\n    push: function (task) {\n      if (pendingTasks.push(task) === 1) {\n        scheduleNextRun()\n      }\n    }\n  }\n}\n","import { isFunction, isBoolean, some } from '../helper/tools'\nvar TRIM_REGIX = /^\\s+|\\s+$/g\nvar typeMap = {\n  rum: '/rum',\n  log: '/logging',\n  sessionReplay: '/rum/replay'\n}\nfunction getEndPointUrl(configuration, type) {\n  // type: rum, log,replay\n  var subUrl = typeMap[type]\n  if (!subUrl) return ''\n  var url =\n    configuration.datakitOrigin ||\n    configuration.datakitUrl ||\n    configuration.site\n  if (url.indexOf('/') === 0) {\n    //  /xxx\n    url = location.origin + trim(url)\n  }\n  var endpoint = url\n  if (url.lastIndexOf('/') === url.length - 1) {\n    endpoint = trim(url) + 'v1/write' + subUrl\n  } else {\n    endpoint = trim(url) + '/v1/write' + subUrl\n  }\n  if (configuration.site && configuration.clientToken) {\n    endpoint =\n      endpoint + '?token=' + configuration.clientToken + '&to_headless=true'\n  }\n  return endpoint\n}\n\nexport function trim(str) {\n  return str.replace(TRIM_REGIX, '')\n}\n\nexport function computeTransportConfiguration(initConfiguration) {\n  var isIntakeUrl = function (url) {\n    return false\n  }\n  if (\n    'isIntakeUrl' in initConfiguration &&\n    isFunction(initConfiguration.isIntakeUrl) &&\n    isBoolean(initConfiguration.isIntakeUrl())\n  ) {\n    isIntakeUrl = initConfiguration.isIntakeUrl\n  }\n  var isServerError = function (request) {\n    return false\n  }\n  if (\n    'isServerError' in initConfiguration &&\n    isFunction(initConfiguration.isServerError) &&\n    isBoolean(initConfiguration.isServerError())\n  ) {\n    isServerError = initConfiguration.isServerError\n  }\n  return {\n    rumEndpoint: getEndPointUrl(initConfiguration, 'rum'),\n    logsEndpoint: getEndPointUrl(initConfiguration, 'log'),\n    sessionReplayEndPoint: getEndPointUrl(initConfiguration, 'sessionReplay'),\n    isIntakeUrl: isIntakeUrl,\n    isServerError: isServerError\n  }\n}\nexport function isIntakeRequest(url, configuration) {\n  var notTakeRequest = [configuration.rumEndpoint]\n  if (configuration.logsEndpoint) {\n    notTakeRequest.push(configuration.logsEndpoint)\n  }\n  if (configuration.sessionReplayEndPoint) {\n    notTakeRequest.push(configuration.sessionReplayEndPoint)\n  }\n  // datakit log url\n  return (\n    some(notTakeRequest, function (takeUrl) {\n      return url.indexOf(takeUrl) === 0\n    }) || configuration.isIntakeUrl(url)\n  )\n}\n","import {\n  findCommaSeparatedValue,\n  UUID,\n  ONE_SECOND,\n  ONE_MINUTE,\n  findCommaSeparatedValues\n} from '../helper/tools'\n\nfunction getCookieName(name, options) {\n  return `${name}_${options && options.crossSite ? 'cs1' : 'cs0'}_${\n    options && options.domain ? 'd1' : 'd0'\n  }_${options && options.secure ? 'sec1' : 'sec0'}_${\n    options && options.partitioned ? 'part1' : 'part0'\n  }`\n}\nexport function setCookie(name, value, expireDelay, options) {\n  var date = new Date()\n  date.setTime(date.getTime() + expireDelay)\n  var expires = 'expires=' + date.toUTCString()\n  var sameSite = options && options.crossSite ? 'none' : 'strict'\n  var domain = options && options.domain ? ';domain=' + options.domain : ''\n  var secure = options && options.secure ? ';secure' : ''\n  var partitioned = options && options.partitioned ? ';partitioned' : ''\n\n  document.cookie =\n    getCookieName(name, options) +\n    '=' +\n    value +\n    ';' +\n    expires +\n    ';path=/;samesite=' +\n    sameSite +\n    domain +\n    secure +\n    partitioned\n}\n\nexport function getCookie(name, options) {\n  return findCommaSeparatedValue(document.cookie, getCookieName(name, options))\n}\nvar initCookieParsed\n/**\n * Returns a cached value of the cookie. Use this during SDK initialization (and whenever possible)\n * to avoid accessing document.cookie multiple times.\n */\nexport function getInitCookie(name) {\n  if (!initCookieParsed) {\n    initCookieParsed = findCommaSeparatedValues(document.cookie)\n  }\n  return initCookieParsed.get(name)\n}\n\nexport function resetInitCookies() {\n  initCookieParsed = undefined\n}\nexport function deleteCookie(name, options) {\n  setCookie(name, '', 0, options)\n}\n\nexport function areCookiesAuthorized(options) {\n  if (document.cookie === undefined || document.cookie === null) {\n    return false\n  }\n  try {\n    // Use a unique cookie name to avoid issues when the SDK is initialized multiple times during\n    // the test cookie lifetime\n    var testCookieName = `gc_cookie_test_${UUID()}`\n    var testCookieValue = 'test'\n    setCookie(testCookieName, testCookieValue, ONE_MINUTE, options)\n    const isCookieCorrectlySet =\n      getCookie(testCookieName, options) === testCookieValue\n    deleteCookie(testCookieName, options)\n    return isCookieCorrectlySet\n  } catch (error) {\n    return false\n  }\n}\n\n/**\n * No API to retrieve it, number of levels for subdomain and suffix are unknown\n * strategy: find the minimal domain on which cookies are allowed to be set\n * https://web.dev/same-site-same-origin/#site\n */\nvar getCurrentSiteCache\nexport function getCurrentSite() {\n  if (getCurrentSiteCache === undefined) {\n    // Use a unique cookie name to avoid issues when the SDK is initialized multiple times during\n    // the test cookie lifetime\n    const testCookieName = `gc_site_test_${UUID()}`\n    const testCookieValue = 'test'\n    const domainLevels = window.location.hostname.split('.')\n    let candidateDomain = domainLevels.pop()\n    while (\n      domainLevels.length &&\n      !getCookie(testCookieName, {\n        domain: candidateDomain\n      })\n    ) {\n      candidateDomain = `${domainLevels.pop()}.${candidateDomain}`\n      setCookie(testCookieName, testCookieValue, ONE_SECOND, {\n        domain: candidateDomain\n      })\n    }\n    deleteCookie(testCookieName, { domain: candidateDomain })\n    getCurrentSiteCache = candidateDomain\n  }\n  return getCurrentSiteCache\n}\n","import { ONE_HOUR, ONE_MINUTE } from '../helper/tools'\nexport var SESSION_TIME_OUT_DELAY = 4 * ONE_HOUR\nexport var SESSION_EXPIRATION_DELAY = 15 * ONE_MINUTE\nexport var SESSION_STORE_KEY = '_gc_s'\n","import { isEmptyObject, objectEntries, dateNow, map } from '../helper/tools'\nimport {\n  SESSION_EXPIRATION_DELAY,\n  SESSION_TIME_OUT_DELAY\n} from './sessionConstants'\n\nconst SESSION_ENTRY_REGEXP = /^([a-zA-Z]+)=([a-z0-9-]+)$/\nconst SESSION_ENTRY_SEPARATOR = '&'\n\nexport const EXPIRED = '1'\n\nexport function getExpiredSessionState() {\n  return {\n    isExpired: EXPIRED\n  }\n}\n\nexport function isSessionInNotStartedState(session) {\n  return isEmptyObject(session)\n}\n\nexport function isSessionStarted(session) {\n  return !isSessionInNotStartedState(session)\n}\n\nexport function isSessionInExpiredState(session) {\n  return session.isExpired !== undefined || !isActiveSession(session)\n}\n\nfunction isActiveSession(sessionState) {\n  return (\n    (sessionState.created === undefined ||\n      dateNow() - Number(sessionState.created) < SESSION_TIME_OUT_DELAY) &&\n    (sessionState.expire === undefined ||\n      dateNow() < Number(sessionState.expire))\n  )\n}\n\nexport function expandSessionState(session) {\n  session.expire = String(dateNow() + SESSION_EXPIRATION_DELAY)\n}\n\nexport function toSessionString(session) {\n  return map(objectEntries(session), function (item) {\n    return item[0] + '=' + item[1]\n  }).join(SESSION_ENTRY_SEPARATOR)\n}\n\nexport function toSessionState(sessionString) {\n  const session = {}\n  if (isValidSessionString(sessionString)) {\n    sessionString.split(SESSION_ENTRY_SEPARATOR).forEach(function (entry) {\n      const matches = SESSION_ENTRY_REGEXP.exec(entry)\n      if (matches !== null) {\n        const [, key, value] = matches\n        session[key] = value\n      }\n    })\n  }\n  return session\n}\n\nfunction isValidSessionString(sessionString) {\n  return (\n    !!sessionString &&\n    (sessionString.indexOf(SESSION_ENTRY_SEPARATOR) !== -1 ||\n      SESSION_ENTRY_REGEXP.test(sessionString))\n  )\n}\n","import { isChromium } from '../helper/tools'\nimport {\n  getCurrentSite,\n  areCookiesAuthorized,\n  getCookie,\n  setCookie\n} from '../browser/cookie'\nimport {\n  SESSION_EXPIRATION_DELAY,\n  SESSION_TIME_OUT_DELAY,\n  SESSION_STORE_KEY\n} from './sessionConstants'\nimport {\n  toSessionString,\n  toSessionState,\n  getExpiredSessionState\n} from './sessionState'\n\nexport function selectCookieStrategy(initConfiguration) {\n  const cookieOptions = buildCookieOptions(initConfiguration)\n  return areCookiesAuthorized(cookieOptions)\n    ? { type: 'Cookie', cookieOptions }\n    : undefined\n}\n\nexport function initCookieStrategy(cookieOptions) {\n  const cookieStore = {\n    /**\n     * Lock strategy allows mitigating issues due to concurrent access to cookie.\n     * This issue concerns only chromium browsers and enabling this on firefox increases cookie write failures.\n     */\n    isLockEnabled: isChromium(),\n    persistSession: persistSessionCookie(cookieOptions),\n    retrieveSession: retrieveSessionCookie(cookieOptions),\n    expireSession: function () {\n      return expireSessionCookie(cookieOptions)\n    }\n  }\n  return cookieStore\n}\n\nfunction persistSessionCookie(options) {\n  return function (session) {\n    setCookie(\n      SESSION_STORE_KEY,\n      toSessionString(session),\n      SESSION_EXPIRATION_DELAY,\n      options\n    )\n  }\n}\n\nfunction expireSessionCookie(options) {\n  setCookie(\n    SESSION_STORE_KEY,\n    toSessionString(getExpiredSessionState()),\n    SESSION_TIME_OUT_DELAY,\n    options\n  )\n}\n\nfunction retrieveSessionCookie(options) {\n  return function () {\n    var sessionString = getCookie(SESSION_STORE_KEY, options)\n    return toSessionState(sessionString)\n  }\n}\n\nexport function buildCookieOptions(initConfiguration) {\n  const cookieOptions = {}\n\n  cookieOptions.secure =\n    !!initConfiguration.useSecureSessionCookie ||\n    !!initConfiguration.usePartitionedCrossSiteSessionCookie ||\n    !!initConfiguration.useCrossSiteSessionCookie\n  cookieOptions.crossSite =\n    !!initConfiguration.usePartitionedCrossSiteSessionCookie ||\n    !!initConfiguration.useCrossSiteSessionCookie\n  cookieOptions.partitioned =\n    !!initConfiguration.usePartitionedCrossSiteSessionCookie\n\n  if (initConfiguration.trackSessionAcrossSubdomains) {\n    cookieOptions.domain = getCurrentSite()\n  }\n\n  return cookieOptions\n}\n","import { UUID } from '../helper/tools'\nimport {\n  toSessionString,\n  toSessionState,\n  getExpiredSessionState\n} from './sessionState'\n\nimport { SESSION_STORE_KEY } from './sessionConstants'\n\nconst LOCAL_STORAGE_TEST_KEY = '_gc_test_'\n\nexport function selectLocalStorageStrategy() {\n  try {\n    const id = UUID()\n    const testKey = `${LOCAL_STORAGE_TEST_KEY}${id}`\n    localStorage.setItem(testKey, id)\n    const retrievedId = localStorage.getItem(testKey)\n    localStorage.removeItem(testKey)\n    return id === retrievedId ? { type: 'LocalStorage' } : undefined\n  } catch (e) {\n    return undefined\n  }\n}\n\nexport function initLocalStorageStrategy() {\n  return {\n    isLockEnabled: false,\n    persistSession: persistInLocalStorage,\n    retrieveSession: retrieveSessionFromLocalStorage,\n    expireSession: expireSessionFromLocalStorage\n  }\n}\n\nfunction persistInLocalStorage(sessionState) {\n  localStorage.setItem(SESSION_STORE_KEY, toSessionString(sessionState))\n}\n\nfunction retrieveSessionFromLocalStorage() {\n  const sessionString = localStorage.getItem(SESSION_STORE_KEY)\n  return toSessionState(sessionString)\n}\n\nfunction expireSessionFromLocalStorage() {\n  persistInLocalStorage(getExpiredSessionState())\n}\n","import { setTimeout } from '../helper/timer'\nimport { UUID, assign } from '../helper/tools'\nimport {\n  expandSessionState,\n  isSessionInExpiredState,\n  isSessionInNotStartedState\n} from './sessionState'\n\nexport const LOCK_RETRY_DELAY = 10\nexport const LOCK_MAX_TRIES = 100\nconst bufferedOperations = []\nlet ongoingOperations\n\nexport function processSessionStoreOperations(\n  operations,\n  sessionStoreStrategy,\n  numberOfRetries = 0\n) {\n  const { isLockEnabled, persistSession, expireSession } = sessionStoreStrategy\n  const persistWithLock = function (session) {\n    return persistSession(assign({}, session, { lock: currentLock }))\n  }\n  const retrieveStore = function () {\n    const session = sessionStoreStrategy.retrieveSession()\n    const lock = session.lock\n    if (session.lock) {\n      delete session.lock\n    }\n\n    return {\n      session,\n      lock\n    }\n  }\n\n  if (!ongoingOperations) {\n    ongoingOperations = operations\n  }\n  if (operations !== ongoingOperations) {\n    bufferedOperations.push(operations)\n    return\n  }\n  if (isLockEnabled && numberOfRetries >= LOCK_MAX_TRIES) {\n    next(sessionStoreStrategy)\n    return\n  }\n  let currentLock\n  let currentStore = retrieveStore()\n  if (isLockEnabled) {\n    // if someone has lock, retry later\n    if (currentStore.lock) {\n      retryLater(operations, sessionStoreStrategy, numberOfRetries)\n      return\n    }\n    // acquire lock\n    currentLock = UUID()\n    persistWithLock(currentStore.session)\n    // if lock is not acquired, retry later\n    currentStore = retrieveStore()\n    if (currentStore.lock !== currentLock) {\n      retryLater(operations, sessionStoreStrategy, numberOfRetries)\n      return\n    }\n  }\n  let processedSession = operations.process(currentStore.session)\n  if (isLockEnabled) {\n    // if lock corrupted after process, retry later\n    currentStore = retrieveStore()\n    if (currentStore.lock !== currentLock) {\n      retryLater(operations, sessionStoreStrategy, numberOfRetries)\n      return\n    }\n  }\n  if (processedSession) {\n    if (isSessionInExpiredState(processedSession)) {\n      expireSession()\n    } else {\n      expandSessionState(processedSession)\n      isLockEnabled\n        ? persistWithLock(processedSession)\n        : persistSession(processedSession)\n    }\n  }\n  if (isLockEnabled) {\n    // correctly handle lock around expiration would require to handle this case properly at several levels\n    // since we don't have evidence of lock issues around expiration, let's just not do the corruption check for it\n    if (!(processedSession && isSessionInExpiredState(processedSession))) {\n      // if lock corrupted after persist, retry later\n      currentStore = retrieveStore()\n      if (currentStore.lock !== currentLock) {\n        retryLater(operations, sessionStoreStrategy, numberOfRetries)\n        return\n      }\n      persistSession(currentStore.session)\n      processedSession = currentStore.session\n    }\n  }\n  // call after even if session is not persisted in order to perform operations on\n  // up-to-date session state value => the value could have been modified by another tab\n  if (operations.after) {\n    operations.after(processedSession || currentStore.session)\n  }\n  next(sessionStoreStrategy)\n}\n\nfunction retryLater(operations, sessionStore, currentNumberOfRetries) {\n  setTimeout(function () {\n    processSessionStoreOperations(\n      operations,\n      sessionStore,\n      currentNumberOfRetries + 1\n    )\n  }, LOCK_RETRY_DELAY)\n}\n\nfunction next(sessionStore) {\n  ongoingOperations = undefined\n  const nextOperations = bufferedOperations.shift()\n  if (nextOperations) {\n    processSessionStoreOperations(nextOperations, sessionStore)\n  }\n}\n","import { clearInterval, setInterval } from '../helper/timer'\nimport { Observable } from '../helper/observable'\nimport { ONE_SECOND, dateNow, throttle, UUID, assign } from '../helper/tools'\nimport { selectCookieStrategy, initCookieStrategy } from './sessionInCookie'\nimport {\n  getExpiredSessionState,\n  isSessionInExpiredState,\n  isSessionInNotStartedState,\n  isSessionStarted\n} from './sessionState'\nimport {\n  initLocalStorageStrategy,\n  selectLocalStorageStrategy\n} from './sessionInLocalStorage'\nimport { processSessionStoreOperations } from './sessionStoreOperations'\n\n/**\n * Every second, the storage will be polled to check for any change that can occur\n * to the session state in another browser tab, or another window.\n * This value has been determined from our previous cookie-only implementation.\n */\nexport const STORAGE_POLL_DELAY = ONE_SECOND\n\n/**\n * Checks if cookies are available as the preferred storage\n * Else, checks if LocalStorage is allowed and available\n */\nexport function selectSessionStoreStrategyType(initConfiguration) {\n  let sessionStoreStrategyType = selectCookieStrategy(initConfiguration)\n  if (\n    !sessionStoreStrategyType &&\n    initConfiguration.allowFallbackToLocalStorage\n  ) {\n    sessionStoreStrategyType = selectLocalStorageStrategy()\n  }\n  return sessionStoreStrategyType\n}\n\n/**\n * Different session concepts:\n * - tracked, the session has an id and is updated along the user navigation\n * - not tracked, the session does not have an id but it is updated along the user navigation\n * - inactive, no session in store or session expired, waiting for a renew session\n */\nexport function startSessionStore(\n  sessionStoreStrategyType,\n  productKey,\n  computeSessionState\n) {\n  const renewObservable = new Observable()\n  const expireObservable = new Observable()\n  const sessionStateUpdateObservable = new Observable()\n  const sessionStoreStrategy =\n    sessionStoreStrategyType.type === 'Cookie'\n      ? initCookieStrategy(sessionStoreStrategyType.cookieOptions)\n      : initLocalStorageStrategy()\n  const { expireSession } = sessionStoreStrategy\n\n  const watchSessionTimeoutId = setInterval(watchSession, STORAGE_POLL_DELAY)\n  let sessionCache\n\n  startSession()\n\n  const {\n    throttled: throttledExpandOrRenewSession,\n    cancel: cancelExpandOrRenewSession\n  } = throttle(function () {\n    processSessionStoreOperations(\n      {\n        process: function (sessionState) {\n          if (isSessionInNotStartedState(sessionState)) {\n            return\n          }\n\n          const synchronizedSession = synchronizeSession(sessionState)\n          expandOrRenewSessionState(synchronizedSession)\n          return synchronizedSession\n        },\n        after: function (sessionState) {\n          if (isSessionStarted(sessionState) && !hasSessionInCache()) {\n            renewSessionInCache(sessionState)\n          }\n          sessionCache = sessionState\n        }\n      },\n      sessionStoreStrategy\n    )\n  }, STORAGE_POLL_DELAY)\n\n  function expandSession() {\n    processSessionStoreOperations(\n      {\n        process: function (sessionState) {\n          return hasSessionInCache()\n            ? synchronizeSession(sessionState)\n            : undefined\n        }\n      },\n      sessionStoreStrategy\n    )\n  }\n\n  /**\n   * allows two behaviors:\n   * - if the session is active, synchronize the session cache without updating the session store\n   * - if the session is not active, clear the session store and expire the session cache\n   */\n  function watchSession() {\n    processSessionStoreOperations(\n      {\n        process: function (sessionState) {\n          return isSessionInExpiredState(sessionState)\n            ? getExpiredSessionState()\n            : undefined\n        },\n        after: synchronizeSession\n      },\n      sessionStoreStrategy\n    )\n  }\n\n  function synchronizeSession(sessionState) {\n    if (isSessionInExpiredState(sessionState)) {\n      sessionState = getExpiredSessionState()\n    }\n    if (hasSessionInCache()) {\n      if (isSessionInCacheOutdated(sessionState)) {\n        expireSessionInCache()\n      } else {\n        sessionStateUpdateObservable.notify({\n          previousState: sessionCache,\n          newState: sessionState\n        })\n        sessionCache = sessionState\n      }\n    }\n    return sessionState\n  }\n\n  function startSession() {\n    processSessionStoreOperations(\n      {\n        process: function (sessionState) {\n          if (isSessionInNotStartedState(sessionState)) {\n            return getExpiredSessionState()\n          }\n        },\n        after: function (sessionState) {\n          sessionCache = sessionState\n        }\n      },\n      sessionStoreStrategy\n    )\n  }\n\n  function expandOrRenewSessionState(sessionState) {\n    if (isSessionInNotStartedState(sessionState)) {\n      return false\n    }\n\n    const { trackingType, isTracked } = computeSessionState(\n      sessionState[productKey]\n    )\n    sessionState[productKey] = trackingType\n    delete sessionState.isExpired\n    if (isTracked && !sessionState.id) {\n      sessionState.id = UUID()\n      sessionState.created = String(dateNow())\n    }\n  }\n\n  function hasSessionInCache() {\n    return sessionCache[productKey] !== undefined\n  }\n\n  function isSessionInCacheOutdated(sessionState) {\n    return (\n      sessionCache.id !== sessionState.id ||\n      sessionCache[productKey] !== sessionState[productKey]\n    )\n  }\n\n  function expireSessionInCache() {\n    sessionCache = getExpiredSessionState()\n    expireObservable.notify()\n  }\n\n  function renewSessionInCache(sessionState) {\n    sessionCache = sessionState\n    renewObservable.notify()\n  }\n\n  function updateSessionState(partialSessionState) {\n    processSessionStoreOperations(\n      {\n        process: function (sessionState) {\n          return assign({}, sessionState, partialSessionState)\n        },\n        after: synchronizeSession\n      },\n      sessionStoreStrategy\n    )\n  }\n\n  return {\n    expandOrRenewSession: throttledExpandOrRenewSession,\n    expandSession,\n    getSession: function () {\n      return sessionCache\n    },\n    renewObservable,\n    expireObservable,\n    sessionStateUpdateObservable,\n    restartSession: startSession,\n    expire: function () {\n      cancelExpandOrRenewSession()\n      expireSession()\n      synchronizeSession(getExpiredSessionState())\n    },\n    stop: function () {\n      clearInterval(watchSessionTimeoutId)\n    },\n    updateSessionState\n  }\n}\n","import { catchUserErrors } from '../helper/catchUserErrors'\nimport { display } from '../helper/display'\nimport {\n  assign,\n  isPercentage,\n  ONE_SECOND,\n  isNullUndefinedDefaultValue\n} from '../helper/tools'\nimport { ONE_KIBI_BYTE } from '../helper/byteUtils'\nimport { computeTransportConfiguration } from './transportConfiguration'\nimport { selectSessionStoreStrategyType } from '../session/sessionStore'\nexport var DefaultPrivacyLevel = {\n  ALLOW: 'allow',\n  MASK: 'mask',\n  MASK_USER_INPUT: 'mask-user-input'\n}\nexport function validateAndBuildConfiguration(initConfiguration) {\n  if (\n    initConfiguration.sampleRate !== undefined &&\n    !isPercentage(initConfiguration.sampleRate)\n  ) {\n    display.error('Sample Rate should be a number between 0 and 100')\n    return\n  }\n  if (\n    initConfiguration.sessionSampleRate !== undefined &&\n    !isPercentage(initConfiguration.sessionSampleRate)\n  ) {\n    display.error('Sample Rate should be a number between 0 and 100')\n    return\n  }\n  if (\n    initConfiguration.telemetrySampleRate !== undefined &&\n    !isPercentage(initConfiguration.telemetrySampleRate)\n  ) {\n    display.error('Telemetry Sample Rate should be a number between 0 and 100')\n    return\n  }\n\n  var sessionSampleRate = isNullUndefinedDefaultValue(\n    initConfiguration.sessionSampleRate,\n    initConfiguration.sampleRate\n  )\n  return assign(\n    {\n      beforeSend:\n        initConfiguration.beforeSend &&\n        catchUserErrors(\n          initConfiguration.beforeSend,\n          'beforeSend threw an error:'\n        ),\n      sessionStoreStrategyType:\n        selectSessionStoreStrategyType(initConfiguration),\n      sessionSampleRate: isNullUndefinedDefaultValue(sessionSampleRate, 100),\n      service: initConfiguration.service,\n      version: initConfiguration.version,\n      env: initConfiguration.env,\n      telemetrySampleRate: isNullUndefinedDefaultValue(\n        initConfiguration.telemetrySampleRate,\n        100\n      ),\n      telemetryEnabled: isNullUndefinedDefaultValue(\n        initConfiguration.telemetryEnabled,\n        false\n      ),\n      silentMultipleInit: !!initConfiguration.silentMultipleInit,\n\n      /**\n       * beacon payload max queue size implementation is 64kb\n       * ensure that we leave room for logs, rum and potential other users\n       */\n      batchBytesLimit: 16 * ONE_KIBI_BYTE,\n\n      eventRateLimiterThreshold: 3000,\n      maxTelemetryEventsPerPage: 15,\n\n      /**\n       * flush automatically, aim to be lower than ALB connection timeout\n       * to maximize connection reuse.\n       */\n      flushTimeout: 30 * ONE_SECOND,\n\n      /**\n       * Logs intake limit\n       */\n      batchMessagesLimit: 50,\n      messageBytesLimit: 256 * ONE_KIBI_BYTE,\n      resourceUrlLimit: 5 * ONE_KIBI_BYTE,\n      storeContextsToLocal: !!initConfiguration.storeContextsToLocal,\n      // localstorage key \n      storeContextsKey: initConfiguration.storeContextsKey,\n      sendContentTypeByJson: !!initConfiguration.sendContentTypeByJson,\n      retryMaxSize: isNullUndefinedDefaultValue(\n        initConfiguration.retryMaxSize,\n        -1\n      )\n    },\n    computeTransportConfiguration(initConfiguration)\n  )\n}\nexport function validatePostRequestRequireParamsConfiguration(\n  initConfiguration\n) {\n  if (\n    !initConfiguration.site &&\n    !initConfiguration.datakitOrigin &&\n    !initConfiguration.datakitUrl\n  ) {\n    display.error(\n      'datakitOrigin or site is not configured, no RUM data will be collected.'\n    )\n    return false\n  }\n  //   if (!initConfiguration.datakitUrl && !initConfiguration.datakitOrigin) {\n  //     display.error(\n  //       'datakitOrigin is not configured, no RUM data will be collected.'\n  //     )\n  //     return false\n  //   }\n  if (initConfiguration.site && !initConfiguration.clientToken) {\n    display.error(\n      'clientToken is not configured, no RUM data will be collected.'\n    )\n    return false\n  }\n  return true\n}\n","import { instrumentMethod } from '../helper/instrumentMethod'\nimport { Observable } from '../helper/observable'\nimport { clocksNow, assign } from '../helper/tools'\nimport { monitor } from '../helper/monitor'\nimport { normalizeUrl } from '../helper/urlPolyfill'\n\nvar fetchObservable\n\nexport function initFetchObservable() {\n  if (!fetchObservable) {\n    fetchObservable = createFetchObservable()\n  }\n  return fetchObservable\n}\nexport function resetFetchObservable() {\n  fetchObservable = undefined\n}\nfunction createFetchObservable() {\n  return new Observable(function (observable) {\n    if (!window.fetch) {\n      return\n    }\n\n    var fetchMethod = instrumentMethod(\n      window,\n      'fetch',\n      function (call) {\n        return beforeSend(call, observable)\n      },\n      {\n        computeHandlingStack: true\n      }\n    )\n    return fetchMethod.stop\n  })\n}\n\nfunction beforeSend(params, observable) {\n  var parameters = params.parameters\n  var onPostCall = params.onPostCall\n  var handlingStack = params.handlingStack\n  var input = parameters[0]\n  var init = parameters[1]\n  //   var method =\n  //       (init && init.method) || (input instanceof Request && input.method) || 'GET'\n  //     const methodFromParams =\n  //       (init && init.method) || (input instanceof Request && input.method)\n  //     const method = methodFromParams ? methodFromParams.toUpperCase() : 'GET'\n  var methodFromParams = init && init.method\n\n  if (methodFromParams === undefined && input instanceof Request) {\n    methodFromParams = input.method\n  }\n\n  var method =\n    methodFromParams !== undefined\n      ? String(methodFromParams).toUpperCase()\n      : 'GET'\n  var url = input instanceof Request ? input.url : normalizeUrl(String(input))\n\n  var startClocks = clocksNow()\n\n  var context = {\n    state: 'start',\n    init: init,\n    input: input,\n    method: method,\n    startClocks: startClocks,\n    url: url,\n    handlingStack: handlingStack\n  }\n\n  observable.notify(context)\n  parameters[0] = context.input\n  parameters[1] = context.init\n  onPostCall(function (responsePromise) {\n    return afterSend(observable, responsePromise, context)\n  })\n}\n\nfunction afterSend(observable, responsePromise, startContext) {\n  var context = startContext\n  var reportFetch = function (partialContext) {\n    context.state = 'resolve'\n    assign(context, partialContext)\n    // context.duration = elapsed(context.startClocks.timeStamp, timeStampNow())\n    // if ('stack' in response || response instanceof Error) {\n    //   context.status = 0\n    //   context.isAborted =\n    //     response instanceof DOMException &&\n    //     response.code === DOMException.ABORT_ERR\n    //   context.error = response\n    // } else if ('status' in response) {\n    //   context.response = response\n    //   try {\n    //     context.responseType =\n    //       (response.constructor === Response && response.type) || '' // issue The Response type getter can only be used on instances of Response\n    //   } catch (err) {\n    //     context.responseType = ''\n    //   }\n\n    //   context.status = response.status\n    //   context.isAborted = false\n    // }\n    observable.notify(context)\n  }\n  responsePromise.then(\n    monitor(function (response) {\n      var responseType = ''\n      try {\n        responseType =\n          (response.constructor === Response && response.type) || '' // issue The Response type getter can only be used on instances of Response\n      } catch (err) {\n        responseType = ''\n      }\n      reportFetch({\n        response: response,\n        responseType: responseType,\n        status: response.status,\n        isAborted: false\n      })\n    }),\n    monitor(function (error) {\n      reportFetch({\n        status: 0,\n        isAborted:\n          (context.init &&\n            context.init.signal &&\n            context.init.signal.aborted) ||\n          (error instanceof DOMException &&\n            error.code === DOMException.ABORT_ERR),\n        error: error\n      })\n    })\n  )\n}\n","import { each } from '../helper/tools'\nimport { getZoneJsOriginalValue } from '../helper/getZoneJsOriginalValue'\nimport { monitor } from '../helper/monitor'\nexport function addEventListener(eventTarget, event, listener, options) {\n  return addEventListeners(eventTarget, [event], listener, options)\n}\n\n/**\n * Add event listeners to an event emitter object (Window, Element, mock object...).  This provides\n * a few conveniences compared to using `element.addEventListener` directly:\n *\n * * supports IE11 by:\n *   * using an option object only if needed\n *   * emulating the `once` option\n *\n * * wraps the listener with a `monitor` function\n *\n * * returns a `stop` function to remove the listener\n *\n * * with `once: true`, the listener will be called at most once, even if different events are\n *   listened\n */\n\nexport function addEventListeners(eventTarget, eventNames, listener, options) {\n  var wrappedListener = monitor(\n    options && options.once\n      ? function (event) {\n          stop()\n          listener(event)\n        }\n      : listener\n  )\n  options =\n    options && options.passive\n      ? { capture: options.capture, passive: options.passive }\n      : options && options.capture\n  // Use the window.EventTarget.prototype when possible to avoid wrong overrides (e.g: https://github.com/salesforce/lwc/issues/1824)\n  const listenerTarget =\n    window.EventTarget && eventTarget instanceof EventTarget\n      ? window.EventTarget.prototype\n      : eventTarget\n  var add = getZoneJsOriginalValue(listenerTarget, 'addEventListener')\n\n  each(eventNames, function (eventName) {\n    add.call(eventTarget, eventName, wrappedListener, options)\n  })\n  var stop = function () {\n    var remove = getZoneJsOriginalValue(listenerTarget, 'removeEventListener')\n    each(eventNames, function (eventName) {\n      remove.call(eventTarget, eventName, wrappedListener, options)\n    })\n  }\n  return {\n    stop: stop\n  }\n}\n","import { instrumentMethod } from '../helper/instrumentMethod'\nimport { Observable } from '../helper/observable'\nimport { normalizeUrl } from '../helper/urlPolyfill'\nimport { shallowClone, elapsed, clocksNow, timeStampNow } from '../helper/tools'\nimport { addEventListener } from '../browser/addEventListener'\nvar xhrObservable\nvar xhrContexts = new WeakMap()\nexport function initXhrObservable() {\n  if (!xhrObservable) {\n    xhrObservable = createXhrObservable()\n  }\n  return xhrObservable\n}\n\nfunction createXhrObservable() {\n  return new Observable(function (observable) {\n    var openInstrumentMethod = instrumentMethod(\n      XMLHttpRequest.prototype,\n      'open',\n      openXhr\n    )\n\n    var sendInstrumentMethod = instrumentMethod(\n      XMLHttpRequest.prototype,\n      'send',\n      function (call) {\n        sendXhr(call, observable)\n      },\n      { computeHandlingStack: true }\n    )\n\n    var abortInstrumentMethod = instrumentMethod(\n      XMLHttpRequest.prototype,\n      'abort',\n      abortXhr\n    )\n\n    return function () {\n      openInstrumentMethod.stop()\n      sendInstrumentMethod.stop()\n      abortInstrumentMethod.stop()\n    }\n  })\n}\n\nfunction openXhr(params) {\n  var xhr = params.target\n  var method = params.parameters[0]\n  var url = params.parameters[1]\n  xhrContexts.set(xhr, {\n    state: 'open',\n    method: String(method).toUpperCase(),\n    url: normalizeUrl(String(url))\n  })\n}\n\nfunction sendXhr(params, observable) {\n  var xhr = params.target\n  var handlingStack = params.handlingStack\n  var context = xhrContexts.get(xhr)\n  if (!context) {\n    return\n  }\n  var startContext = context\n  startContext.state = 'start'\n  startContext.startClocks = clocksNow()\n  startContext.isAborted = false\n  startContext.xhr = xhr\n  startContext.handlingStack = handlingStack\n  var hasBeenReported = false\n  var stopInstrumentingOnReadyStateChange = instrumentMethod(\n    xhr,\n    'onreadystatechange',\n    function () {\n      if (xhr.readyState === XMLHttpRequest.DONE) {\n        // Try to report the XHR as soon as possible, because the XHR may be mutated by the\n        // application during a future event. For example, Angular is calling .abort() on\n        // completed requests during a onreadystatechange event, so the status becomes '0'\n        // before the request is collected.\n        onEnd()\n      }\n    }\n  ).stop\n\n  var onEnd = function () {\n    unsubscribeLoadEndListener()\n    stopInstrumentingOnReadyStateChange()\n    if (hasBeenReported) {\n      return\n    }\n    hasBeenReported = true\n    var completeContext = context\n    completeContext.state = 'complete'\n    completeContext.duration = elapsed(\n      startContext.startClocks.timeStamp,\n      timeStampNow()\n    )\n    completeContext.status = xhr.status\n    observable.notify(shallowClone(completeContext))\n  }\n  var unsubscribeLoadEndListener = addEventListener(xhr, 'loadend', onEnd).stop\n  observable.notify(startContext)\n}\n\nfunction abortXhr(params) {\n  var xhr = params.target\n  var context = xhrContexts.get(xhr)\n  if (context) {\n    context.isAborted = true\n  }\n}\n","import { Observable } from '../helper/observable'\nimport { includes, values } from '../helper/tools'\nimport { DOM_EVENT } from '../helper/enums'\nimport {\n  addEventListener,\n  addEventListeners\n} from '../browser/addEventListener'\nexport var PageExitReason = {\n  HIDDEN: 'visibility_hidden',\n  UNLOADING: 'before_unload',\n  PAGEHIDE: 'page_hide',\n  FROZEN: 'page_frozen'\n}\n\nexport function createPageExitObservable() {\n  return new Observable(function (observable) {\n    /**\n     * Only event that guarantee to fire on mobile devices when the page transitions to background state\n     * (e.g. when user switches to a different application, goes to homescreen, etc), or is being unloaded.\n     */\n    var visibilityChangeListener = addEventListeners(\n      window,\n      [DOM_EVENT.VISIBILITY_CHANGE, DOM_EVENT.FREEZE],\n      function (event) {\n        if (\n          event.type === DOM_EVENT.VISIBILITY_CHANGE &&\n          document.visibilityState === 'hidden'\n        ) {\n          /**\n           * Only event that guarantee to fire on mobile devices when the page transitions to background state\n           * (e.g. when user switches to a different application, goes to homescreen, etc), or is being unloaded.\n           */\n          observable.notify({ reason: PageExitReason.HIDDEN })\n        } else if (event.type === DOM_EVENT.FREEZE) {\n          /**\n           * After transitioning in background a tab can be freezed to preserve resources. (cf: https://developer.chrome.com/blog/page-lifecycle-api)\n           * Allow to collect events happening between hidden and frozen state.\n           */\n          observable.notify({ reason: PageExitReason.FROZEN })\n        }\n      },\n      { capture: true }\n    )\n\n    /**\n     * Safari does not support yet to send a request during:\n     * - a visibility change during doc unload (cf: https://bugs.webkit.org/show_bug.cgi?id=194897)\n     * - a page hide transition (cf: https://bugs.webkit.org/show_bug.cgi?id=188329)\n     */\n    var beforeUnloadListener = addEventListener(\n      window,\n      DOM_EVENT.BEFORE_UNLOAD,\n      function () {\n        observable.notify({ reason: PageExitReason.UNLOADING })\n      }\n    )\n\n    return function () {\n      visibilityChangeListener.stop()\n      beforeUnloadListener.stop()\n    }\n  })\n}\n\nexport function isPageExitReason(reason) {\n  return includes(values(PageExitReason), reason)\n}\n","import { addEventListener } from './addEventListener'\nimport { DOM_EVENT } from '../helper/enums'\nimport { noop } from '../helper/tools'\nexport function runOnReadyState(expectedReadyState, callback) {\n  if (\n    document.readyState === expectedReadyState ||\n    document.readyState === 'complete'\n  ) {\n    callback()\n    return { stop: noop }\n  } else {\n    var eventName =\n      expectedReadyState === 'complete'\n        ? DOM_EVENT.LOAD\n        : DOM_EVENT.DOM_CONTENT_LOADED\n    return addEventListener(window, eventName, callback, { once: true })\n  }\n}\n","import { RumEventType } from './helper/enums'\nexport var commonTags = {\n  sdk_name: '_gc.sdk_name',\n  sdk_version: '_gc.sdk_version',\n  app_id: 'application.id',\n  env: 'env',\n  service: 'service',\n  version: 'version',\n  source: 'source',\n  userid: 'user.id',\n  user_email: 'user.email',\n  user_name: 'user.name',\n  session_id: 'session.id',\n  session_type: 'session.type',\n  session_sampling: 'session.is_sampling',\n  is_signin: 'user.is_signin',\n  os: 'device.os',\n  os_version: 'device.os_version',\n  os_version_major: 'device.os_version_major',\n  browser: 'device.browser',\n  browser_version: 'device.browser_version',\n  browser_version_major: 'device.browser_version_major',\n  screen_size: 'device.screen_size',\n  network_type: 'device.network_type',\n  time_zone: 'device.time_zone',\n  device: 'device.device',\n  view_id: 'view.id',\n  view_referrer: 'view.referrer',\n  view_url: 'view.url',\n  view_host: 'view.host',\n  view_path: 'view.path',\n  view_name: 'view.name', // \n  view_path_group: 'view.path_group'\n}\nexport var commonFields = {\n  view_url_query: 'view.url_query',\n  action_id: 'action.id',\n  action_ids: 'action.ids',\n  view_in_foreground: 'view.in_foreground',\n  display: 'display',\n  session_has_replay: 'session.has_replay',\n  is_login: 'user.is_login',\n  page_states: '_gc.page_states',\n  session_sample_rate: '_gc.configuration.session_sample_rate',\n  session_replay_sample_rate: '_gc.configuration.session_replay_sample_rate',\n  session_on_error_sample_rate:\n    '_gc.configuration.session_on_error_sample_rate',\n  session_replay_on_error_sample_rate:\n    '_gc.configuration.session_replay_on_error_sample_rate',\n  drift: '_gc.drift'\n}\n// field value [string, path]\nexport var dataMap = {\n  view: {\n    type: RumEventType.VIEW,\n    tags: {\n      view_loading_type: 'view.loading_type',\n      view_apdex_level: 'view.apdex_level',\n      view_privacy_replay_level: 'privacy.replay_level'\n    },\n    fields: {\n      sampled_for_replay: 'session.sampled_for_replay',\n      sampled_for_error_replay: 'session.sampled_for_error_replay',\n      sampled_for_error_session: 'session.sampled_for_error_session',\n      session_error_timestamp: 'session.error_timestamp_for_session',\n      is_active: 'view.is_active',\n      session_replay_stats: '_gc.replay_stats',\n      session_is_active: 'session.is_active',\n      view_error_count: 'view.error.count',\n      view_resource_count: 'view.resource.count',\n      view_long_task_count: 'view.long_task.count',\n      view_action_count: 'view.action.count',\n      first_contentful_paint: 'view.first_contentful_paint',\n      largest_contentful_paint: 'view.largest_contentful_paint',\n      largest_contentful_paint_element_selector:\n        'view.largest_contentful_paint_element_selector',\n      cumulative_layout_shift: 'view.cumulative_layout_shift',\n      cumulative_layout_shift_time: 'view.cumulative_layout_shift_time',\n      cumulative_layout_shift_target_selector:\n        'view.cumulative_layout_shift_target_selector',\n      first_input_delay: 'view.first_input_delay',\n      loading_time: 'view.loading_time',\n      dom_interactive: 'view.dom_interactive',\n      dom_content_loaded: 'view.dom_content_loaded',\n      dom_complete: 'view.dom_complete',\n      load_event: 'view.load_event',\n      first_input_time: 'view.first_input_time',\n      first_input_target_selector: 'view.first_input_target_selector',\n      first_paint_time: 'view.fpt',\n      interaction_to_next_paint: 'view.interaction_to_next_paint',\n      interaction_to_next_paint_target_selector:\n        'view.interaction_to_next_paint_target_selector',\n      resource_load_time: 'view.resource_load_time',\n      time_to_interactive: 'view.tti',\n      dom: 'view.dom',\n      dom_ready: 'view.dom_ready',\n      time_spent: 'view.time_spent',\n      first_byte: 'view.first_byte',\n      frustration_count: 'view.frustration.count',\n      custom_timings: 'view.custom_timings'\n    }\n  },\n  resource: {\n    type: RumEventType.RESOURCE,\n    tags: {\n      trace_id: '_gc.trace_id',\n      span_id: '_gc.span_id',\n      resource_id: 'resource.id',\n      resource_status: 'resource.status',\n      resource_status_group: 'resource.status_group',\n      resource_method: 'resource.method'\n    },\n    fields: {\n      duration: 'resource.duration',\n      resource_size: 'resource.size',\n      resource_url: 'resource.url',\n      resource_url_host: 'resource.url_host',\n      resource_url_path: 'resource.url_path',\n      resource_url_path_group: 'resource.url_path_group',\n      resource_url_query: 'resource.url_query',\n      resource_delivery_type: 'resource.delivery_type',\n      resource_type: 'resource.type',\n      resource_protocol: 'resource.protocol',\n      resource_encode_size: 'resource.encoded_body_size',\n      resource_decode_size: 'resource.decoded_body_size',\n      resource_transfer_size: 'resource.transfer_size',\n      resource_render_blocking_status: 'resource.render_blocking_status',\n      resource_dns: 'resource.dns',\n      resource_tcp: 'resource.tcp',\n      resource_ssl: 'resource.ssl',\n      resource_ttfb: 'resource.ttfb',\n      resource_trans: 'resource.trans',\n      resource_redirect: 'resource.redirect',\n      resource_first_byte: 'resource.firstbyte',\n      resource_dns_time: 'resource.dns_time',\n      resource_download_time: 'resource.download_time',\n      resource_first_byte_time: 'resource.first_byte_time',\n      resource_connect_time: 'resource.connect_time',\n      resource_ssl_time: 'resource.ssl_time',\n      resource_redirect_time: 'resource.redirect_time'\n    }\n  },\n  error: {\n    type: RumEventType.ERROR,\n    tags: {\n      error_id: 'error.id',\n      trace_id: '_gc.trace_id',\n      span_id: '_gc.span_id',\n      error_source: 'error.source',\n      error_type: 'error.type',\n      error_handling: 'error.handling'\n      //   resource_url: 'error.resource.url',\n      //   resource_url_host: 'error.resource.url_host',\n      //   resource_url_path: 'error.resource.url_path',\n      //   resource_url_path_group: 'error.resource.url_path_group',\n      //   resource_status: 'error.resource.status',\n      //   resource_status_group: 'error.resource.status_group',\n      //   resource_method: 'error.resource.method'\n    },\n    fields: {\n      error_message: ['string', 'error.message'],\n      error_stack: ['string', 'error.stack'],\n      error_causes: ['string', 'error.causes'],\n      error_handling_stack: ['string', 'error.handling_stack']\n    }\n  },\n  long_task: {\n    type: RumEventType.LONG_TASK,\n    tags: {\n      long_task_id: 'long_task.id'\n    },\n    fields: {\n      duration: 'long_task.duration',\n      blocking_duration: 'long_task.blocking_duration',\n      first_ui_event_timestamp: 'long_task.first_ui_event_timestamp',\n      render_start: 'long_task.render_start',\n      style_and_layout_start: 'long_task.style_and_layout_start',\n      long_task_start_time: 'long_task.start_time',\n      scripts: ['string', 'long_task.scripts']\n    }\n  },\n  action: {\n    type: RumEventType.ACTION,\n    tags: {\n      action_type: 'action.type'\n    },\n    fields: {\n      action_name: 'action.target.name',\n      duration: 'action.loading_time',\n      action_error_count: 'action.error.count',\n      action_resource_count: 'action.resource.count',\n      action_frustration_types: 'action.frustration.type',\n      action_long_task_count: 'action.long_task.count',\n      action_target: '_gc.action.target',\n      action_position: '_gc.action.position'\n    }\n  },\n  telemetry: {\n    type: 'telemetry',\n    fields: {\n      status: 'telemetry.status',\n      message: ['string', 'telemetry.message'],\n      type: 'telemetry.type',\n      error_stack: ['string', 'telemetry.error.stack'],\n      error_kind: ['string', 'telemetry.error.kind'],\n      connectivity: ['string', 'telemetry.connectivity'],\n      runtime_env: ['string', 'telemetry.runtime_env'],\n      usage: ['string', 'telemetry.usage'],\n      configuration: ['string', 'telemetry.configuration']\n    }\n  },\n  browser_log: {\n    type: RumEventType.LOGGER,\n    tags: {\n      error_source: 'error.source',\n      error_type: 'error.type',\n      error_resource_url: 'http.url',\n      error_resource_url_host: 'http.url_host',\n      error_resource_url_path: 'http.url_path',\n      error_resource_url_path_group: 'http.url_path_group',\n      error_resource_status: 'http.status_code',\n      error_resource_status_group: 'http.status_group',\n      error_resource_method: 'http.method',\n      action_id: 'user_action.id',\n      service: 'service',\n      status: 'status'\n    },\n    fields: {\n      message: ['string', 'message'],\n      error_message: ['string', 'error.message'],\n      error_stack: ['string', 'error.stack']\n    }\n  }\n}\n","import { Observable } from '../helper/observable'\nimport { createValueHistory } from '../helper/valueHistory'\nimport { relativeNow, clocksOrigin, ONE_MINUTE } from '../helper/tools'\nimport { DOM_EVENT } from '../helper/enums'\nimport {\n  addEventListener,\n  addEventListeners\n} from '../browser/addEventListener'\nimport { clearInterval, setInterval } from '../helper/timer'\nimport { SESSION_TIME_OUT_DELAY } from './sessionConstants'\nimport { startSessionStore } from './sessionStore'\n\nexport const VISIBILITY_CHECK_DELAY = ONE_MINUTE\nconst SESSION_CONTEXT_TIMEOUT_DELAY = SESSION_TIME_OUT_DELAY\nlet stopCallbacks = []\n\nexport function startSessionManager(\n  configuration,\n  productKey,\n  computeSessionState\n) {\n  const renewObservable = new Observable()\n  const expireObservable = new Observable()\n\n  const sessionStore = startSessionStore(\n    configuration.sessionStoreStrategyType,\n    productKey,\n    computeSessionState\n  )\n  stopCallbacks.push(function () {\n    return sessionStore.stop()\n  })\n\n  const sessionContextHistory = createValueHistory({\n    expireDelay: SESSION_CONTEXT_TIMEOUT_DELAY\n  })\n  stopCallbacks.push(function () {\n    return sessionContextHistory.stop()\n  })\n\n  sessionStore.renewObservable.subscribe(function () {\n    sessionContextHistory.add(buildSessionContext(), relativeNow())\n    renewObservable.notify()\n  })\n  sessionStore.expireObservable.subscribe(function () {\n    expireObservable.notify()\n    sessionContextHistory.closeActive(relativeNow())\n  })\n\n  // manager is started.\n  sessionStore.expandOrRenewSession()\n  sessionContextHistory.add(buildSessionContext(), clocksOrigin().relative)\n\n  trackActivity(function () {\n    sessionStore.expandOrRenewSession()\n  })\n  trackVisibility(function () {\n    return sessionStore.expandSession()\n  })\n  trackResume(function () {\n    sessionStore.restartSession()\n  })\n\n  function buildSessionContext() {\n    return {\n      id: sessionStore.getSession().id,\n      trackingType: sessionStore.getSession()[productKey],\n      hasError: !!sessionStore.getSession().hasError\n    }\n  }\n\n  return {\n    findSession: function (startTime, options) {\n      return sessionContextHistory.find(startTime, options)\n    },\n    renewObservable,\n    expireObservable,\n    sessionStateUpdateObservable: sessionStore.sessionStateUpdateObservable,\n    expire: sessionStore.expire,\n    updateSessionState: sessionStore.updateSessionState\n  }\n}\n\nexport function stopSessionManager() {\n  stopCallbacks.forEach(function (e) {\n    e()\n  })\n  stopCallbacks = []\n}\n\nfunction trackActivity(expandOrRenewSession) {\n  const { stop } = addEventListeners(\n    window,\n    [\n      DOM_EVENT.CLICK,\n      DOM_EVENT.TOUCH_START,\n      DOM_EVENT.KEY_DOWN,\n      DOM_EVENT.SCROLL\n    ],\n    expandOrRenewSession,\n    { capture: true, passive: true }\n  )\n  stopCallbacks.push(stop)\n}\n\nfunction trackVisibility(expandSession) {\n  const expandSessionWhenVisible = function () {\n    if (document.visibilityState === 'visible') {\n      expandSession()\n    }\n  }\n\n  const { stop } = addEventListener(\n    document,\n    DOM_EVENT.VISIBILITY_CHANGE,\n    expandSessionWhenVisible\n  )\n  stopCallbacks.push(stop)\n\n  const visibilityCheckInterval = setInterval(\n    expandSessionWhenVisible,\n    VISIBILITY_CHECK_DELAY\n  )\n  stopCallbacks.push(function () {\n    clearInterval(visibilityCheckInterval)\n  })\n}\n\nfunction trackResume(cb) {\n  const { stop } = addEventListener(window, DOM_EVENT.RESUME, cb, {\n    capture: true\n  })\n  stopCallbacks.push(stop)\n}\n","import { clocksNow, ONE_SECOND } from '../helper/tools'\nimport { ONE_MEBI_BYTE, ONE_KIBI_BYTE } from '../helper/byteUtils'\nimport { ErrorSource } from '../helper/errorTools'\nimport { setTimeout } from '../helper/timer'\nexport var MAX_ONGOING_BYTES_COUNT = 80 * ONE_KIBI_BYTE\nexport var MAX_ONGOING_REQUESTS = 32\nexport var MAX_QUEUE_BYTES_COUNT = 3 * ONE_MEBI_BYTE\nexport var MAX_BACKOFF_TIME = 256 * ONE_SECOND\nexport var INITIAL_BACKOFF_TIME = ONE_SECOND\n\nvar TransportStatus = {\n  UP: 0,\n  FAILURE_DETECTED: 1,\n  DOWN: 2\n}\n\nvar RetryReason = {\n  AFTER_SUCCESS: 0,\n  AFTER_RESUME: 1\n}\n\nexport function sendWithRetryStrategy(\n  payload,\n  state,\n  sendStrategy,\n  endpointUrl,\n  reportError\n) {\n  if (\n    state.transportStatus === TransportStatus.UP &&\n    state.queuedPayloads.size() === 0 &&\n    state.bandwidthMonitor.canHandle(payload)\n  ) {\n    send(payload, state, sendStrategy, {\n      onSuccess: function () {\n        return retryQueuedPayloads(\n          RetryReason.AFTER_SUCCESS,\n          state,\n          sendStrategy,\n          endpointUrl,\n          reportError\n        )\n      },\n      onFailure: function () {\n        state.queuedPayloads.enqueue(payload)\n        scheduleRetry(state, sendStrategy, endpointUrl, reportError)\n      }\n    })\n  } else {\n    state.queuedPayloads.enqueue(payload)\n  }\n}\n\nfunction scheduleRetry(state, sendStrategy, endpointUrl, reportError) {\n  if (state.transportStatus !== TransportStatus.DOWN) {\n    return\n  }\n  setTimeout(function () {\n    var payload = state.queuedPayloads.first()\n    send(payload, state, sendStrategy, {\n      onSuccess: function () {\n        state.queuedPayloads.dequeue()\n\n        state.currentBackoffTime = INITIAL_BACKOFF_TIME\n        retryQueuedPayloads(\n          RetryReason.AFTER_RESUME,\n          state,\n          sendStrategy,\n          endpointUrl,\n          reportError\n        )\n      },\n      onFailure: function () {\n        state.currentBackoffTime = Math.min(\n          MAX_BACKOFF_TIME,\n          state.currentBackoffTime * 2\n        )\n        scheduleRetry(state, sendStrategy, endpointUrl, reportError)\n      }\n    })\n  }, state.currentBackoffTime)\n}\n\nfunction send(payload, state, sendStrategy, responseData) {\n  var onSuccess = responseData.onSuccess\n  var onFailure = responseData.onFailure\n  state.bandwidthMonitor.add(payload)\n  sendStrategy(payload, function (response) {\n    state.bandwidthMonitor.remove(payload)\n    if (!shouldRetryRequest(response, state, payload)) {\n      state.transportStatus = TransportStatus.UP\n      onSuccess()\n    } else {\n      // do not consider transport down if another ongoing request could succeed\n      state.transportStatus =\n        state.bandwidthMonitor.ongoingRequestCount > 0\n          ? TransportStatus.FAILURE_DETECTED\n          : TransportStatus.DOWN\n      payload.retry = {\n        count: payload.retry ? payload.retry.count + 1 : 1,\n        lastFailureStatus: response.status\n      }\n      onFailure()\n    }\n  })\n}\n\nfunction retryQueuedPayloads(\n  reason,\n  state,\n  sendStrategy,\n  endpointUrl,\n  reportError\n) {\n  if (\n    reason === RetryReason.AFTER_SUCCESS &&\n    state.queuedPayloads.isFull() &&\n    !state.queueFullReported\n  ) {\n    reportError({\n      message:\n        'Reached max ' +\n        endpointUrl +\n        ' events size queued for upload: ' +\n        MAX_QUEUE_BYTES_COUNT / ONE_MEBI_BYTE +\n        'MiB',\n      source: ErrorSource.AGENT,\n      startClocks: clocksNow()\n    })\n    state.queueFullReported = true\n  }\n  var previousQueue = state.queuedPayloads\n  state.queuedPayloads = newPayloadQueue()\n  while (previousQueue.size() > 0) {\n    sendWithRetryStrategy(\n      previousQueue.dequeue(),\n      state,\n      sendStrategy,\n      endpointUrl,\n      reportError\n    )\n  }\n}\n\nfunction shouldRetryRequest(response, state, payload) {\n  if (\n    state.retryMaxSize > -1 &&\n    payload.retry &&\n    payload.retry.count > state.retryMaxSize\n  )\n    return false\n  return (\n    response.type !== 'opaque' &&\n    ((response.status === 0 && !navigator.onLine) ||\n      response.status === 408 ||\n      response.status === 429 ||\n      response.status >= 500)\n  )\n}\nexport function newRetryState(retryMaxSize) {\n  return {\n    transportStatus: TransportStatus.UP,\n    currentBackoffTime: INITIAL_BACKOFF_TIME,\n    bandwidthMonitor: newBandwidthMonitor(),\n    queuedPayloads: newPayloadQueue(),\n    queueFullReported: false,\n    retryMaxSize: retryMaxSize\n  }\n}\n\nfunction newPayloadQueue() {\n  var queue = []\n  return {\n    bytesCount: 0,\n    enqueue: function (payload) {\n      if (this.isFull()) {\n        return\n      }\n      queue.push(payload)\n      this.bytesCount += payload.bytesCount\n    },\n    first: function () {\n      return queue[0]\n    },\n    dequeue: function () {\n      var payload = queue.shift()\n      if (payload) {\n        this.bytesCount -= payload.bytesCount\n      }\n      return payload\n    },\n    size: function () {\n      return queue.length\n    },\n    isFull: function () {\n      return this.bytesCount >= MAX_QUEUE_BYTES_COUNT\n    }\n  }\n}\n\nfunction newBandwidthMonitor() {\n  return {\n    ongoingRequestCount: 0,\n    ongoingByteCount: 0,\n    canHandle: function (payload) {\n      return (\n        this.ongoingRequestCount === 0 ||\n        (this.ongoingByteCount + payload.bytesCount <=\n          MAX_ONGOING_BYTES_COUNT &&\n          this.ongoingRequestCount < MAX_ONGOING_REQUESTS)\n      )\n    },\n    add: function (payload) {\n      this.ongoingRequestCount += 1\n      this.ongoingByteCount += payload.bytesCount\n    },\n    remove: function (payload) {\n      this.ongoingRequestCount -= 1\n      this.ongoingByteCount -= payload.bytesCount\n    }\n  }\n}\n","import { newRetryState, sendWithRetryStrategy } from './sendWithRetryStrategy'\nimport { addEventListener } from '../browser/addEventListener'\nimport { monitor } from '../helper/monitor'\n// import { addTelemetryError } from '../telemetry/telemetry'\n/**\n * Use POST request without content type to:\n * - avoid CORS preflight requests\n * - allow usage of sendBeacon\n *\n * multiple elements are sent separated by \\n in order\n * to be parsed correctly without content type header\n */\nfunction addBatchPrecision(url, encoding) {\n  if (!url) return url\n  url = url + (url.indexOf('?') === -1 ? '?' : '&') + 'precision=ms'\n  if (encoding) {\n    url = url + '&encoding=' + encoding\n  }\n  return url\n}\nexport function createHttpRequest(\n  endpointUrl,\n  bytesLimit,\n  retryMaxSize,\n  reportError\n) {\n  if (retryMaxSize === undefined) {\n    retryMaxSize = -1\n  }\n  var retryState = newRetryState(retryMaxSize)\n  var sendStrategyForRetry = function (payload, onResponse) {\n    return fetchKeepAliveStrategy(endpointUrl, bytesLimit, payload, onResponse)\n  }\n\n  return {\n    send: function (payload) {\n      sendWithRetryStrategy(\n        payload,\n        retryState,\n        sendStrategyForRetry,\n        endpointUrl,\n        reportError\n      )\n    },\n    /**\n     * Since fetch keepalive behaves like regular fetch on Firefox,\n     * keep using sendBeaconStrategy on exit\n     */\n    sendOnExit: function (payload) {\n      sendBeaconStrategy(endpointUrl, bytesLimit, payload)\n    }\n  }\n}\n\nfunction sendBeaconStrategy(endpointUrl, bytesLimit, payload) {\n  var data = payload.data\n  var bytesCount = payload.bytesCount\n  var url = addBatchPrecision(endpointUrl, payload.encoding)\n  var canUseBeacon = !!navigator.sendBeacon && bytesCount < bytesLimit\n  if (canUseBeacon) {\n    try {\n      var beaconData\n      if (payload.type) {\n        beaconData = new Blob([data], {\n          type: payload.type\n        })\n      } else {\n        beaconData = data\n      }\n\n      var isQueued = navigator.sendBeacon(url, beaconData)\n\n      if (isQueued) {\n        return\n      }\n    } catch (e) {\n      reportBeaconError(e)\n    }\n  }\n  sendXHR(url, payload)\n}\nvar hasReportedBeaconError = false\n\nfunction reportBeaconError(e) {\n  if (!hasReportedBeaconError) {\n    hasReportedBeaconError = true\n    // addTelemetryError(e)\n  }\n}\nexport function fetchKeepAliveStrategy(\n  endpointUrl,\n  bytesLimit,\n  payload,\n  onResponse\n) {\n  var data = payload.data\n  var bytesCount = payload.bytesCount\n  var url = addBatchPrecision(endpointUrl, payload.encoding)\n  var canUseKeepAlive = isKeepAliveSupported() && bytesCount < bytesLimit\n  if (canUseKeepAlive) {\n    var fetchOption = {\n      method: 'POST',\n      body: data,\n      keepalive: true,\n      mode: 'cors'\n    }\n    if (payload.type) {\n      fetchOption.headers = {\n        'Content-Type': payload.type\n      }\n    }\n    fetch(url, fetchOption).then(\n      monitor(function (response) {\n        if (typeof onResponse === 'function') {\n          onResponse({ status: response.status, type: response.type })\n        }\n      }),\n      monitor(function () {\n        // failed to queue the request\n        sendXHR(url, payload, onResponse)\n      })\n    )\n  } else {\n    sendXHR(url, payload, onResponse)\n  }\n}\n\nfunction isKeepAliveSupported() {\n  // Request can throw, cf https://developer.mozilla.org/en-US/docs/Web/API/Request/Request#errors\n  try {\n    return window.Request && 'keepalive' in new Request('http://a')\n  } catch {\n    return false\n  }\n}\n\nfunction sendXHR(url, payload, onResponse) {\n  const data = payload.data\n  const request = new XMLHttpRequest()\n  request.open('POST', url, true)\n  if (data instanceof Blob) {\n    request.setRequestHeader('Content-Type', data.type)\n  } else if (payload.type) {\n    request.setRequestHeader('Content-Type', payload.type)\n  }\n\n  addEventListener(\n    request,\n    'loadend',\n    function () {\n      if (typeof onResponse === 'function') {\n        onResponse({ status: request.status })\n      }\n    },\n    {\n      once: true\n    }\n  )\n  request.send(data)\n}\n","import { jsonStringify } from './jsonStringify'\nimport { isString, isNumber } from '../tools'\nexport function escapeRowData(str) {\n  if (typeof str === 'object' && str) {\n    str = jsonStringify(str)\n  } else if (!isString(str)) {\n    return str\n  }\n  var reg = /[\\s=,\"]/g\n  return String(str).replace(reg, function (word) {\n    return '\\\\' + word\n  })\n}\n\nexport function escapeJsonValue(value, isTag) {\n  if (typeof value === 'object' && value) {\n    value = jsonStringify(value)\n  } else if (isTag) {\n    // tag  json  \n    value = '' + value\n  }\n\n  return value\n}\n\nexport function escapeFieldValueStr(str) {\n  return '\"' + str.replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"') + '\"'\n}\nexport function escapeRowField(value) {\n  if (typeof value === 'object' && value) {\n    return escapeFieldValueStr(jsonStringify(value))\n  } else if (isString(value)) {\n    return escapeFieldValueStr(value)\n  } else {\n    return value\n  }\n}\n","import { display } from '../helper/display'\nimport {\n  values,\n  findByPath,\n  each,\n  isNumber,\n  isArray,\n  extend,\n  isString,\n  isEmptyObject,\n  isObject\n} from '../helper/tools'\nimport {\n  escapeJsonValue,\n  escapeRowField,\n  escapeRowData\n} from '../helper/serialisation/rowData'\nimport { commonTags, dataMap, commonFields } from '../dataMap'\nimport { RumEventType } from '../helper/enums'\nimport { computeBytesCount } from '../helper/byteUtils'\nimport { isPageExitReason } from '../browser/pageExitObservable'\nimport { jsonStringify } from '../helper/serialisation/jsonStringify'\n// https://en.wikipedia.org/wiki/UTF-8\n// eslint-disable-next-line no-control-regex\nvar CUSTOM_KEYS = 'custom_keys'\nexport var processedMessageByDataMap = function (message) {\n  if (!message || !message.type)\n    return {\n      rowStr: '',\n      rowData: undefined\n    }\n\n  var rowData = { tags: {}, fields: {} }\n  var hasFileds = false\n  var rowStr = ''\n  each(dataMap, function (value, key) {\n    if (value.type === message.type) {\n      rowStr += key + ','\n      rowData.measurement = key\n      var tagsStr = []\n      var tags = extend({}, commonTags, value.tags)\n      var filterFileds = ['date', 'type', CUSTOM_KEYS] // datamapfieldstags\n      each(tags, function (value_path, _key) {\n        var _value = findByPath(message, value_path)\n        filterFileds.push(_key)\n        if (_value || isNumber(_value)) {\n          rowData.tags[_key] = escapeJsonValue(_value, true)\n          tagsStr.push(escapeRowData(_key) + '=' + escapeRowData(_value))\n        }\n      })\n\n      var fieldsStr = []\n      var fields = extend({}, commonFields, value.fields)\n      each(fields, function (_value, _key) {\n        if (isArray(_value) && _value.length === 2) {\n          var value_path = _value[1]\n          var _valueData = findByPath(message, value_path)\n          filterFileds.push(_key)\n          if (_valueData !== undefined && _valueData !== null) {\n            rowData.fields[_key] = escapeJsonValue(_valueData) // \n            fieldsStr.push(\n              escapeRowData(_key) + '=' + escapeRowField(_valueData)\n            )\n          }\n        } else if (isString(_value)) {\n          var _valueData = findByPath(message, _value)\n          filterFileds.push(_key)\n          if (_valueData !== undefined && _valueData !== null) {\n            rowData.fields[_key] = escapeJsonValue(_valueData) // \n            fieldsStr.push(\n              escapeRowData(_key) + '=' + escapeRowField(_valueData)\n            )\n          }\n        }\n      })\n      if (\n        message.context &&\n        isObject(message.context) &&\n        !isEmptyObject(message.context)\n      ) {\n        // tag field\n        var _tagKeys = []\n        each(message.context, function (_value, _key) {\n          // tag\n          if (filterFileds.indexOf(_key) > -1) return\n          filterFileds.push(_key)\n          if (_value !== undefined && _value !== null) {\n            _tagKeys.push(_key)\n            rowData.fields[_key] = escapeJsonValue(_value) // \n            fieldsStr.push(escapeRowData(_key) + '=' + escapeRowField(_value))\n          }\n        })\n        if (_tagKeys.length) {\n          rowData.fields[CUSTOM_KEYS] = escapeJsonValue(_tagKeys)\n          fieldsStr.push(\n            escapeRowData(CUSTOM_KEYS) + '=' + escapeRowField(_tagKeys)\n          )\n        }\n      }\n      if (message.type === RumEventType.LOGGER) {\n        // \n        each(message, function (value, key) {\n          if (\n            filterFileds.indexOf(key) === -1 &&\n            value !== undefined &&\n            value !== null\n          ) {\n            rowData.fields[key] = escapeJsonValue(value) // \n            fieldsStr.push(escapeRowData(key) + '=' + escapeRowField(value))\n          }\n        })\n      }\n      if (tagsStr.length) {\n        rowStr += tagsStr.join(',')\n      }\n      if (fieldsStr.length) {\n        rowStr += ' '\n        rowStr += fieldsStr.join(',')\n        hasFileds = true\n      }\n      rowStr = rowStr + ' ' + message.date\n      rowData.time = message.date // \n    }\n  })\n  return {\n    rowStr: hasFileds ? rowStr : '',\n    rowData: hasFileds ? rowData : undefined\n  }\n}\n\nexport function createBatch(options) {\n  var encoder = options.encoder\n  var request = options.request\n  var messageBytesLimit = options.messageBytesLimit\n  var sendContentTypeByJson = options.sendContentTypeByJson\n  var flushController = options.flushController\n  var upsertBuffer = {}\n  var flushSubscription = flushController.flushObservable.subscribe(function (\n    event\n  ) {\n    flush(event)\n  })\n  function getMessageText(messages, isEmpty = false) {\n    if (sendContentTypeByJson) {\n      if (isEmpty) {\n        return '[' + messages.join(',')\n      } else {\n        return ',' + messages.join(',')\n      }\n    } else {\n      if (isEmpty) {\n        return messages.join('\\n')\n      } else {\n        return '\\n' + messages.join('\\n')\n      }\n    }\n  }\n  function push(serializedMessage, estimatedMessageBytesCount, key) {\n    flushController.notifyBeforeAddMessage(estimatedMessageBytesCount)\n\n    if (key !== undefined) {\n      upsertBuffer[key] = serializedMessage\n      flushController.notifyAfterAddMessage()\n    } else {\n      encoder.write(\n        getMessageText([serializedMessage], encoder.isEmpty()),\n        function (realMessageBytesCount) {\n          flushController.notifyAfterAddMessage(\n            realMessageBytesCount - estimatedMessageBytesCount\n          )\n        }\n      )\n    }\n  }\n\n  function hasMessageFor(key) {\n    return key !== undefined && upsertBuffer[key] !== undefined\n  }\n\n  function remove(key) {\n    var removedMessage = upsertBuffer[key]\n    delete upsertBuffer[key]\n    var messageBytesCount = encoder.estimateEncodedBytesCount(removedMessage)\n    flushController.notifyAfterRemoveMessage(messageBytesCount)\n  }\n  function process(message) {\n    var processedMessage = ''\n    if (sendContentTypeByJson) {\n      processedMessage = jsonStringify(\n        processedMessageByDataMap(message).rowData\n      )\n    } else {\n      processedMessage = processedMessageByDataMap(message).rowStr\n    }\n    return processedMessage\n  }\n  function addOrUpdate(message, key) {\n    const serializedMessage = process(message)\n\n    const estimatedMessageBytesCount =\n      encoder.estimateEncodedBytesCount(serializedMessage)\n\n    if (estimatedMessageBytesCount >= messageBytesLimit) {\n      display.warn(\n        `Discarded a message whose size was bigger than the maximum allowed size ${messageBytesLimit}KB.`\n      )\n      return\n    }\n\n    if (hasMessageFor(key)) {\n      remove(key)\n    }\n\n    push(serializedMessage, estimatedMessageBytesCount, key)\n  }\n\n  function flush(event) {\n    var upsertMessages = values(upsertBuffer).join(\n      sendContentTypeByJson ? ',' : '\\n'\n    )\n    upsertBuffer = {}\n\n    var isPageExit = isPageExitReason(event.reason)\n    var send = isPageExit ? request.sendOnExit : request.send\n\n    if (\n      isPageExit &&\n      // Note: checking that the encoder is async is not strictly needed, but it's an optimization:\n      // if the encoder is async we need to send two requests in some cases (one for encoded data\n      // and the other for non-encoded data). But if it's not async, we don't have to worry about\n      // it and always send a single request.\n      encoder.isAsync\n    ) {\n      // json \n      var encoderResult = encoder.finishSync()\n\n      // Send encoded messages\n      if (encoderResult.outputBytesCount) {\n        send(formatPayloadFromEncoder(encoderResult, sendContentTypeByJson))\n      }\n\n      // Send messages that are not yet encoded at this point\n      var pendingMessages = [encoderResult.pendingData, upsertMessages]\n        .filter(Boolean)\n        .join('\\n')\n\n      if (pendingMessages) {\n        send({\n          data: pendingMessages,\n          bytesCount: computeBytesCount(pendingMessages)\n        })\n      }\n    } else {\n      if (upsertMessages) {\n        var text = getMessageText([upsertMessages], encoder.isEmpty())\n        if (sendContentTypeByJson) {\n          text += ']'\n        }\n        encoder.write(text)\n      } else {\n        if (sendContentTypeByJson) {\n          encoder.write(']')\n        }\n      }\n      encoder.finish(function (encoderResult) {\n        send(formatPayloadFromEncoder(encoderResult))\n      })\n    }\n  }\n\n  return {\n    flushController: flushController,\n    add: addOrUpdate,\n    upsert: addOrUpdate,\n    stop: flushSubscription.unsubscribe\n  }\n}\n\nfunction formatPayloadFromEncoder(encoderResult, sendContentTypeByJson) {\n  var data\n  if (typeof encoderResult.output === 'string') {\n    data = encoderResult.output\n  } else {\n    data = new Blob([encoderResult.output], {\n      // This will set the 'Content-Type: text/plain' header. Reasoning:\n      // * The intake rejects the request if there is no content type.\n      // * The browser will issue CORS preflight requests if we set it to 'application/json', which\n      // could induce higher intake load (and maybe has other impacts).\n      // * Also it's not quite JSON, since we are concatenating multiple JSON objects separated by\n      // new lines.\n      type: 'text/plain'\n    })\n  }\n\n  return {\n    data: data,\n    type: sendContentTypeByJson ? 'application/json;UTF-8' : undefined,\n    bytesCount: encoderResult.outputBytesCount,\n    encoding: encoderResult.encoding\n  }\n}\n","import { Observable } from '../helper/observable'\nimport { clearTimeout, setTimeout } from '../helper/timer'\n\n// type FlushReason = PageExitReason | 'duration_limit' | 'bytes_limit' | 'messages_limit' | 'session_expire'\n\n/**\n * Returns a \"flush controller\", responsible of notifying when flushing a pool of pending data needs\n * to happen. The implementation is designed to support both synchronous and asynchronous usages,\n * but relies on invariants described in each method documentation to keep a coherent state.\n */\nexport function createFlushController({\n  messagesLimit,\n  bytesLimit,\n  durationLimit,\n  pageExitObservable,\n  sessionExpireObservable\n}) {\n  pageExitObservable.subscribe(function (event) {\n    return flush(event.reason)\n  })\n  sessionExpireObservable.subscribe(function () {\n    return flush('session_expire')\n  })\n  var flushObservable = new Observable(function () {\n    return function () {\n      pageExitSubscription.unsubscribe()\n      sessionExpireSubscription.unsubscribe()\n    }\n  })\n\n  var currentBytesCount = 0\n  var currentMessagesCount = 0\n\n  function flush(flushReason) {\n    if (currentMessagesCount === 0) {\n      return\n    }\n\n    var messagesCount = currentMessagesCount\n    var bytesCount = currentBytesCount\n\n    currentMessagesCount = 0\n    currentBytesCount = 0\n    cancelDurationLimitTimeout()\n\n    flushObservable.notify({\n      reason: flushReason,\n      messagesCount: messagesCount,\n      bytesCount: bytesCount\n    })\n  }\n\n  var durationLimitTimeoutId\n  function scheduleDurationLimitTimeout() {\n    if (durationLimitTimeoutId === undefined) {\n      durationLimitTimeoutId = setTimeout(function () {\n        flush('duration_limit')\n      }, durationLimit)\n    }\n  }\n\n  function cancelDurationLimitTimeout() {\n    clearTimeout(durationLimitTimeoutId)\n    durationLimitTimeoutId = undefined\n  }\n\n  return {\n    flushObservable: flushObservable,\n    getMessagesCount: function () {\n      return currentMessagesCount\n    },\n\n    /**\n     * Notifies that a message will be added to a pool of pending messages waiting to be flushed.\n     *\n     * This function needs to be called synchronously, right before adding the message, so no flush\n     * event can happen after `notifyBeforeAddMessage` and before adding the message.\n     */\n    notifyBeforeAddMessage: function (estimatedMessageBytesCount) {\n      if (currentBytesCount + estimatedMessageBytesCount >= bytesLimit) {\n        flush('bytes_limit')\n      }\n      // Consider the message to be added now rather than in `notifyAfterAddMessage`, because if no\n      // message was added yet and `notifyAfterAddMessage` is called asynchronously, we still want\n      // to notify when a flush is needed (for example on page exit).\n      currentMessagesCount += 1\n      currentBytesCount += estimatedMessageBytesCount\n      scheduleDurationLimitTimeout()\n    },\n\n    /**\n     * Notifies that a message *was* added to a pool of pending messages waiting to be flushed.\n     *\n     * This function can be called asynchronously after the message was added, but in this case it\n     * should not be called if a flush event occurred in between.\n     */\n    notifyAfterAddMessage: function (messageBytesCountDiff) {\n      if (messageBytesCountDiff === undefined) {\n        messageBytesCountDiff = 0\n      }\n      currentBytesCount += messageBytesCountDiff\n\n      if (currentMessagesCount >= messagesLimit) {\n        flush('messages_limit')\n      } else if (currentBytesCount >= bytesLimit) {\n        flush('bytes_limit')\n      }\n    },\n\n    /**\n     * Notifies that a message was removed from a pool of pending messages waiting to be flushed.\n     *\n     * This function needs to be called synchronously, right after removing the message, so no flush\n     * event can happen after removing the message and before `notifyAfterRemoveMessage`.\n     *\n     * @param messageBytesCount: the message bytes count that was added to the pool. Should\n     * correspond to the sum of bytes counts passed to `notifyBeforeAddMessage` and\n     * `notifyAfterAddMessage`.\n     */\n    notifyAfterRemoveMessage: function (messageBytesCount) {\n      currentBytesCount -= messageBytesCount\n      currentMessagesCount -= 1\n      if (currentMessagesCount === 0) {\n        cancelDurationLimitTimeout()\n      }\n    }\n  }\n}\n","import { createBatch } from './batch'\nimport { createHttpRequest } from './httpRequest'\nimport { createFlushController } from './flushController'\nexport function startBatchWithReplica(\n  configuration,\n  primary,\n  reportError,\n  pageExitObservable,\n  sessionExpireObservable,\n  batchFactoryImp\n) {\n  if (batchFactoryImp === undefined) {\n    batchFactoryImp = createBatch\n  }\n  var primaryBatch = createBatchFromConfig(configuration, primary)\n\n  function createBatchFromConfig(configuration, batchConfiguration) {\n    return batchFactoryImp({\n      encoder: batchConfiguration.encoder,\n      request: createHttpRequest(\n        batchConfiguration.endpoint,\n        configuration.batchBytesLimit,\n        configuration.retryMaxSize,\n        reportError\n      ),\n      flushController: createFlushController({\n        messagesLimit: configuration.batchMessagesLimit,\n        bytesLimit: configuration.batchBytesLimit,\n        durationLimit: configuration.flushTimeout,\n        pageExitObservable: pageExitObservable,\n        sessionExpireObservable: sessionExpireObservable\n      }),\n      messageBytesLimit: configuration.messageBytesLimit,\n      sendContentTypeByJson: configuration.sendContentTypeByJson\n    })\n  }\n  return {\n    flushObservable: primaryBatch.flushController.flushObservable,\n    add: function (message) {\n      primaryBatch.add(message)\n    },\n    upsert: function (message, key) {\n      primaryBatch.upsert(message, key)\n    },\n\n    stop: function () {\n      primaryBatch.stop()\n    }\n  }\n}\n","import { getGlobalObject } from '../init'\n\nfunction getEventBridgeGlobal() {\n  // return getGlobalObject().FTWebViewJavascriptBridge\n  return null;\n}\nexport function getEventBridge() {\n  var eventBridgeGlobal = getEventBridgeGlobal()\n\n  if (!eventBridgeGlobal) {\n    return\n  }\n\n  return {\n    getCapabilities() {\n      return JSON.parse(\n        (eventBridgeGlobal.getCapabilities &&\n          eventBridgeGlobal.getCapabilities()) ||\n          '[]'\n      )\n    },\n    getPrivacyLevel() {\n      return (\n        eventBridgeGlobal.getPrivacyLevel && eventBridgeGlobal.getPrivacyLevel()\n      )\n    },\n    getAllowedWebViewHosts() {\n      return JSON.parse(\n        (eventBridgeGlobal.getAllowedWebViewHosts &&\n          eventBridgeGlobal.getAllowedWebViewHosts()) ||\n          '[]'\n      )\n    },\n    send(eventType, event, viewId) {\n      const view = viewId ? { id: viewId } : undefined\n      eventBridgeGlobal.sendEvent(\n        JSON.stringify({ name: eventType, data: event, view })\n      )\n    }\n  }\n}\nexport const BridgeCapability = {\n  RECORDS: 'records'\n}\nexport function bridgeSupports(capability) {\n  const bridge = getEventBridge()\n\n  return !!bridge && bridge.getCapabilities().includes(capability)\n}\nexport function canUseEventBridge(\n  currentHost = getGlobalObject().location?.hostname\n) {\n  const eventBridgeGlobal = getEventBridgeGlobal()\n  if (\n    eventBridgeGlobal &&\n    eventBridgeGlobal.getAllowedWebViewHosts === undefined\n  ) {\n    return true\n  }\n  if (\n    eventBridgeGlobal &&\n    eventBridgeGlobal.getAllowedWebViewHosts &&\n    eventBridgeGlobal.getAllowedWebViewHosts() === null\n  ) {\n    return true\n  }\n  var bridge = getEventBridge()\n  return (\n    !!bridge &&\n    bridge\n      .getAllowedWebViewHosts()\n      .some(\n        (allowedHost) =>\n          currentHost === allowedHost || currentHost.endsWith(`.${allowedHost}`)\n      )\n  )\n}\n","export { createHttpRequest } from './httpRequest'\nexport { createBatch, processedMessageByDataMap } from './batch'\nexport { startBatchWithReplica } from './startBatchWithReplica'\nexport { createFlushController } from './flushController'\nexport {\n  getEventBridge,\n  canUseEventBridge,\n  bridgeSupports,\n  BridgeCapability\n} from './eventBridge'\n","import { getCookie } from '../browser/cookie'\n\nexport var SYNTHETICS_TEST_ID_COOKIE_NAME = 'guance-synthetics-public-id'\nexport var SYNTHETICS_RESULT_ID_COOKIE_NAME = 'guance-synthetics-result-id'\nexport var SYNTHETICS_INJECTS_RUM_COOKIE_NAME = 'guance-synthetics-injects-rum'\n\nexport function willSyntheticsInjectRum() {\n  return Boolean(\n    window._GUANCE_SYNTHETICS_INJECTS_RUM ||\n      getCookie(SYNTHETICS_INJECTS_RUM_COOKIE_NAME)\n  )\n}\n\nexport function getSyntheticsTestId() {\n  var value =\n    window._GUANCE_SYNTHETICS_PUBLIC_ID ||\n    getCookie(SYNTHETICS_TEST_ID_COOKIE_NAME)\n  return typeof value === 'string' ? value : undefined\n}\n\nexport function getSyntheticsResultId() {\n  var value =\n    window._GUANCE_SYNTHETICS_RESULT_ID ||\n    getCookie(SYNTHETICS_RESULT_ID_COOKIE_NAME)\n  return typeof value === 'string' ? value : undefined\n}\n","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import { deepClone, getType } from '../tools'\nimport { sanitize } from '../sanitize'\nimport { Observable } from '../observable'\nimport { display } from '../display'\n\nfunction ensureProperties(context, propertiesConfig, name) {\n  const newContext = { ...context }\n\n  for (const [key, { required, type }] of Object.entries(propertiesConfig)) {\n    /**\n     * Ensure specified properties are strings as defined here:\n     */\n    if (type === 'string' && key in newContext) {\n      newContext[key] = String(newContext[key])\n    }\n\n    if (required && !(key in context)) {\n      display.warn(\n        `The property ${key} of ${name} context is required; context will not be sent to the intake.`\n      )\n    }\n  }\n\n  return newContext\n}\n\nexport function createContextManager(\n  name = '',\n  { customerDataTracker, propertiesConfig = {} } = {}\n) {\n  let context = {}\n  const changeObservable = new Observable()\n\n  const contextManager = {\n    getContext: () => deepClone(context),\n\n    setContext: (newContext) => {\n      if (getType(newContext) === 'object') {\n        context = sanitize(ensureProperties(newContext, propertiesConfig, name))\n        customerDataTracker?.updateCustomerData(context)\n      } else {\n        contextManager.clearContext()\n      }\n      changeObservable.notify()\n    },\n\n    setContextProperty: (key, property) => {\n      context[key] = sanitize(\n        ensureProperties({ [key]: property }, propertiesConfig, name)[key]\n      )\n      customerDataTracker?.updateCustomerData(context)\n      changeObservable.notify()\n    },\n\n    removeContextProperty: (key) => {\n      delete context[key]\n      customerDataTracker?.updateCustomerData(context)\n      ensureProperties(context, propertiesConfig, name)\n      changeObservable.notify()\n    },\n\n    clearContext: () => {\n      context = {}\n      customerDataTracker?.resetCustomerData()\n      changeObservable.notify()\n    },\n\n    changeObservable\n  }\n  return contextManager\n}\n","// RUM and logs batch bytes limit is 16KB\n// ensure that we leave room for other event attributes and maintain a decent amount of event per batch\n// (3KB (customer data) + 1KB (other attributes)) * 4 (events per batch) = 16KB\n\nexport var CustomerDataType = {\n  FeatureFlag: 'feature flag evaluation',\n  User: 'user',\n  GlobalContext: 'global context',\n  View: 'view'\n}\n","import { DOM_EVENT } from '../enums'\nimport { map, extend2Lev, isString } from '../tools'\nimport { addEventListener } from '../../browser/addEventListener'\nvar CONTEXT_STORE_KEY_PREFIX = '_gc_s'\n\nvar storageListeners = []\n\nexport function storeContextManager(\n  configuration,\n  contextManager,\n  productKey,\n  customerDataType\n) {\n  var storageKey = buildStorageKey(configuration, productKey, customerDataType)\n\n  storageListeners.push(\n    addEventListener(window, DOM_EVENT.STORAGE, function (params) {\n      if (storageKey === params.key) {\n        synchronizeWithStorage()\n      }\n    })\n  )\n  contextManager.changeObservable.subscribe(dumpToStorage)\n  contextManager.setContext(\n    extend2Lev(getFromStorage(), contextManager.getContext())\n  )\n  function synchronizeWithStorage() {\n    contextManager.setContext(getFromStorage())\n  }\n  function dumpToStorage() {\n    localStorage.setItem(\n      storageKey,\n      JSON.stringify(contextManager.getContext())\n    )\n  }\n  function getFromStorage() {\n    const rawContext = localStorage.getItem(storageKey)\n    return rawContext !== null ? JSON.parse(rawContext) : {}\n  }\n  return contextManager\n}\n\nexport function buildStorageKey(configuration, productKey, customerDataType) {\n  // storeContextsKey\n  if (\n    configuration.storeContextsKey &&\n    isString(configuration.storeContextsKey)\n  ) {\n    return (\n      CONTEXT_STORE_KEY_PREFIX +\n      '_' +\n      productKey +\n      '_' +\n      customerDataType +\n      '_' +\n      configuration.storeContextsKey\n    )\n  } else {\n    return CONTEXT_STORE_KEY_PREFIX + '_' + productKey + '_' + customerDataType\n  }\n}\n\nexport function removeStorageListeners() {\n  map(storageListeners, function (listener) {\n    listener.stop()\n  })\n}\n","import { ONE_KIBI_BYTE, computeBytesCount } from '../byteUtils'\nimport { throttle, isEmptyObject } from '../tools'\nimport { jsonStringify } from './jsonStringify'\nimport { display } from '../display'\n\n// RUM and logs batch bytes limit is 16KB\n// ensure that we leave room for other event attributes and maintain a decent amount of event per batch\n// (3KB (customer data) + 1KB (other attributes)) * 4 (events per batch) = 16KB\nexport const CUSTOMER_DATA_BYTES_LIMIT = 3 * ONE_KIBI_BYTE\n\n// We observed that the compression ratio is around 8 in general, but we also want to keep a margin\n// because some data might not be compressed (ex: last view update on page exit). We chose 16KiB\n// because it is also the limit of the 'batchBytesCount' that we use for RUM and Logs data, but this\n// is a bit arbitrary.\nexport const CUSTOMER_COMPRESSED_DATA_BYTES_LIMIT = 16 * ONE_KIBI_BYTE\n\nexport const BYTES_COMPUTATION_THROTTLING_DELAY = 200\n\nexport const CustomerDataCompressionStatus = {\n  Unknown: 0,\n  Enabled: 1,\n  Disabled: 2\n}\n\nexport function createCustomerDataTrackerManager(\n  compressionStatus = CustomerDataCompressionStatus.Disabled\n) {\n  const customerDataTrackers = new Map()\n\n  let alreadyWarned = false\n  function checkCustomerDataLimit(initialBytesCount = 0) {\n    if (\n      alreadyWarned ||\n      compressionStatus === CustomerDataCompressionStatus.Unknown\n    ) {\n      return\n    }\n\n    const bytesCountLimit =\n      compressionStatus === CustomerDataCompressionStatus.Disabled\n        ? CUSTOMER_DATA_BYTES_LIMIT\n        : CUSTOMER_COMPRESSED_DATA_BYTES_LIMIT\n\n    let bytesCount = initialBytesCount\n    customerDataTrackers.forEach((tracker) => {\n      bytesCount += tracker.getBytesCount()\n    })\n\n    if (bytesCount > bytesCountLimit) {\n      displayCustomerDataLimitReachedWarning(bytesCountLimit)\n      alreadyWarned = true\n    }\n  }\n\n  return {\n    /**\n     * Creates a detached tracker. The manager will not store a reference to that tracker, and the\n     * bytes count will be counted independently from other detached trackers.\n     *\n     * This is particularly useful when we don't know when the tracker will be unused, so we don't\n     * leak memory (ex: when used in Logger instances).\n     */\n    createDetachedTracker: () => {\n      const tracker = createCustomerDataTracker(() =>\n        checkCustomerDataLimit(tracker.getBytesCount())\n      )\n      return tracker\n    },\n\n    /**\n     * Creates a tracker if it doesn't exist, and returns it.\n     */\n    getOrCreateTracker: (type) => {\n      if (!customerDataTrackers.has(type)) {\n        customerDataTrackers.set(\n          type,\n          createCustomerDataTracker(checkCustomerDataLimit)\n        )\n      }\n      return customerDataTrackers.get(type)\n    },\n\n    setCompressionStatus: (newCompressionStatus) => {\n      if (compressionStatus === CustomerDataCompressionStatus.Unknown) {\n        compressionStatus = newCompressionStatus\n        checkCustomerDataLimit()\n      }\n    },\n\n    getCompressionStatus: () => compressionStatus,\n\n    stop: () => {\n      customerDataTrackers.forEach((tracker) => tracker.stop())\n      customerDataTrackers.clear()\n    }\n  }\n}\n\nexport function createCustomerDataTracker(checkCustomerDataLimit) {\n  let bytesCountCache = 0\n\n  // Throttle the bytes computation to minimize the impact on performance.\n  // Especially useful if the user call context APIs synchronously multiple times in a row\n  const {\n    throttled: computeBytesCountThrottled,\n    cancel: cancelComputeBytesCount\n  } = throttle((context) => {\n    bytesCountCache = computeBytesCount(jsonStringify(context))\n    checkCustomerDataLimit()\n  }, BYTES_COMPUTATION_THROTTLING_DELAY)\n\n  const resetBytesCount = () => {\n    cancelComputeBytesCount()\n    bytesCountCache = 0\n  }\n\n  return {\n    updateCustomerData: (context) => {\n      if (isEmptyObject(context)) {\n        resetBytesCount()\n      } else {\n        computeBytesCountThrottled(context)\n      }\n    },\n    resetCustomerData: resetBytesCount,\n    getBytesCount: () => bytesCountCache,\n    stop: () => {\n      cancelComputeBytesCount()\n    }\n  }\n}\n\nfunction displayCustomerDataLimitReachedWarning(bytesCountLimit) {\n  display.warn(\n    `Customer data exceeds the recommended ${\n      bytesCountLimit / ONE_KIBI_BYTE\n    }KiB threshold.`\n  )\n}\n","import { computeBytesCount } from './byteUtils'\n\nexport function createIdentityEncoder() {\n  var output = ''\n  var outputBytesCount = 0\n\n  return {\n    isAsync: false,\n\n    isEmpty: function () {\n      return !output\n    },\n\n    write: function (data, callback) {\n      var additionalEncodedBytesCount = computeBytesCount(data)\n      outputBytesCount += additionalEncodedBytesCount\n      output += data\n      if (callback) {\n        callback(additionalEncodedBytesCount)\n      }\n    },\n\n    finish: function (callback) {\n      callback(this.finishSync())\n    },\n\n    finishSync: function () {\n      var result = {\n        output: output,\n        outputBytesCount: outputBytesCount,\n        rawBytesCount: outputBytesCount,\n        pendingData: ''\n      }\n      output = ''\n      outputBytesCount = 0\n      return result\n    },\n\n    estimateEncodedBytesCount: function (data) {\n      return data.length\n    }\n  }\n}\n","import { display } from '../helper/display'\nimport { assign, getType, each } from '../helper/tools'\n\n/**\n * Clone input data and ensure known user properties (id, name, email)\n * are strings, as defined here:\n */\nexport function sanitizeUser(newUser) {\n  // We shallow clone only to prevent mutation of user data.\n  var user = assign({}, newUser)\n  var keys = ['id', 'name', 'email']\n  each(keys, function (key) {\n    if (key in user) {\n      user[key] = String(user[key])\n    }\n  })\n\n  return user\n}\n\n/**\n * Simple check to ensure user is valid\n */\nexport function checkUser(newUser) {\n  var isValid = getType(newUser) === 'object'\n  if (!isValid) {\n    display.error('Unsupported user:', newUser)\n  }\n  return isValid\n}\n","export * from './user';","// ie11 supports WeakMap but not WeakSet\nvar PLACEHOLDER = 1\nexport function WeakSet(initialValues) {\n  this.map = new WeakMap()\n  if (initialValues) {\n    initialValues.forEach(function (value) {\n      this.map.set(value, PLACEHOLDER)\n    })\n  }\n}\nWeakSet.prototype.add = function (value) {\n  this.map.set(value, PLACEHOLDER)\n  return this\n}\nWeakSet.prototype.delete = function (value) {\n  return this.map.delete(value)\n}\nWeakSet.prototype.has = function (value) {\n  return this.map.has(value)\n}\n","import { display } from './display'\n\nexport function displayAlreadyInitializedError(sdkName, initConfiguration) {\n  if (!initConfiguration.silentMultipleInit) {\n    display.error(sdkName + ' is already initialized.')\n  }\n}\n","export * from './helper/boundedBuffer'\nexport * from './helper/valueHistory'\nexport * from './helper/deviceInfo'\nexport * from './helper/enums'\nexport * from './helper/instrumentMethod'\nexport * from './helper/errorTools'\nexport * from './helper/byteUtils'\nexport * from './error/trackRuntimeError'\n// export * from './console/consoleObservable'\n// export * from './report/reportObservable'\nexport * from './helper/display'\nexport * from './helper/monitor'\nexport * from './helper/sanitize'\nexport * from './helper/lifeCycle'\nexport * from './helper/limitModification'\nexport * from './helper/createEventRateLimiter'\nexport * from './helper/observable'\nexport * from './helper/tools'\nexport * from './helper/urlPolyfill'\n// export * from './helper/mobileUtil'\nexport * from './helper/getZoneJsOriginalValue'\nexport * from './helper/timer'\nexport * from './helper/readBytesFromStream'\nexport * from './helper/requestIdleCallback'\nexport * from './helper/taskQueue'\nexport * from './tracekit'\nexport * from './configuration/configuration'\nexport * from './configuration/transportConfiguration'\n// export * from './configuration/remoteConfiguration'\nexport * from './browser/cookie'\nexport * from './browser/fetchObservable'\nexport * from './browser/xhrObservable'\nexport * from './browser/pageExitObservable'\nexport * from './browser/htmlDomUtils'\nexport * from './browser/addEventListener'\nexport * from './browser/runOnReadyState'\nexport * from './browser/scroll'\n\nexport * from './dataMap'\nexport * from './init'\nexport {\n  startSessionManager,\n  stopSessionManager\n} from './session/sessionManagement'\nexport {\n  SESSION_TIME_OUT_DELAY,\n  SESSION_STORE_KEY\n} from './session/sessionConstants'\nexport { STORAGE_POLL_DELAY } from './session/sessionStore'\nexport * from './transport'\nexport * from './synthetics/syntheticsWorkerValues'\n\nexport * from './helper/serialisation/contextManager'\nexport * from './helper/serialisation/const'\nexport * from './helper/serialisation/jsonStringify'\nexport * from './helper/serialisation/rowData'\nexport * from './helper/serialisation/storedContextManager'\nexport * from './helper/serialisation/customerDataTracker'\nexport * from './helper/encoder'\nexport * from './user'\nexport * from './helper/polyfills'\n// export * from './telemetry/telemetry'\nexport * from './helper/catchUserErrors'\nexport * from './helper/connectivity'\nexport * from './helper/displayAlreadyInitializedError'\n","import {\n  performDraw,\n  startSessionManager,\n  LifeCycleEventType,\n  noop,\n  Observable,\n  timeStampNow,\n  bridgeSupports,\n  BridgeCapability\n} from '@cloudcare/browser-core'\n\nexport var RUM_SESSION_KEY = 'rum'\n\nexport var RumSessionPlan = {\n  WITHOUT_SESSION_REPLAY: 1,\n  WITH_SESSION_REPLAY: 2,\n  WITH_ERROR_SESSION_REPLAY: 3\n}\nexport const ERROR_SESSION = '1'\nexport var RumTrackingType = {\n  NOT_TRACKED: '0',\n  // Note: the \"tracking type\" value (stored in the session cookie) does not match the \"session\n  // plan\" value (sent in RUM events). This is expected, and was done to keep retrocompatibility\n  // with active sessions when upgrading the SDK.\n\n  TRACKED_WITH_SESSION_AND_WITH_SESSION_REPLAY: '1',\n  TRACKED_WITH_SESSION_AND_WITHOUT_SESSION_REPLAY: '2',\n  TRACKED_WITH_SESSION_AND_WITH_ERROR_SESSION_REPLAY: '3',\n  TRACKED_WITH_ERROR_SESSION_AND_WITH_SESSION_REPLAY: '4',\n  TRACKED_WITH_ERROR_SESSION_AND_WITHOUT_SESSION_REPLAY: '5',\n  TRACKED_WITH_ERROR_SESSION_AND_WITH_ERROR_SESSION_REPLAY: '6'\n}\n\nexport function startRumSessionManager(configuration, lifeCycle) {\n  var sessionManager = startSessionManager(\n    configuration,\n    RUM_SESSION_KEY,\n    function (rawTrackingType) {\n      return computeSessionState(configuration, rawTrackingType)\n    }\n  )\n\n  sessionManager.expireObservable.subscribe(function () {\n    lifeCycle.notify(LifeCycleEventType.SESSION_EXPIRED)\n  })\n\n  sessionManager.renewObservable.subscribe(function () {\n    lifeCycle.notify(LifeCycleEventType.SESSION_RENEWED)\n  })\n  sessionManager.sessionStateUpdateObservable.subscribe(\n    ({ previousState, newState }) => {\n      if (!previousState.hasError && newState.hasError) {\n        const sessionEntity = sessionManager.findSession()\n        if (sessionEntity) {\n          sessionEntity.hasError = true\n          sessionEntity.ets = newState.ets || timeStampNow()\n        }\n      }\n    }\n  )\n  return {\n    findTrackedSession: function (startTime) {\n      var session = sessionManager.findSession(startTime)\n      if (!session || !isTypeTracked(session.trackingType)) {\n        return\n      }\n      const isErrorSession =\n        session.trackingType ===\n          RumTrackingType.TRACKED_WITH_ERROR_SESSION_AND_WITHOUT_SESSION_REPLAY ||\n        session.trackingType ===\n          RumTrackingType.TRACKED_WITH_ERROR_SESSION_AND_WITH_SESSION_REPLAY ||\n        session.trackingType ===\n          RumTrackingType.TRACKED_WITH_ERROR_SESSION_AND_WITH_ERROR_SESSION_REPLAY\n\n      let plan = RumSessionPlan.WITHOUT_SESSION_REPLAY\n      if (\n        session.trackingType ===\n          RumTrackingType.TRACKED_WITH_SESSION_AND_WITH_SESSION_REPLAY ||\n        session.trackingType ===\n          RumTrackingType.TRACKED_WITH_ERROR_SESSION_AND_WITH_SESSION_REPLAY\n      ) {\n        plan = RumSessionPlan.WITH_SESSION_REPLAY\n      } else if (\n        session.trackingType ===\n          RumTrackingType.TRACKED_WITH_ERROR_SESSION_AND_WITH_ERROR_SESSION_REPLAY ||\n        session.trackingType ===\n          RumTrackingType.TRACKED_WITH_SESSION_AND_WITH_ERROR_SESSION_REPLAY\n      ) {\n        plan = RumSessionPlan.WITH_ERROR_SESSION_REPLAY\n      }\n\n      return {\n        id: session.id,\n        plan: plan,\n        errorSessionReplayAllowed:\n          plan === RumSessionPlan.WITH_ERROR_SESSION_REPLAY,\n        sessionHasError: session.hasError,\n        isErrorSession: isErrorSession,\n        sessionErrorTimestamp: session.ets,\n        sessionReplayAllowed:\n          plan === RumSessionPlan.WITH_SESSION_REPLAY ||\n          plan === RumSessionPlan.WITH_ERROR_SESSION_REPLAY\n      }\n    },\n    expire: sessionManager.expire,\n    expireObservable: sessionManager.expireObservable,\n    sessionStateUpdateObservable: sessionManager.sessionStateUpdateObservable,\n    setErrorForSession: () =>\n      sessionManager.updateSessionState({ hasError: '1', ets: timeStampNow() })\n  }\n}\n\n/**\n * Start a tracked replay session stub\n * It needs to be a premium plan in order to get long tasks\n */\nexport function startRumSessionManagerStub() {\n  // var session = {\n  //   id: '00000000-aaaa-0000-aaaa-000000000000',\n  //   plan: RumSessionPlan.WITHOUT_SESSION_REPLAY, // plan value should not be taken into account for mobile\n  //   isErrorSession: false,\n  //   sessionErrorTimestamp: 0,\n  //   sessionReplayAllowed: bridgeSupports(BridgeCapability.RECORDS)\n  //     ? true\n  //     : false,\n  //   errorSessionReplayAllowed: false,\n  //   sessionHasError: false\n  // }\n  // return {\n  //   findTrackedSession: function () {\n  //     return session\n  //   },\n  //   expire: noop,\n  //   expireObservable: new Observable(),\n  //   setErrorForSession: function () {}\n  // }\n}\n\nfunction computeSessionState(configuration, rawTrackingType) {\n  const {\n    sessionSampleRate,\n    sessionOnErrorSampleRate,\n    sessionReplaySampleRate,\n    sessionReplayOnErrorSampleRate\n  } = configuration\n  const isSession = performDraw(sessionSampleRate)\n  const isErrorSession = performDraw(sessionOnErrorSampleRate)\n  const isSessionReplay = performDraw(sessionReplaySampleRate)\n  const isErrorSessionReplay = performDraw(sessionReplayOnErrorSampleRate)\n  var trackingType\n  if (hasValidRumSession(rawTrackingType)) {\n    trackingType = rawTrackingType\n  } else if (!isErrorSession && !isSession) {\n    trackingType = RumTrackingType.NOT_TRACKED\n  } else if (isSession && isSessionReplay) {\n    trackingType = RumTrackingType.TRACKED_WITH_SESSION_AND_WITH_SESSION_REPLAY\n  } else if (isSession && isErrorSessionReplay) {\n    trackingType =\n      RumTrackingType.TRACKED_WITH_SESSION_AND_WITH_ERROR_SESSION_REPLAY\n  } else if (isSession && !isSessionReplay && !isErrorSessionReplay) {\n    trackingType =\n      RumTrackingType.TRACKED_WITH_SESSION_AND_WITHOUT_SESSION_REPLAY\n  } else if (isErrorSession && isSessionReplay) {\n    trackingType =\n      RumTrackingType.TRACKED_WITH_ERROR_SESSION_AND_WITH_SESSION_REPLAY\n  } else if (isErrorSession && isErrorSessionReplay) {\n    trackingType =\n      RumTrackingType.TRACKED_WITH_ERROR_SESSION_AND_WITH_ERROR_SESSION_REPLAY\n  } else if (isErrorSession && !isSessionReplay && !isErrorSessionReplay) {\n    trackingType =\n      RumTrackingType.TRACKED_WITH_ERROR_SESSION_AND_WITHOUT_SESSION_REPLAY\n  }\n  //   if (hasValidRumSession(rawTrackingType)) {\n  //     trackingType = rawTrackingType\n  //   } else if (\n  //     !performDraw(configuration.sessionSampleRate) &&\n  //     !performDraw(configuration.sessionOnErrorSampleRate)\n  //   ) {\n  //     trackingType = RumTrackingType.NOT_TRACKED\n  //   } else if (\n  //     !performDraw(configuration.sessionReplaySampleRate) &&\n  //     !performDraw(configuration.sessionReplayOnErrorSampleRate)\n  //   ) {\n  //     trackingType = RumTrackingType.TRACKED_WITHOUT_SESSION_REPLAY\n  //   } else if (performDraw(configuration.sessionReplayOnErrorSampleRate)) {\n  //     trackingType = RumTrackingType.TRACKED_WITH_ERROR_SESSION_REPLAY\n  //   } else {\n  //     trackingType = RumTrackingType.TRACKED_WITH_SESSION_REPLAY\n  //   }\n  return {\n    trackingType: trackingType,\n    isTracked: isTypeTracked(trackingType)\n  }\n}\n\nfunction hasValidRumSession(trackingType) {\n  return (\n    trackingType === RumTrackingType.NOT_TRACKED ||\n    trackingType ===\n      RumTrackingType.TRACKED_WITH_ERROR_SESSION_AND_WITHOUT_SESSION_REPLAY ||\n    trackingType ===\n      RumTrackingType.TRACKED_WITH_ERROR_SESSION_AND_WITH_ERROR_SESSION_REPLAY ||\n    trackingType ===\n      RumTrackingType.TRACKED_WITH_ERROR_SESSION_AND_WITH_SESSION_REPLAY ||\n    trackingType ===\n      RumTrackingType.TRACKED_WITH_SESSION_AND_WITHOUT_SESSION_REPLAY ||\n    trackingType ===\n      RumTrackingType.TRACKED_WITH_SESSION_AND_WITH_ERROR_SESSION_REPLAY ||\n    trackingType ===\n      RumTrackingType.TRACKED_WITH_SESSION_AND_WITH_SESSION_REPLAY\n  )\n}\n\nfunction isTypeTracked(rumSessionType) {\n  return rumSessionType !== RumTrackingType.NOT_TRACKED\n}\n","import { getCookie, setCookie, UUID, ONE_HOUR } from '@cloudcare/browser-core'\nexport var USR_ID_COOKIE_NAME = '_gc_usr_id'\nexport var ANONYMOUS_ID_EXPIRATION = 60 * 24 * ONE_HOUR\n\nfunction initUsrCookie(cookieOptions) {\n  var usrCacheId = getCookie(USR_ID_COOKIE_NAME, cookieOptions)\n  if (!usrCacheId) {\n    usrCacheId = UUID()\n    setCookie(\n      USR_ID_COOKIE_NAME,\n      usrCacheId,\n      ANONYMOUS_ID_EXPIRATION,\n      cookieOptions\n    )\n  }\n  return usrCacheId\n}\nfunction initUsrLocalStorage() {\n  var usrCacheId = localStorage.getItem(USR_ID_COOKIE_NAME)\n  if (!usrCacheId) {\n    usrCacheId = UUID()\n    localStorage.setItem(USR_ID_COOKIE_NAME, usrCacheId)\n  }\n  return usrCacheId\n}\nexport var startCacheUsrCache = function (configuration) {\n  if (!configuration.sessionStoreStrategyType) return\n  let usrCacheId\n  if (configuration.sessionStoreStrategyType.type === 'Cookie') {\n    usrCacheId = initUsrCookie(\n      configuration.sessionStoreStrategyType.cookieOptions\n    )\n  } else {\n    usrCacheId = initUsrLocalStorage()\n  }\n\n  return {\n    getId: function () {\n      return usrCacheId\n    }\n  }\n}\n","import {\n  addEventListener,\n  DOM_EVENT,\n  Observable,\n  shallowClone,\n  instrumentMethod\n} from '@cloudcare/browser-core'\n\nexport function createLocationChangeObservable(location) {\n  var currentLocation = shallowClone(location)\n  return new Observable(function (observable) {\n    var _trackHistory = trackHistory(onLocationChange)\n    var _trackHash = trackHash(onLocationChange)\n    function onLocationChange() {\n      if (currentLocation.href === location.href) {\n        return\n      }\n      var newLocation = shallowClone(location)\n      observable.notify({\n        newLocation: newLocation,\n        oldLocation: currentLocation\n      })\n      currentLocation = newLocation\n    }\n    return function () {\n      _trackHistory.stop()\n      _trackHash.stop()\n    }\n  })\n}\n\nfunction trackHistory(onHistoryChange) {\n  // eslint-disable-next-line @typescript-eslint/unbound-method\n  var pushState = instrumentMethod(\n    History.prototype,\n    'pushState',\n    function (params) {\n      var onPostCall = params.onPostCall\n      onPostCall(onHistoryChange)\n    }\n  )\n  var replaceState = instrumentMethod(\n    History.prototype,\n    'replaceState',\n    function (params) {\n      var onPostCall = params.onPostCall\n      onPostCall(onHistoryChange)\n    }\n  )\n  var popState = addEventListener(window, DOM_EVENT.POP_STATE, onHistoryChange)\n\n  return {\n    stop: function () {\n      pushState.stop()\n      replaceState.stop()\n      popState.stop()\n    }\n  }\n}\n\nfunction trackHash(onHashChange) {\n  return addEventListener(window, DOM_EVENT.HASH_CHANGE, onHashChange)\n}\n","import {\n  LifeCycleEventType,\n  RumEventType,\n  startBatchWithReplica\n} from '@cloudcare/browser-core'\n// import { DeflateEncoderStreamId } from '../domain/deflate'\nexport function startRumBatch(\n  configuration,\n  lifeCycle,\n  telemetryEventObservable,\n  reportError,\n  pageExitObservable,\n  sessionExpireObservable,\n  createEncoder\n) {\n  const batch = startBatchWithReplica(\n    configuration,\n    {\n      endpoint: configuration.rumEndpoint,\n      encoder: createEncoder(2), // DeflateEncoderStreamId.RUM\n    },\n    reportError,\n    pageExitObservable,\n    sessionExpireObservable\n  )\n  lifeCycle.subscribe(\n    LifeCycleEventType.RUM_EVENT_COLLECTED,\n    function (serverRumEvent) {\n      if (serverRumEvent.type === RumEventType.VIEW) {\n        batch.upsert(serverRumEvent, serverRumEvent.view.id)\n      } else {\n        batch.add(serverRumEvent)\n      }\n    }\n  )\n  // telemetryEventObservable.subscribe(function (event) {\n  //   batch.add(event)\n  // })\n  return batch\n}\n","import {\n  extend2Lev,\n  withSnakeCaseKeys,\n  timeStampNow,\n  isEmptyObject,\n  LifeCycleEventType,\n  RumEventType,\n  deviceInfo,\n  currentDrift,\n  createEventRateLimiter,\n  limitModification,\n  display,\n  assign,\n  round\n} from '@cloudcare/browser-core'\nvar SessionType = {\n  SYNTHETICS: 'synthetics',\n  USER: 'user'\n}\n\nvar VIEW_MODIFIABLE_FIELD_PATHS = {\n  'view.url': 'string',\n  'view.referrer': 'string'\n}\n\nvar USER_CUSTOMIZABLE_FIELD_PATHS = {\n  context: 'object'\n}\nconst ROOT_MODIFIABLE_FIELD_PATHS = {\n  service: 'string',\n  version: 'string'\n}\nvar modifiableFieldPathsByEvent = {}\nexport function startRumAssembly(\n  configuration,\n  lifeCycle,\n  sessionManager,\n  userSessionManager,\n  viewContexts,\n  urlContexts,\n  actionContexts,\n  displayContext,\n  getCommonContext,\n  reportError\n) {\n  modifiableFieldPathsByEvent[RumEventType.VIEW] = {\n    ...USER_CUSTOMIZABLE_FIELD_PATHS,\n    ...VIEW_MODIFIABLE_FIELD_PATHS\n  }\n  modifiableFieldPathsByEvent[RumEventType.ERROR] = assign(\n    {\n      'error.message': 'string',\n      'error.stack': 'string',\n      'error.resource.url': 'string'\n    },\n    USER_CUSTOMIZABLE_FIELD_PATHS,\n    VIEW_MODIFIABLE_FIELD_PATHS,\n    ROOT_MODIFIABLE_FIELD_PATHS\n  )\n  modifiableFieldPathsByEvent[RumEventType.RESOURCE] = assign(\n    {\n      'resource.url': 'string'\n    },\n    USER_CUSTOMIZABLE_FIELD_PATHS,\n    VIEW_MODIFIABLE_FIELD_PATHS,\n    ROOT_MODIFIABLE_FIELD_PATHS\n  )\n  modifiableFieldPathsByEvent[RumEventType.ACTION] = assign(\n    {\n      'action.target.name': 'string'\n    },\n    USER_CUSTOMIZABLE_FIELD_PATHS,\n    VIEW_MODIFIABLE_FIELD_PATHS,\n    ROOT_MODIFIABLE_FIELD_PATHS\n  )\n  modifiableFieldPathsByEvent[RumEventType.LONG_TASK] = assign(\n    {},\n    USER_CUSTOMIZABLE_FIELD_PATHS,\n    VIEW_MODIFIABLE_FIELD_PATHS\n  )\n  var eventRateLimiters = {}\n  eventRateLimiters[RumEventType.ERROR] = createEventRateLimiter(\n    RumEventType.ERROR,\n    configuration.eventRateLimiterThreshold,\n    reportError\n  )\n  eventRateLimiters[RumEventType.ACTION] = createEventRateLimiter(\n    RumEventType.ACTION,\n    configuration.eventRateLimiterThreshold,\n    reportError\n  )\n  lifeCycle.subscribe(\n    LifeCycleEventType.RAW_RUM_EVENT_COLLECTED,\n    function (data) {\n      var startTime = data.startTime\n      var rawRumEvent = data.rawRumEvent\n      var savedCommonContext = data.savedCommonContext\n      var customerContext = data.customerContext\n      var domainContext = data.domainContext\n      var viewContext = viewContexts.findView(startTime)\n      var urlContext = urlContexts.findUrl(startTime)\n      var session = sessionManager.findTrackedSession(startTime)\n      if (session && session.isErrorSession && !session.sessionHasError) return\n      if (session && viewContext && urlContext) {\n        // var actionId = actionContexts.findActionId(startTime)\n        // var actionIds = actionContexts.findAllActionId(startTime)\n        var commonContext = savedCommonContext || getCommonContext()\n        var rumContext = {\n          _gc: {\n            sdkName: configuration.sdkName,\n            sdkVersion: configuration.sdkVersion,\n            drift: currentDrift(),\n            configuration: {\n              session_sample_rate: round(configuration.sessionSampleRate, 3),\n              // session_replay_sample_rate: round(\n              //   configuration.sessionReplaySampleRate,\n              //   3\n              // ),\n              session_on_error_sample_rate: round(\n                configuration.sessionOnErrorSampleRate,\n                3\n              ),\n              // session_replay_on_error_sample_rate: round(\n              //   configuration.sessionReplayOnErrorSampleRate,\n              //   3\n              // )\n            }\n          },\n          terminal: {\n            type: 'web'\n          },\n          application: {\n            id: configuration.applicationId\n          },\n          device: deviceInfo,\n          env: configuration.env || '',\n          service: viewContext.service || configuration.service || 'browser',\n          version: viewContext.version || configuration.version || '',\n          source: 'browser',\n          date: timeStampNow(),\n          user: {\n            id: userSessionManager.getId(),\n            is_signin: 'F',\n            is_login: false\n          },\n          session: {\n            // must be computed on each event because synthetics instrumentation can be done after sdk execution\n            // cf https://github.com/puppeteer/puppeteer/issues/3667\n            type: getSessionType(),\n            id: session.id\n          },\n          view: {\n            id: viewContext.id,\n            name: viewContext.name || urlContext.path,\n            url: urlContext.url,\n            referrer: urlContext.referrer,\n            host: urlContext.host,\n            path: urlContext.path,\n            pathGroup: urlContext.pathGroup,\n            urlQuery: urlContext.urlQuery\n          },\n          // action:\n          //   needToAssembleWithAction(rawRumEvent) && actionId\n          //     ? { id: actionId, ids: actionIds }\n          //     : undefined,\n          display: displayContext.get()\n        }\n        var rumEvent = extend2Lev(rumContext, viewContext, rawRumEvent)\n        var serverRumEvent = withSnakeCaseKeys(rumEvent)\n        var context = extend2Lev(\n          {},\n          commonContext.context,\n          viewContext.context,\n          customerContext\n        )\n        if (!isEmptyObject(context)) {\n          serverRumEvent.context = context\n        }\n        if (!('has_replay' in serverRumEvent.session)) {\n          serverRumEvent.session.has_replay = commonContext.hasReplay\n        }\n\n        if (session.errorSessionReplayAllowed) {\n          serverRumEvent.session.has_replay =\n            serverRumEvent.session.has_replay && session.sessionHasError\n        }\n        if (serverRumEvent.type === 'view') {\n          serverRumEvent.session.sampled_for_error_replay =\n            session.errorSessionReplayAllowed\n          serverRumEvent.session.sampled_for_error_session =\n            session.isErrorSession\n          serverRumEvent.session.error_timestamp_for_session =\n            session.sessionErrorTimestamp\n        }\n        if (!isEmptyObject(commonContext.user)) {\n          // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n          serverRumEvent.user = extend2Lev(\n            {\n              // id: session.getAnonymousID(),\n              is_signin: 'T',\n              is_login: true\n            },\n            commonContext.user\n          )\n        }\n\n        if (\n          shouldSend(\n            serverRumEvent,\n            configuration.beforeSend,\n            domainContext,\n            eventRateLimiters\n          )\n        ) {\n          if (isEmptyObject(serverRumEvent.context)) {\n            delete serverRumEvent.context\n          }\n          lifeCycle.notify(\n            LifeCycleEventType.RUM_EVENT_COLLECTED,\n            serverRumEvent\n          )\n        }\n      }\n    }\n  )\n}\n\nfunction shouldSend(event, beforeSend, domainContext, eventRateLimiters) {\n  if (beforeSend) {\n    var result = limitModification(\n      event,\n      modifiableFieldPathsByEvent[event.type],\n      function (event) {\n        return beforeSend(event, domainContext)\n      }\n    )\n    if (result === false && event.type !== RumEventType.VIEW) {\n      return false\n    }\n    if (result === false) {\n      display.warn(\"Can't dismiss view events using beforeSend!\")\n    }\n  }\n  var rateLimitReached = false\n  if (eventRateLimiters[event.type]) {\n    rateLimitReached = eventRateLimiters[event.type].isLimitReached()\n  }\n  return !rateLimitReached\n}\n// function needToAssembleWithAction(event) {\n//   return (\n//     [RumEventType.ERROR, RumEventType.RESOURCE, RumEventType.LONG_TASK].indexOf(\n//       event.type\n//     ) !== -1\n//   )\n// }\n\nfunction getSessionType() {\n  return window._DATAFLUX_SYNTHETICS_BROWSER === undefined\n    ? SessionType.USER\n    : SessionType.SYNTHETICS\n}\n","import {\n  Observable,\n  throttle,\n  addEventListener,\n  DOM_EVENT\n} from '@cloudcare/browser-core'\n\nvar viewportObservable\n\nexport function initViewportObservable() {\n  if (!viewportObservable) {\n    viewportObservable = createViewportObservable()\n  }\n  return viewportObservable\n}\n\nexport function createViewportObservable() {\n  return new Observable(function (observable) {\n    var _throttledUpdateDimension = throttle(function () {\n      observable.notify(getViewportDimension())\n    }, 200)\n    var updateDimension = _throttledUpdateDimension.throttled\n    return addEventListener(window, DOM_EVENT.RESIZE, updateDimension, {\n      capture: true,\n      passive: true\n    }).stop\n  })\n}\n\n// excludes the width and height of any rendered classic scrollbar that is fixed to the visual viewport\nexport function getViewportDimension() {\n  var visual = window.visualViewport\n  if (visual) {\n    return {\n      width: Number(visual.width * visual.scale),\n      height: Number(visual.height * visual.scale)\n    }\n  }\n\n  return {\n    width: Number(window.innerWidth || 0),\n    height: Number(window.innerHeight || 0)\n  }\n}\n","import {\n  getViewportDimension,\n  initViewportObservable\n} from '../initViewportObservable'\n\nexport function startDisplayContext() {\n  var viewport = getViewportDimension()\n  var unsubscribeViewport = initViewportObservable().subscribe(function (\n    viewportDimension\n  ) {\n    viewport = viewportDimension\n  }).unsubscribe\n\n  return {\n    get: function () {\n      return { viewport: viewport }\n    },\n    stop: unsubscribeViewport\n  }\n}\n","/**\n * Internal context keep returning v1 format\n * to not break compatibility with logs data format\n */\nexport function startInternalContext(\n  applicationId,\n  sessionManager,\n  viewContexts,\n  actionContexts,\n  urlContexts\n) {\n  return {\n    get: function (startTime) {\n      var viewContext = viewContexts.findView(startTime)\n      var urlContext = urlContexts.findUrl(startTime)\n      var session = sessionManager.findTrackedSession(startTime)\n      if (session && viewContext && urlContext) {\n        // var actionId = actionContexts.findActionId(startTime)\n        // var actionIds = actionContexts.findAllActionId(startTime)\n        return {\n          application: {\n            id: applicationId\n          },\n          session: {\n            id: session.id\n          },\n          // userAction: actionId\n          //   ? {\n          //       id: actionId,\n          //       ids: actionIds\n          //     }\n          //   : undefined,\n          view: {\n            id: viewContext.id,\n            name: viewContext.name || urlContext.path,\n            url: urlContext.url,\n            referrer: urlContext.referrer,\n            host: urlContext.host,\n            path: urlContext.path,\n            pathGroup: urlContext.pathGroup,\n            urlQuery: urlContext.urlQuery\n          }\n        }\n      }\n    }\n  }\n}\n","import {\n  LifeCycleEventType,\n  SESSION_TIME_OUT_DELAY,\n  relativeNow,\n  createValueHistory,\n  replaceNumberCharByPath,\n  getQueryParamsFromUrl,\n  isHashAnAnchor,\n  getPathFromHash\n} from '@cloudcare/browser-core'\n\n/**\n * We want to attach to an event:\n * - the url corresponding to its start\n * - the referrer corresponding to the previous view url (or document referrer for initial view)\n */\n\nexport var URL_CONTEXT_TIME_OUT_DELAY = SESSION_TIME_OUT_DELAY\n\nexport function startUrlContexts(\n  lifeCycle,\n  locationChangeObservable,\n  location\n) {\n  var urlContextHistory = createValueHistory({\n    expireDelay: URL_CONTEXT_TIME_OUT_DELAY\n  })\n\n  var previousViewUrl\n\n  lifeCycle.subscribe(LifeCycleEventType.BEFORE_VIEW_CREATED, function (data) {\n    var viewUrl = location.href\n    urlContextHistory.add(\n      buildUrlContext({\n        url: viewUrl,\n        location: location,\n        referrer: !previousViewUrl ? document.referrer : previousViewUrl\n      }),\n      data.startClocks.relative\n    )\n    previousViewUrl = viewUrl\n  })\n  lifeCycle.subscribe(LifeCycleEventType.AFTER_VIEW_ENDED, function (data) {\n    urlContextHistory.closeActive(data.endClocks.relative)\n  })\n  var locationChangeSubscription = locationChangeObservable.subscribe(function (\n    data\n  ) {\n    var current = urlContextHistory.find()\n    if (current) {\n      var changeTime = relativeNow()\n      urlContextHistory.closeActive(changeTime)\n      urlContextHistory.add(\n        buildUrlContext({\n          url: data.newLocation.href,\n          location: data.newLocation,\n          referrer: current.referrer\n        }),\n        changeTime\n      )\n    }\n  })\n\n  function buildUrlContext(data) {\n    var path = data.location.pathname\n    var hash = data.location.hash\n    if (hash && !isHashAnAnchor(hash)) {\n      path = '/' + getPathFromHash(hash)\n    }\n    return {\n      url: data.url,\n      referrer: data.referrer,\n      host: data.location.host,\n      path: path,\n      pathGroup: replaceNumberCharByPath(path),\n      urlQuery: getQueryParamsFromUrl(data.location.href)\n    }\n  }\n\n  return {\n    findUrl: function (startTime) {\n      return urlContextHistory.find(startTime)\n    },\n    stop: function () {\n      locationChangeSubscription.unsubscribe()\n      urlContextHistory.stop()\n    }\n  }\n}\n","import {\n  SESSION_TIME_OUT_DELAY,\n  createValueHistory,\n  LifeCycleEventType\n} from '@cloudcare/browser-core'\n\nexport var VIEW_CONTEXT_TIME_OUT_DELAY = SESSION_TIME_OUT_DELAY\n\nexport function startViewContexts(lifeCycle) {\n  var viewContextHistory = createValueHistory({\n    expireDelay: VIEW_CONTEXT_TIME_OUT_DELAY\n  })\n\n  lifeCycle.subscribe(LifeCycleEventType.BEFORE_VIEW_CREATED, function (view) {\n    viewContextHistory.add(buildViewContext(view), view.startClocks.relative)\n  })\n\n  lifeCycle.subscribe(LifeCycleEventType.AFTER_VIEW_ENDED, function (data) {\n    viewContextHistory.closeActive(data.endClocks.relative)\n  })\n  lifeCycle.subscribe(LifeCycleEventType.BEFORE_VIEW_UPDATED, (viewUpdate) => {\n    const currentView = viewContextHistory.find(viewUpdate.startClocks.relative)\n    if (currentView && viewUpdate.name) {\n      currentView.name = viewUpdate.name\n    }\n    if (currentView && viewUpdate.context) {\n      currentView.context = viewUpdate.context\n    }\n  })\n  lifeCycle.subscribe(LifeCycleEventType.SESSION_RENEWED, function () {\n    viewContextHistory.reset()\n  })\n\n  function buildViewContext(view) {\n    return {\n      service: view.service,\n      version: view.version,\n      context: view.context,\n      id: view.id,\n      name: view.name,\n      startClocks: view.startClocks\n    }\n  }\n\n  return {\n    findView: function (startTime) {\n      return viewContextHistory.find(startTime)\n    },\n    stop: function () {\n      viewContextHistory.stop()\n    }\n  }\n}\n","import {\n  elapsed,\n  createValueHistory,\n  SESSION_TIME_OUT_DELAY,\n  toServerDuration,\n  addEventListeners,\n  relativeNow,\n  DOM_EVENT\n} from '@cloudcare/browser-core'\n\n// Arbitrary value to cap number of element for memory consumption in the browser\nexport var MAX_PAGE_STATE_ENTRIES = 4000\n// Arbitrary value to cap number of element for backend & to save bandwidth\nexport var MAX_PAGE_STATE_ENTRIES_SELECTABLE = 500\n\nexport var PAGE_STATE_CONTEXT_TIME_OUT_DELAY = SESSION_TIME_OUT_DELAY\n\nexport var PageState = {\n  ACTIVE: 'active',\n  PASSIVE: 'passive',\n  HIDDEN: 'hidden',\n  FROZEN: 'frozen',\n  TERMINATED: 'terminated'\n}\n\nexport function startPageStateHistory(maxPageStateEntriesSelectable) {\n  if (maxPageStateEntriesSelectable === undefined) {\n    maxPageStateEntriesSelectable = MAX_PAGE_STATE_ENTRIES_SELECTABLE\n  }\n  var pageStateEntryHistory = createValueHistory({\n    expireDelay: PAGE_STATE_CONTEXT_TIME_OUT_DELAY,\n    maxEntries: MAX_PAGE_STATE_ENTRIES\n  })\n\n  var currentPageState\n  addPageState(getPageState(), relativeNow())\n\n  var _addEventListeners = addEventListeners(\n    window,\n    [\n      DOM_EVENT.PAGE_SHOW,\n      DOM_EVENT.FOCUS,\n      DOM_EVENT.BLUR,\n      DOM_EVENT.VISIBILITY_CHANGE,\n      DOM_EVENT.RESUME,\n      DOM_EVENT.FREEZE,\n      DOM_EVENT.PAGE_HIDE\n    ],\n    function (event) {\n      // Only get events fired by the browser to avoid false currentPageState changes done with custom events\n      addPageState(computePageState(event), event.timeStamp)\n    },\n    { capture: true }\n  )\n  var stopEventListeners = _addEventListeners.stop\n\n  function addPageState(nextPageState, startTime) {\n    if (startTime === undefined) {\n      startTime = relativeNow()\n    }\n    if (nextPageState === currentPageState) {\n      return\n    }\n\n    currentPageState = nextPageState\n    pageStateEntryHistory.closeActive(startTime)\n    pageStateEntryHistory.add(\n      { state: currentPageState, startTime: startTime },\n      startTime\n    )\n  }\n\n  const pageStateHistory = {\n    findAll: function (eventStartTime, duration) {\n      var pageStateEntries = pageStateEntryHistory.findAll(\n        eventStartTime,\n        duration\n      )\n\n      if (pageStateEntries.length === 0) {\n        return\n      }\n\n      var pageStateServerEntries = []\n      // limit the number of entries to return\n      var limit = Math.max(\n        0,\n        pageStateEntries.length - maxPageStateEntriesSelectable\n      )\n\n      // loop page state entries backward to return the selected ones in desc order\n      for (var index = pageStateEntries.length - 1; index >= limit; index--) {\n        var pageState = pageStateEntries[index]\n        // compute the start time relative to the event start time (ex: to be relative to the view start time)\n        var relativeStartTime = elapsed(eventStartTime, pageState.startTime)\n\n        pageStateServerEntries.push({\n          state: pageState.state,\n          start: toServerDuration(relativeStartTime)\n        })\n      }\n\n      return pageStateServerEntries\n    },\n\n    wasInPageStateAt: function (state, startTime) {\n      return pageStateHistory.wasInPageStateDuringPeriod(state, startTime, 0)\n    },\n\n    wasInPageStateDuringPeriod: function (state, startTime, duration) {\n      return pageStateEntryHistory\n        .findAll(startTime, duration)\n        .some(function (pageState) {\n          return pageState.state === state\n        })\n    },\n\n    addPageState: addPageState,\n    stop: function () {\n      stopEventListeners()\n      pageStateEntryHistory.stop()\n    }\n  }\n  return pageStateHistory\n}\n\nfunction computePageState(event) {\n  if (event.type === DOM_EVENT.FREEZE) {\n    return PageState.FROZEN\n  } else if (event.type === DOM_EVENT.PAGE_HIDE) {\n    return event.persisted ? PageState.FROZEN : PageState.TERMINATED\n  }\n  return getPageState()\n}\n\nfunction getPageState() {\n  if (document.visibilityState === 'hidden') {\n    return PageState.HIDDEN\n  }\n\n  if (document.hasFocus()) {\n    return PageState.ACTIVE\n  }\n\n  return PageState.PASSIVE\n}\n","import {\n  assign,\n  computeStackTrace,\n  computeRawError,\n  ErrorSource,\n  UUID,\n  ErrorHandling,\n  Observable,\n  trackRuntimeError,\n  RumEventType,\n  LifeCycleEventType,\n  NonErrorPrefix\n} from '@cloudcare/browser-core'\n// import { trackConsoleError } from './trackConsoleError'\n// import { trackReportError } from './trackReportError'\nimport { PageState } from '../../contexts/pageStateHistory'\n\nexport function startErrorCollection(\n  lifeCycle,\n  configuration,\n  sessionManager,\n  pageStateHistory\n) {\n  var errorObservable = new Observable()\n\n  // trackConsoleError(errorObservable)\n  trackRuntimeError(errorObservable)\n  // trackReportError(configuration, errorObservable)\n  var session = sessionManager.findTrackedSession()\n  let hasError = session.isErrorSession && session.sessionHasError\n  if (session.isErrorSession) {\n    lifeCycle.subscribe(LifeCycleEventType.SESSION_RENEWED, function () {\n      hasError = false\n    })\n  }\n\n  errorObservable.subscribe(function (error) {\n    if (session.isErrorSession && !hasError) {\n      sessionManager.setErrorForSession()\n      hasError = true\n    }\n    lifeCycle.notify(LifeCycleEventType.RAW_ERROR_COLLECTED, { error: error })\n  })\n\n  return doStartErrorCollection(lifeCycle, pageStateHistory)\n}\n\nexport function doStartErrorCollection(lifeCycle, pageStateHistory) {\n  lifeCycle.subscribe(LifeCycleEventType.RAW_ERROR_COLLECTED, function (error) {\n    lifeCycle.notify(\n      LifeCycleEventType.RAW_RUM_EVENT_COLLECTED,\n      assign(\n        {\n          customerContext: error.customerContext,\n          savedCommonContext: error.savedCommonContext\n        },\n        processError(error.error, pageStateHistory)\n      )\n    )\n  })\n\n  return {\n    addError: function (providedError, savedCommonContext) {\n      var error = providedError.error\n      var stackTrace =\n        error instanceof Error ? computeStackTrace(error) : undefined\n      var rawError = computeRawError({\n        stackTrace,\n        originalError: error,\n        handlingStack: providedError.handlingStack,\n        startClocks: providedError.startClocks,\n        nonErrorPrefix: NonErrorPrefix.PROVIDED,\n        source: ErrorSource.CUSTOM,\n        handling: ErrorHandling.HANDLED\n      })\n      lifeCycle.notify(LifeCycleEventType.RAW_ERROR_COLLECTED, {\n        customerContext: providedError.context,\n        savedCommonContext: savedCommonContext,\n        error: rawError\n      })\n    }\n  }\n}\n\nfunction processError(error, pageStateHistory) {\n  console.trace('domain/rumEventsCollection/error/errorCollection.js::processError', error);\n  var rawRumEvent = {\n    date: error.startClocks.timeStamp,\n    error: {\n      id: UUID(),\n      message: error.message,\n      source: error.source,\n      stack: error.stack,\n      handling_stack: error.handlingStack,\n      type: error.type,\n      handling: error.handling,\n      causes: error.causes,\n      source_type: 'browser'\n    },\n    type: RumEventType.ERROR,\n    view: {\n      in_foreground: pageStateHistory.wasInPageStateAt(\n        PageState.ACTIVE,\n        error.startClocks.relative\n      )\n    }\n  }\n\n  return {\n    rawRumEvent: rawRumEvent,\n    startTime: error.startClocks.relative,\n    domainContext: {\n      error: error.originalError\n    }\n  }\n}\n","import {\n  shallowClone,\n  elapsed,\n  UUID,\n  ONE_MINUTE,\n  throttle,\n  clocksNow,\n  clocksOrigin,\n  timeStampNow,\n  looksLikeRelativeTime,\n  ViewLoadingType,\n  LifeCycleEventType,\n  PageExitReason,\n  isHashAnAnchor,\n  getPathFromHash,\n  noop,\n  setInterval,\n  Observable,\n  clearInterval,\n  setTimeout,\n  isNullUndefinedDefaultValue,\n  createContextManager\n} from '@cloudcare/browser-core'\n\n// import { trackInitialViewMetrics } from './trackInitialViewTimings'\n// import { trackCommonViewMetrics } from './trackCommonViewMetrics'\n// import { trackViewEventCounts } from './trackViewEventCounts'\nexport var THROTTLE_VIEW_UPDATE_PERIOD = 3000\nexport var SESSION_KEEP_ALIVE_INTERVAL = 5 * ONE_MINUTE\nexport var KEEP_TRACKING_AFTER_VIEW_DELAY = 5 * ONE_MINUTE\nexport function trackViews(\n  location,\n  lifeCycle,\n  domMutationObservable,\n  configuration,\n  locationChangeObservable,\n  areViewsTrackedAutomatically,\n  initialViewOptions\n) {\n  var activeViews = new Set()\n  function startNewView(loadingType, startClocks, viewOptions) {\n    var newlyCreatedView = newView(\n      lifeCycle,\n      'domMutationObservable',\n      configuration,\n      location,\n      loadingType,\n      startClocks,\n      viewOptions\n    )\n    activeViews.add(newlyCreatedView)\n    newlyCreatedView.stopObservable.subscribe(function () {\n      activeViews.delete(newlyCreatedView)\n    })\n    return newlyCreatedView\n  }\n  var currentView = startNewView(\n    ViewLoadingType.INITIAL_LOAD,\n    clocksOrigin(),\n    initialViewOptions\n  )\n  startViewLifeCycle()\n  var locationChangeSubscription\n  if (areViewsTrackedAutomatically) {\n    locationChangeSubscription = renewViewOnLocationChange(\n      locationChangeObservable\n    )\n  }\n  function startViewLifeCycle() {\n    lifeCycle.subscribe(LifeCycleEventType.SESSION_RENEWED, function () {\n      currentView = startNewView(ViewLoadingType.ROUTE_CHANGE, undefined, {\n        name: currentView.name,\n        service: currentView.service,\n        version: currentView.version,\n        context: currentView.contextManager.getContext()\n      })\n    })\n\n    lifeCycle.subscribe(LifeCycleEventType.SESSION_EXPIRED, function () {\n      currentView.end({ sessionIsActive: false })\n    })\n    // // End the current view on page unload\n    // lifeCycle.subscribe(\n    //   LifeCycleEventType.PAGE_EXITED,\n    //   function (pageExitEvent) {\n    //     if (pageExitEvent.reason === PageExitReason.UNLOADING) {\n    //       currentView.end()\n    //     }\n    //   }\n    // )\n  }\n\n  function renewViewOnLocationChange(locationChangeObservable) {\n    return locationChangeObservable.subscribe(function (params) {\n      var oldLocation = params.oldLocation\n      var newLocation = params.newLocation\n      if (areDifferentLocation(oldLocation, newLocation)) {\n        currentView.end()\n        currentView = startNewView(ViewLoadingType.ROUTE_CHANGE)\n        return\n      }\n    })\n  }\n\n  return {\n    addTiming: function (name, time) {\n      if (typeof time === 'undefined') {\n        time = timeStampNow()\n      }\n      currentView.addTiming(name, time)\n    },\n    startView: function (options, startClocks) {\n      currentView.end({ endClocks: startClocks })\n      currentView = startNewView(\n        ViewLoadingType.ROUTE_CHANGE,\n        startClocks,\n        options\n      )\n    },\n    setViewContext: (context) => {\n      currentView.contextManager.setContext(context)\n    },\n    setViewContextProperty: (key, value) => {\n      currentView.contextManager.setContextProperty(key, value)\n    },\n    setViewName: (name) => {\n      currentView.setViewName(name)\n    },\n    getViewContext: () => currentView.contextManager.getContext(),\n    stop: function () {\n      if (locationChangeSubscription) {\n        locationChangeSubscription.unsubscribe()\n      }\n      currentView.end()\n      activeViews.forEach(function (view) {\n        view.stop()\n      })\n    }\n  }\n}\n\nfunction newView(\n  lifeCycle,\n  domMutationObservable,\n  configuration,\n  initialLocation,\n  loadingType,\n  startClocks,\n  viewOptions\n) {\n  // Setup initial values\n  if (startClocks === undefined) {\n    startClocks = clocksNow()\n  }\n  var id = UUID()\n  var stopObservable = new Observable()\n  var customTimings = {}\n  var documentVersion = 0\n  var endClocks\n  var location = shallowClone(initialLocation)\n  const contextManager = createContextManager()\n  var sessionIsActive = true\n  var name\n  var service\n  var version\n  var context\n  if (viewOptions) {\n    name = viewOptions.name\n    service = viewOptions.service\n    version = viewOptions.version\n    context = viewOptions.context\n  }\n  if (context) {\n    contextManager.setContext(context)\n  }\n  var viewCreatedEvent = {\n    id: id,\n    name: name,\n    startClocks: startClocks,\n    service: service,\n    version: version\n  }\n  lifeCycle.notify(LifeCycleEventType.BEFORE_VIEW_CREATED, viewCreatedEvent)\n  lifeCycle.notify(LifeCycleEventType.VIEW_CREATED, viewCreatedEvent)\n\n  // Update the view every time the measures are changing\n  var _scheduleViewUpdate = throttle(\n    triggerViewUpdate,\n    THROTTLE_VIEW_UPDATE_PERIOD,\n    {\n      leading: false\n    }\n  )\n  var throttled = _scheduleViewUpdate.throttled\n  var cancelScheduleViewUpdate = _scheduleViewUpdate.cancel\n\n  // var _trackCommonViewMetrics = trackCommonViewMetrics(\n  //   lifeCycle,\n  //   domMutationObservable,\n  //   configuration,\n  //   scheduleViewUpdate,\n  //   loadingType,\n  //   startClocks\n  // )\n  // var setLoadEvent = _trackCommonViewMetrics.setLoadEvent\n  // var stopCommonViewMetricsTracking = _trackCommonViewMetrics.stop\n  // var getCommonViewMetrics = _trackCommonViewMetrics.getCommonViewMetrics\n  // var stopINPTracking = _trackCommonViewMetrics.stopINPTracking\n  // var setViewEnd = _trackCommonViewMetrics.setViewEnd\n  var _trackInitialViewTimings =\n    // loadingType === ViewLoadingType.INITIAL_LOAD\n      // ? trackInitialViewMetrics(configuration, function(){}, scheduleViewUpdate)\n      /* : */ {\n          stop: noop,\n          initialViewMetrics: {}\n        }\n  var stopInitialViewMetricsTracking = _trackInitialViewTimings.stop\n  var initialViewMetrics = _trackInitialViewTimings.initialViewMetrics\n  // var _trackViewEventCounts = trackViewEventCounts(\n  //   lifeCycle,\n  //   id,\n  //   scheduleViewUpdate\n  // )\n  // var stopEventCountsTracking = _trackViewEventCounts.stop\n  // var eventCounts = _trackViewEventCounts.eventCounts\n\n  // Session keep alive\n  var keepAliveIntervalId = setInterval(\n    triggerViewUpdate,\n    SESSION_KEEP_ALIVE_INTERVAL\n  )\n  const pageMayExitSubscription = lifeCycle.subscribe(\n    LifeCycleEventType.PAGE_EXITED,\n    (pageMayExitEvent) => {\n      if (pageMayExitEvent.reason === PageExitReason.UNLOADING) {\n        triggerViewUpdate()\n      }\n    }\n  )\n  triggerViewUpdate()\n  // View context update should always be throttled\n  contextManager.changeObservable.subscribe(scheduleViewUpdate)\n\n  function triggerBeforeViewUpdate() {\n    lifeCycle.notify(LifeCycleEventType.BEFORE_VIEW_UPDATED, {\n      id,\n      name,\n      context: contextManager.getContext(),\n      startClocks\n    })\n  }\n  function scheduleViewUpdate() {\n    triggerBeforeViewUpdate()\n    throttled()\n  }\n\n  function triggerViewUpdate() {\n    cancelScheduleViewUpdate()\n    triggerBeforeViewUpdate()\n    documentVersion += 1\n    var currentEnd =\n      endClocks === undefined ? timeStampNow() : endClocks.timeStamp\n    lifeCycle.notify(LifeCycleEventType.VIEW_UPDATED, {\n      customTimings: customTimings,\n      documentVersion: documentVersion,\n      id: id,\n      name: name,\n      service: service,\n      version: version,\n      context: contextManager.getContext(),\n      loadingType: loadingType,\n      location: location,\n      startClocks: startClocks,\n      commonViewMetrics: {},\n      initialViewMetrics: initialViewMetrics,\n      duration: elapsed(startClocks.timeStamp, currentEnd),\n      isActive: endClocks === undefined,\n      sessionIsActive: sessionIsActive,\n      eventCounts: {},\n    })\n  }\n  var result = {\n    name: name,\n    service: service,\n    version: version,\n    contextManager: contextManager,\n    stopObservable: stopObservable,\n    end: function (options) {\n      if (endClocks) {\n        // view already ended\n        return\n      }\n      endClocks = isNullUndefinedDefaultValue(\n        options && options.endClocks,\n        clocksNow()\n      )\n      sessionIsActive = isNullUndefinedDefaultValue(\n        options && options.sessionIsActive,\n        true\n      )\n      lifeCycle.notify(LifeCycleEventType.VIEW_ENDED, { endClocks: endClocks })\n      lifeCycle.notify(LifeCycleEventType.AFTER_VIEW_ENDED, {\n        endClocks: endClocks\n      })\n      clearInterval(keepAliveIntervalId)\n      // setViewEnd(endClocks.relative)\n      // stopCommonViewMetricsTracking()\n      pageMayExitSubscription.unsubscribe()\n      triggerViewUpdate()\n      setTimeout(function () {\n        result.stop()\n      }, KEEP_TRACKING_AFTER_VIEW_DELAY)\n    },\n    stop: function () {\n      stopInitialViewMetricsTracking()\n      // stopEventCountsTracking()\n      // stopINPTracking()\n      stopObservable.notify()\n    },\n    addTiming: function (name, time) {\n      if (endClocks) {\n        return\n      }\n      var relativeTime = looksLikeRelativeTime(time)\n        ? time\n        : elapsed(startClocks.timeStamp, time)\n      customTimings[sanitizeTiming(name)] = relativeTime\n      scheduleViewUpdate()\n    },\n    setViewName(updatedName) {\n      name = updatedName\n      triggerViewUpdate()\n    }\n  }\n  return result\n}\n\n/**\n * Timing name is used as facet path that must contain only letters, digits, or the characters - _ . @ $\n */\nfunction sanitizeTiming(name) {\n  var sanitized = name.replace(/[^a-zA-Z0-9-_.@$]/g, '_')\n  if (sanitized !== name) {\n    console.warn(\n      'Invalid timing name: ' + name + ', sanitized to: ' + sanitized\n    )\n  }\n  return sanitized\n}\n\nfunction areDifferentLocation(currentLocation, otherLocation) {\n  return (\n    currentLocation.pathname !== otherLocation.pathname ||\n    (!isHashAnAnchor(otherLocation.hash) &&\n      getPathFromHash(otherLocation.hash) !==\n        getPathFromHash(currentLocation.hash))\n  )\n}\n","import {\n  isEmptyObject,\n  mapValues,\n  toServerDuration,\n  isNumber,\n  RumEventType,\n  LifeCycleEventType,\n  extend2Lev,\n  findByPath,\n  discardNegativeDuration\n} from '@cloudcare/browser-core'\nimport { trackViews } from './trackViews'\nexport function startViewCollection(\n  lifeCycle,\n  configuration,\n  location,\n  domMutationObservable,\n  locationChangeObservable,\n  pageStateHistory,\n  recorderApi,\n  initialViewOptions\n) {\n  lifeCycle.subscribe(LifeCycleEventType.VIEW_UPDATED, function (view) {\n    lifeCycle.notify(\n      LifeCycleEventType.RAW_RUM_EVENT_COLLECTED,\n      processViewUpdate(view, configuration, recorderApi, pageStateHistory)\n    )\n  })\n\n  return trackViews(\n    location,\n    lifeCycle,\n    'domMutationObservable',\n    configuration,\n    locationChangeObservable,\n    !configuration.trackViewsManually,\n    initialViewOptions\n  )\n}\n// function computePerformanceViewDetails(navigationTimings) {\n//   if (!navigationTimings) {\n//     return undefined\n//   }\n//   var fetchStart = navigationTimings.fetchStart,\n//     responseEnd = navigationTimings.responseEnd,\n//     domInteractive = navigationTimings.domInteractive,\n//     domContentLoaded = navigationTimings.domContentLoaded,\n//     domComplete = navigationTimings.domComplete,\n//     loadEventEnd = navigationTimings.loadEventEnd,\n//     loadEventStart = navigationTimings.loadEventStart,\n//     domContentLoadedEventEnd = navigationTimings.domContentLoadedEventEnd\n//   var details = {}\n//   if (\n//     isNumber(responseEnd) &&\n//     isNumber(fetchStart) &&\n//     responseEnd !== fetchStart &&\n//     responseEnd > fetchStart\n//   ) {\n//     details.fpt = toServerDuration(responseEnd - fetchStart)\n//     var apdexLevel = parseInt((responseEnd - fetchStart) / 1000) // \n//     details.apdexLevel = apdexLevel > 9 ? 9 : apdexLevel\n//   }\n//   if (\n//     isNumber(domInteractive) &&\n//     isNumber(fetchStart) &&\n//     domInteractive !== fetchStart &&\n//     domInteractive > fetchStart\n//   ) {\n//     details.tti = toServerDuration(domInteractive - fetchStart)\n//   }\n//   if (\n//     isNumber(domContentLoaded) &&\n//     isNumber(fetchStart) &&\n//     domContentLoaded !== fetchStart &&\n//     domContentLoaded > fetchStart\n//   ) {\n//     details.dom_ready = toServerDuration(domContentLoaded - fetchStart)\n//   }\n//   // Make sure a connection occurred\n//   if (\n//     isNumber(loadEventEnd) &&\n//     isNumber(fetchStart) &&\n//     loadEventEnd !== fetchStart &&\n//     loadEventEnd > fetchStart\n//   ) {\n//     details.load = toServerDuration(loadEventEnd - fetchStart)\n//   }\n//   if (\n//     isNumber(loadEventStart) &&\n//     isNumber(domContentLoadedEventEnd) &&\n//     loadEventStart !== domContentLoadedEventEnd &&\n//     loadEventStart > domContentLoadedEventEnd\n//   ) {\n//     details.resource_load_time = toServerDuration(\n//       loadEventStart - domContentLoadedEventEnd\n//     )\n//   }\n//   if (\n//     isNumber(domComplete) &&\n//     isNumber(domInteractive) &&\n//     domComplete !== domInteractive &&\n//     domComplete > domInteractive\n//   ) {\n//     details.dom = toServerDuration(domComplete - domInteractive)\n//   }\n//   return details\n// }\n\nfunction processViewUpdate(view, configuration, recorderApi, pageStateHistory) {\n  // var replayStats = recorderApi.getReplayStats(view.id)\n  var pageStates = pageStateHistory.findAll(\n    view.startClocks.relative,\n    view.duration\n  )\n  var viewEvent = {\n    _gc: {\n      document_version: view.documentVersion,\n      // replay_stats: replayStats,\n      page_states: pageStates\n    },\n    date: view.startClocks.timeStamp,\n    type: RumEventType.VIEW,\n    view: {\n      // action: {\n      //   count: view.eventCounts.actionCount\n      // },\n      // frustration: {\n      //   count: view.eventCounts.frustrationCount\n      // },\n      // cumulative_layout_shift: findByPath(\n      //   view.commonViewMetrics,\n      //   'cumulativeLayoutShift.value'\n      // ),\n      // cumulative_layout_shift_time: findByPath(\n      //   view.commonViewMetrics,\n      //   'cumulativeLayoutShift.time'\n      // ),\n      // cumulative_layout_shift_target_selector: findByPath(\n      //   view.commonViewMetrics,\n      //   'cumulativeLayoutShift.targetSelector'\n      // ),\n      // first_byte: toServerDuration(\n      //   findByPath(view.initialViewMetrics, 'navigationTimings.firstByte')\n      // ),\n      // dom_complete: toServerDuration(\n      //   findByPath(view.initialViewMetrics, 'navigationTimings.domComplete')\n      // ),\n      // dom_content_loaded: toServerDuration(\n      //   findByPath(\n      //     view.initialViewMetrics,\n      //     'navigationTimings.domContentLoaded'\n      //   )\n      // ),\n      // dom_interactive: toServerDuration(\n      //   findByPath(view.initialViewMetrics, 'navigationTimings.domInteractive')\n      // ),\n      // error: {\n      //   count: view.eventCounts.errorCount\n      // },\n      // first_contentful_paint: toServerDuration(\n      //   findByPath(view.initialViewMetrics, 'firstContentfulPaint')\n      // ),\n      // first_input_delay: toServerDuration(\n      //   findByPath(view.initialViewMetrics, 'firstInput.delay')\n      // ),\n      // first_input_time: toServerDuration(\n      //   findByPath(view.initialViewMetrics, 'firstInput.time')\n      // ),\n      // first_input_target_selector: findByPath(\n      //   view.initialViewMetrics,\n      //   'firstInput.targetSelector'\n      // ),\n      // interaction_to_next_paint: toServerDuration(\n      //   findByPath(view.commonViewMetrics, 'interactionToNextPaint.value')\n      // ),\n      // interaction_to_next_paint_target_selector: findByPath(\n      //   view.commonViewMetrics,\n      //   'interactionToNextPaint.targetSelector'\n      // ),\n      is_active: view.isActive,\n      name: view.name,\n      // largest_contentful_paint: toServerDuration(\n      //   findByPath(view.initialViewMetrics, 'largestContentfulPaint.value')\n      // ),\n      // largest_contentful_paint_element_selector: findByPath(\n      //   view.initialViewMetrics,\n      //   'largestContentfulPaint.targetSelector'\n      // ),\n      // load_event: toServerDuration(\n      //   findByPath(view.initialViewMetrics, 'navigationTimings.loadEvent')\n      // ),\n      // loading_time: discardNegativeDuration(\n      //   toServerDuration(view.commonViewMetrics.loadingTime)\n      // ),\n      loading_type: view.loadingType,\n      // long_task: {\n      //   count: view.eventCounts.longTaskCount\n      // },\n      // resource: {\n      //   count: view.eventCounts.resourceCount\n      // },\n      time_spent: toServerDuration(view.duration)\n    },\n    // display: view.commonViewMetrics.scroll\n    //   ? {\n    //       scroll: {\n    //         max_depth: view.commonViewMetrics.scroll.maxDepth,\n    //         max_depth_scroll_top:\n    //           view.commonViewMetrics.scroll.maxDepthScrollTop,\n    //         max_scroll_height: view.commonViewMetrics.scroll.maxScrollHeight,\n    //         max_scroll_height_time: toServerDuration(\n    //           view.commonViewMetrics.scroll.maxScrollHeightTime\n    //         )\n    //       }\n    //     }\n    //   : undefined,\n    session: {\n      // has_replay: replayStats ? true : undefined,\n      is_active: view.sessionIsActive ? undefined : false\n    },\n    privacy: {\n      replay_level: configuration.defaultPrivacyLevel\n    }\n  }\n  if (!isEmptyObject(view.customTimings)) {\n    viewEvent.view.custom_timings = mapValues(\n      view.customTimings,\n      toServerDuration\n    )\n  }\n  // viewEvent = extend2Lev(viewEvent, {\n  //   view: computePerformanceViewDetails(\n  //     view.initialViewMetrics.navigationTimings\n  //   )\n  // })\n  return {\n    rawRumEvent: viewEvent,\n    startTime: view.startClocks.relative,\n    domainContext: {\n      location: view.location\n    }\n  }\n}\n","import {\n  startRumSessionManager,\n  startRumSessionManagerStub\n} from '../domain/rumSessionManager'\nimport { startCacheUsrCache } from '../domain/usr'\nimport {\n  LifeCycle,\n  LifeCycleEventType,\n  createPageExitObservable,\n  canUseEventBridge,\n  // startTelemetry,\n  // TelemetryService,\n  // drainPreStartTelemetry\n} from '@cloudcare/browser-core'\n// import { createDOMMutationObservable } from '../domain/domMutationObservable.js'\nimport { createLocationChangeObservable } from '../domain/locationChangeObservable'\n// import { startLongTaskCollection } from '../domain/rumEventsCollection/longTask/longTaskCollection'\n// import { startLongAnimationFrameCollection } from '../domain/rumEventsCollection/longTask/longAnimationFrameCollection'\n// import { RumPerformanceEntryType } from '../domain/performanceObservable'\n// import { startActionCollection } from '../domain/rumEventsCollection/actions/actionCollection'\nimport { startRumBatch } from '../transport/startRumBatch'\n// import { startRumEventBridge } from '../transport/startRumEventBridge'\nimport { startRumAssembly } from '../domain/assembly'\nimport { startDisplayContext } from '../domain/contexts/displayContext.js'\nimport { startInternalContext } from '../domain/contexts/internalContext'\nimport { startUrlContexts } from '../domain/contexts/urlContexts'\nimport { startViewContexts } from '../domain/contexts/viewContexts'\nimport { startPageStateHistory } from '../domain/contexts/pageStateHistory'\nimport { startErrorCollection } from '../domain/rumEventsCollection/error/errorCollection'\nimport { startViewCollection } from '../domain/rumEventsCollection/view/viewCollection'\n// import { startRequestCollection } from '../domain/requestCollection'\n// import { startResourceCollection } from '../domain/rumEventsCollection/resource/resourceCollection'\n\nexport function startRum(\n  configuration,\n  recorderApi,\n  customerDataTrackerManager,\n  getCommonContext,\n  initialViewOptions,\n  createEncoder\n) {\n  var cleanupTasks = []\n  var lifeCycle = new LifeCycle()\n  // var telemetry = startRumTelemetry(configuration)\n\n  var reportError = function (error) {\n    lifeCycle.notify(LifeCycleEventType.RAW_ERROR_COLLECTED, { error: error })\n  }\n  var pageExitObservable = createPageExitObservable()\n  pageExitObservable.subscribe(function (event) {\n    lifeCycle.notify(LifeCycleEventType.PAGE_EXITED, event)\n  })\n  cleanupTasks.push(function () {\n    pageExitSubscription.unsubscribe()\n  })\n  var session = !canUseEventBridge()\n    ? startRumSessionManager(configuration, lifeCycle)\n    : startRumSessionManagerStub()\n  if (!canUseEventBridge()) {\n    var batch = startRumBatch(\n      configuration,\n      lifeCycle,\n      'telemetry.observable',\n      reportError,\n      pageExitObservable,\n      session.expireObservable,\n      createEncoder\n    )\n    cleanupTasks.push(function () {\n      batch.stop()\n    })\n  // } else {\n  //   startRumEventBridge(lifeCycle)\n  }\n\n  var userSession = startCacheUsrCache(configuration)\n  // var domMutationObservable = createDOMMutationObservable()\n  var locationChangeObservable = createLocationChangeObservable(location)\n  var pageStateHistory = startPageStateHistory()\n  var _startRumEventCollection = startRumEventCollection(\n    lifeCycle,\n    configuration,\n    location,\n    session,\n    userSession,\n    pageStateHistory,\n    locationChangeObservable,\n    'domMutationObservable',\n    getCommonContext,\n    reportError\n  )\n  var viewContexts = _startRumEventCollection.viewContexts\n  var urlContexts = _startRumEventCollection.urlContexts\n  // var actionContexts = _startRumEventCollection.actionContexts\n  var stopRumEventCollection = _startRumEventCollection.stop\n  var addAction = _startRumEventCollection.addAction\n  cleanupTasks.push(stopRumEventCollection)\n  // drainPreStartTelemetry()\n\n  // telemetry.setContextProvider(function () {\n  //   return {\n  //     application: {\n  //       id: configuration.applicationId\n  //     },\n  //     session: {\n  //       id: session.findTrackedSession() && session.findTrackedSession().id\n  //     },\n  //     view: {\n  //       id: viewContexts.findView() && viewContexts.findView().id\n  //     },\n  //     action: {\n  //       id: actionContexts.findActionId(),\n  //       ids: actionContexts.findAllActionId()\n  //     }\n  //   }\n  // })\n  const {\n    addTiming,\n    startView,\n    setViewName,\n    setViewContext,\n    setViewContextProperty,\n    getViewContext,\n    stop: stopViewCollection\n  } = startViewCollection(\n    lifeCycle,\n    configuration,\n    location,\n    'domMutationObservable',\n    locationChangeObservable,\n    pageStateHistory,\n    recorderApi,\n    initialViewOptions\n  )\n  cleanupTasks.push(stopViewCollection)\n\n  // const _startResourceCollection = startResourceCollection(\n  //   lifeCycle,\n  //   configuration,\n  //   pageStateHistory\n  // )\n  // cleanupTasks.push(_startResourceCollection.stop)\n  // if (\n  //   PerformanceObserver.supportedEntryTypes &&\n  //   PerformanceObserver.supportedEntryTypes.includes(\n  //     RumPerformanceEntryType.LONG_ANIMATION_FRAME\n  //   )\n  // ) {\n  //   var longAnimationFrameCollection = startLongAnimationFrameCollection(\n  //     lifeCycle,\n  //     configuration\n  //   )\n  //   cleanupTasks.push(longAnimationFrameCollection.stop)\n  // } else {\n  //   startLongTaskCollection(lifeCycle, configuration)\n  // }\n\n  var _startErrorCollection = startErrorCollection(\n    lifeCycle,\n    configuration,\n    session,\n    pageStateHistory\n  )\n  var addError = _startErrorCollection.addError\n  // startRequestCollection(lifeCycle, configuration, session)\n\n  var internalContext = startInternalContext(\n    configuration.applicationId,\n    session,\n    viewContexts,\n    'actionContexts',\n    urlContexts\n  )\n  return {\n    addAction: addAction,\n    addError: addError,\n    addTiming: addTiming,\n    configuration: configuration,\n    startView,\n    setViewContext,\n    setViewContextProperty,\n    getViewContext,\n    setViewName,\n    lifeCycle: lifeCycle,\n    viewContexts: viewContexts,\n    session: session,\n\n    stopSession: function () {\n      session.expire()\n    },\n    getInternalContext: internalContext.get,\n    stop: function () {\n      cleanupTasks.forEach(function (task) {\n        task()\n      })\n    }\n  }\n}\n// function startRumTelemetry(configuration) {\n//   const telemetry = startTelemetry(TelemetryService.RUM, configuration)\n//   //   if (canUseEventBridge()) {\n//   //     const bridge = getEventBridge()\n//   //     telemetry.observable.subscribe((event) =>\n//   //       bridge.send('internal_telemetry', event)\n//   //     )\n//   //   }\n//   return telemetry\n// }\n\nexport function startRumEventCollection(\n  lifeCycle,\n  configuration,\n  location,\n  sessionManager,\n  userSessionManager,\n  pageStateHistory,\n  locationChangeObservable,\n  domMutationObservable,\n  getCommonContext,\n  reportError\n) {\n  var viewContexts = startViewContexts(lifeCycle)\n  var urlContexts = startUrlContexts(\n    lifeCycle,\n    locationChangeObservable,\n    location\n  )\n\n  // var _startActionCollection = startActionCollection(\n  //   lifeCycle,\n  //   domMutationObservable,\n  //   configuration,\n  //   pageStateHistory\n  // )\n  // var actionContexts = _startActionCollection.actionContexts\n  // var addAction = _startActionCollection.addAction\n\n  var displayContext = startDisplayContext()\n  startRumAssembly(\n    configuration,\n    lifeCycle,\n    sessionManager,\n    userSessionManager,\n    viewContexts,\n    urlContexts,\n    'actionContexts',\n    displayContext,\n    getCommonContext,\n    reportError\n  )\n  return {\n    viewContexts: viewContexts,\n    urlContexts: urlContexts,\n    pageStateHistory: pageStateHistory,\n    addAction: function () {}, // addAction,\n    actionContexts: 'actionContexts',\n    stop: function () {\n      displayContext.stop()\n      pageStateHistory.stop()\n      urlContexts.stop()\n      viewContexts.stop()\n    }\n  }\n}\n","export function buildCommonContext(\n  globalContextManager,\n  userContextManager,\n  recorderApi\n) {\n  return {\n    context: globalContextManager.getContext(),\n    user: userContextManager.getContext(),\n    hasReplay: false, // recorderApi.isRecording() ? true : undefined\n  }\n}\n","export var buildEnv = {\n  sdkVersion: __BUILD_ENV__SDK_VERSION__,\n  sdkName: 'df_web_rum_sdk'\n}\n","import {\n  assign,\n  display,\n  isPercentage,\n  validateAndBuildConfiguration,\n  validatePostRequestRequireParamsConfiguration,\n  isArray,\n  // TraceType,\n  isNullUndefinedDefaultValue,\n  DefaultPrivacyLevel,\n  objectHasValue,\n  isMatchOption,\n  // catchUserErrors,\n  getOrigin,\n  each\n} from '@cloudcare/browser-core'\nimport { buildEnv } from '../boot/buildEnv'\n// import { isTracingOption } from '../domain/tracing/tracer'\n\nexport function validateAndBuildRumConfiguration(initConfiguration) {\n  if (!initConfiguration.applicationId) {\n    display.error(\n      'Application ID is not configured, no RUM data will be collected.'\n    )\n    return\n  }\n  var requireParamsValidate =\n    validatePostRequestRequireParamsConfiguration(initConfiguration)\n  if (!requireParamsValidate) return\n  if (\n    initConfiguration.sessionOnErrorSampleRate !== undefined &&\n    !isPercentage(initConfiguration.sessionOnErrorSampleRate)\n  ) {\n    display.error(\n      'Error Session  Sample Rate should be a number between 0 and 100'\n    )\n    return\n  }\n  if (\n    initConfiguration.sessionReplaySampleRate !== undefined &&\n    !isPercentage(initConfiguration.sessionReplaySampleRate)\n  ) {\n    display.error(\n      'Session Replay Sample Rate should be a number between 0 and 100'\n    )\n    return\n  }\n  if (\n    initConfiguration.sessionReplayOnErrorSampleRate !== undefined &&\n    !isPercentage(initConfiguration.sessionReplayOnErrorSampleRate)\n  ) {\n    display.error(\n      'Error Session Replay Sample Rate should be a number between 0 and 100'\n    )\n    return\n  }\n  // var allowedTracingUrls = validateAndBuildTracingOptions(initConfiguration)\n  // if (!allowedTracingUrls) {\n  //   return\n  // }\n  //   if (initConfiguration.allowedTracingOrigins !== undefined) {\n  //     if (!isArray(initConfiguration.allowedTracingOrigins)) {\n  //       display.error('Allowed Tracing Origins should be an array')\n  //       return\n  //     }\n  //   }\n  //   if (initConfiguration.allowedDDTracingOrigins !== undefined) {\n  //     if (!isArray(initConfiguration.allowedDDTracingOrigins)) {\n  //       display.error('Allowed Tracing Origins should be an array')\n  //       return\n  //     }\n  //   }\n  // if (\n  //   initConfiguration.tracingSampleRate !== undefined &&\n  //   !isPercentage(initConfiguration.tracingSampleRate)\n  // ) {\n  //   display.error('Tracing Sample Rate should be a number between 0 and 100')\n  //   return\n  // }\n  if (\n    initConfiguration.excludedActivityUrls !== undefined &&\n    !isArray(initConfiguration.excludedActivityUrls)\n  ) {\n    display.error('Excluded Activity Urls should be an array')\n    return\n  }\n\n  var baseConfiguration = validateAndBuildConfiguration(initConfiguration)\n  if (!baseConfiguration) {\n    return\n  }\n  var trackUserInteractions = !!isNullUndefinedDefaultValue(\n    initConfiguration.trackUserInteractions,\n    initConfiguration.trackInteractions\n  )\n  return assign(\n    {\n      applicationId: initConfiguration.applicationId,\n      actionNameAttribute: initConfiguration.actionNameAttribute,\n      // sessionReplaySampleRate: isNullUndefinedDefaultValue(\n      //   initConfiguration.sessionReplaySampleRate,\n      //   100\n      // ),\n      sessionOnErrorSampleRate: isNullUndefinedDefaultValue(\n        initConfiguration.sessionOnErrorSampleRate,\n        0\n      ),\n      // sessionReplayOnErrorSampleRate: isNullUndefinedDefaultValue(\n      //   initConfiguration.sessionReplayOnErrorSampleRate,\n      //   0\n      // ),\n      // tracingSampleRate: isNullUndefinedDefaultValue(\n      //   initConfiguration.tracingSampleRate,\n      //   100\n      // ),\n      // allowedTracingUrls: [], // allowedTracingUrls,\n      // injectTraceHeader:\n      //   initConfiguration.injectTraceHeader &&\n      //   catchUserErrors(\n      //     initConfiguration.injectTraceHeader,\n      //     'injectTraceHeader threw an error:'\n      //   ),\n      // generateTraceId:\n      //   initConfiguration.generateTraceId &&\n      //   catchUserErrors(\n      //     initConfiguration.generateTraceId,\n      //     'generateTraceId threw an error:'\n      //   ),\n      excludedActivityUrls: isNullUndefinedDefaultValue(\n        initConfiguration.excludedActivityUrls,\n        []\n      ),\n      workerUrl: initConfiguration.workerUrl,\n      compressIntakeRequests: !!initConfiguration.compressIntakeRequests,\n      trackUserInteractions: trackUserInteractions,\n      enableLongAnimationFrame: !!initConfiguration.enableLongAnimationFrame,\n      trackViewsManually: !!initConfiguration.trackViewsManually,\n      // traceType: isNullUndefinedDefaultValue(\n      //   initConfiguration.traceType,\n      //   TraceType.DDTRACE\n      // ),\n      // traceId128Bit: !!initConfiguration.traceId128Bit,\n      defaultPrivacyLevel: objectHasValue(\n        DefaultPrivacyLevel,\n        initConfiguration.defaultPrivacyLevel\n      )\n        ? initConfiguration.defaultPrivacyLevel\n        : DefaultPrivacyLevel.MASK_USER_INPUT,\n      // shouldMaskNode:\n      //   initConfiguration.shouldMaskNode &&\n      //   catchUserErrors(\n      //     initConfiguration.shouldMaskNode,\n      //     'shouldMaskNode threw an error:'\n      //   )\n    },\n    baseConfiguration,\n    buildEnv\n  )\n}\n/**\n * Handles allowedTracingUrls and processes legacy allowedTracingOrigins\n */\nfunction validateAndBuildTracingOptions(initConfiguration) {\n  // Advise about parameters precedence.\n  if (\n    initConfiguration.allowedTracingUrls !== undefined &&\n    initConfiguration.allowedTracingOrigins !== undefined\n  ) {\n    display.warn(\n      'Both allowedTracingUrls and allowedTracingOrigins (deprecated) have been defined. The parameter allowedTracingUrls will override allowedTracingOrigins.'\n    )\n  }\n  // Handle allowedTracingUrls first\n  if (initConfiguration.allowedTracingUrls !== undefined) {\n    if (!isArray(initConfiguration.allowedTracingUrls)) {\n      display.error('Allowed Tracing URLs should be an array')\n      return\n    }\n    // if (initConfiguration.allowedTracingUrls.length !== 0 && initConfiguration.service === undefined) {\n    //   display.error('Service needs to be configured when tracing is enabled')\n    //   return\n    // }\n    // Convert from (MatchOption | TracingOption) to TracingOption, remove unknown properties\n    var tracingOptions = []\n    each(initConfiguration.allowedTracingUrls, function (option) {\n      if (isMatchOption(option)) {\n        tracingOptions.push({\n          match: option,\n          traceType: isNullUndefinedDefaultValue(\n            initConfiguration.traceType,\n            TraceType.DDTRACE\n          )\n        })\n      } else if (isTracingOption(option)) {\n        tracingOptions.push(option)\n      } else {\n        display.warn(\n          'Allowed Tracing Urls parameters should be a string, RegExp, function, or an object. Ignoring parameter',\n          option\n        )\n      }\n    })\n    return tracingOptions\n  }\n\n  // Handle conversion of allowedTracingOrigins to allowedTracingUrls\n  if (initConfiguration.allowedTracingOrigins !== undefined) {\n    if (!isArray(initConfiguration.allowedTracingOrigins)) {\n      display.error('Allowed Tracing Origins should be an array')\n      return\n    }\n\n    var tracingOptions = []\n    each(initConfiguration.allowedTracingOrigins, function (legacyMatchOption) {\n      var tracingOption = convertLegacyMatchOptionToTracingOption(\n        legacyMatchOption,\n        isNullUndefinedDefaultValue(\n          initConfiguration.traceType,\n          TraceType.DDTRACE\n        )\n      )\n      if (tracingOption) {\n        tracingOptions.push(tracingOption)\n      }\n    })\n\n    return tracingOptions\n  }\n  // Handle conversion of allowedDDTracingOrigins to allowedTracingUrls\n  if (initConfiguration.allowedDDTracingOrigins !== undefined) {\n    if (!isArray(initConfiguration.allowedDDTracingOrigins)) {\n      display.error('Allowed Tracing Origins should be an array')\n      return\n    }\n\n    var tracingOptions = []\n    each(\n      initConfiguration.allowedDDTracingOrigins,\n      function (legacyMatchOption) {\n        var tracingOption = convertLegacyMatchOptionToTracingOption(\n          legacyMatchOption,\n          isNullUndefinedDefaultValue(\n            initConfiguration.traceType,\n            TraceType.DDTRACE\n          )\n        )\n        if (tracingOption) {\n          tracingOptions.push(tracingOption)\n        }\n      }\n    )\n\n    return tracingOptions\n  }\n\n  return []\n}\n\n/**\n * Converts parameters from the deprecated allowedTracingOrigins\n * to allowedTracingUrls. Handles the change from origin to full URLs.\n */\nfunction convertLegacyMatchOptionToTracingOption(item, traceType) {\n  var match\n  if (typeof item === 'string') {\n    match = item\n  } else if (item instanceof RegExp) {\n    match = function (url) {\n      return item.test(getOrigin(url))\n    }\n  } else if (typeof item === 'function') {\n    match = function (url) {\n      return item(getOrigin(url))\n    }\n  }\n\n  if (match === undefined) {\n    display.warn(\n      'Allowed Tracing Origins parameters should be a string, RegExp or function. Ignoring parameter',\n      item\n    )\n    return undefined\n  }\n\n  return { match: match, traceType: traceType }\n}\n","import {\n  createBoundedBuffer,\n  display,\n  // canUseEventBridge,\n  displayAlreadyInitializedError,\n  willSyntheticsInjectRum,\n  noop,\n  timeStampNow,\n  clocksNow,\n  assign,\n  // addTelemetryConfiguration,\n  initFetchObservable,\n  deepClone,\n  // fetchAndApplyRemoteConfiguration,\n  getEventBridge\n} from '@cloudcare/browser-core'\nimport { validateAndBuildRumConfiguration } from '../domain/configuration'\n\nexport function createPreStartStrategy(\n  rumPublicApiOptions,\n  getCommonContext,\n  doStartRum\n) {\n  var ignoreInitIfSyntheticsWillInjectRum =\n    rumPublicApiOptions.ignoreInitIfSyntheticsWillInjectRum\n  var startDeflateWorker = rumPublicApiOptions.startDeflateWorker\n  var bufferApiCalls = createBoundedBuffer()\n\n  var firstStartViewCall\n\n  var deflateWorker\n\n  var cachedInitConfiguration\n  var cachedConfiguration\n\n  function tryStartRum() {\n    if (!cachedInitConfiguration || !cachedConfiguration) {\n      return\n    }\n\n    var initialViewOptions\n\n    if (cachedConfiguration.trackViewsManually) {\n      if (!firstStartViewCall) {\n        return\n      }\n      // An initial view is always created when starting RUM.\n      // When tracking views automatically, any startView call before RUM start creates an extra\n      // view.\n      // When tracking views manually, we use the ViewOptions from the first startView call as the\n      // initial view options, and we remove the actual startView call so we don't create an extra\n      // view.\n      bufferApiCalls.remove(firstStartViewCall.callback)\n      initialViewOptions = firstStartViewCall.options\n    }\n\n    var startRumResult = doStartRum(\n      cachedConfiguration,\n      deflateWorker,\n      initialViewOptions\n    )\n\n    bufferApiCalls.drain(startRumResult)\n  }\n\n  function doInit(initConfiguration) {\n    // var eventBridgeAvailable = canUseEventBridge()\n    // if (eventBridgeAvailable) {\n    //   initConfiguration = overrideInitConfigurationForBridge(initConfiguration)\n    // }\n\n    // Update the exposed initConfiguration to reflect the bridge and remote configuration overrides\n    cachedInitConfiguration = initConfiguration\n    // addTelemetryConfiguration(deepClone(initConfiguration))\n    if (cachedConfiguration) {\n      displayAlreadyInitializedError('DATAFLUX_RUM', initConfiguration)\n      return\n    }\n    var configuration = validateAndBuildRumConfiguration(initConfiguration)\n    if (!configuration) {\n      return\n    }\n\n    // if (!eventBridgeAvailable && !configuration.sessionStoreStrategyType) {\n    //   display.warn(\n    //     'No storage available for session. We will not send any data.'\n    //   )\n    //   return\n    // }\n\n    if (\n      configuration.compressIntakeRequests &&\n      !configuration.sendContentTypeByJson &&\n      !eventBridgeAvailable &&\n      startDeflateWorker\n    ) {\n      deflateWorker = startDeflateWorker(\n        configuration,\n        'RUM',\n        // Worker initialization can fail asynchronously, especially in Firefox where even CSP\n        // issues are reported asynchronously. For now, the SDK will continue its execution even if\n        // data won't be sent to Datadog. We could improve this behavior in the future.\n        noop\n      )\n      if (!deflateWorker) {\n        // `startDeflateWorker` should have logged an error message explaining the issue\n        return\n      }\n    }\n\n    cachedConfiguration = configuration\n    // Instrumuent fetch to track network requests\n    // This is needed in case the consent is not granted and some cutsomer\n    // library (Apollo Client) is storing uninstrumented fetch to be used later\n    // The subscrption is needed so that the instrumentation process is completed\n    initFetchObservable().subscribe(noop)\n\n    tryStartRum()\n  }\n\n  return {\n    init: function (initConfiguration) {\n      if (!initConfiguration) {\n        display.error('Missing configuration')\n        return\n      }\n      // Set the experimental feature flags as early as possible, so we can use them in most places\n\n      // Expose the initial configuration regardless of initialization success.\n      cachedInitConfiguration = initConfiguration\n\n      // If we are in a Synthetics test configured to automatically inject a RUM instance, we want\n      // to completely discard the customer application RUM instance by ignoring their init() call.\n      // But, we should not ignore the init() call from the Synthetics-injected RUM instance, so the\n      // internal `ignoreInitIfSyntheticsWillInjectRum` option is here to bypass this condition.\n      if (ignoreInitIfSyntheticsWillInjectRum && willSyntheticsInjectRum()) {\n        return\n      }\n      if (initConfiguration.remoteConfiguration) {\n        // fetchAndApplyRemoteConfiguration(initConfiguration, doInit)\n      } else {\n        doInit(initConfiguration)\n      }\n    },\n\n    getInitConfiguration: function () {\n      return cachedInitConfiguration\n    },\n\n    getInternalContext: noop,\n\n    stopSession: noop,\n\n    addTiming: function (name, time) {\n      if (time === undefined) {\n        time = timeStampNow()\n      }\n      bufferApiCalls.add(function (startRumResult) {\n        startRumResult.addTiming(name, time)\n      })\n    },\n\n    startView: function (options, startClocks) {\n      if (startClocks === undefined) {\n        startClocks = clocksNow()\n      }\n      const callback = function (startRumResult) {\n        startRumResult.startView(options, startClocks)\n      }\n      bufferApiCalls.add(callback)\n\n      if (!firstStartViewCall) {\n        firstStartViewCall = { options: options, callback: callback }\n        tryStartRum()\n      }\n    },\n    setViewName(name) {\n      bufferApiCalls.add((startRumResult) => startRumResult.setViewName(name))\n    },\n\n    setViewContext(context) {\n      bufferApiCalls.add((startRumResult) =>\n        startRumResult.setViewContext(context)\n      )\n    },\n\n    setViewContextProperty(key, value) {\n      bufferApiCalls.add((startRumResult) =>\n        startRumResult.setViewContextProperty(key, value)\n      )\n    },\n\n    getViewContext: () => {},\n    addAction: function (action, commonContext) {\n      if (commonContext === undefined) {\n        commonContext = getCommonContext()\n      }\n      bufferApiCalls.add(function (startRumResult) {\n        startRumResult.addAction(action, commonContext)\n      })\n    },\n\n    addError: function (providedError, commonContext) {\n      if (commonContext === undefined) {\n        commonContext = getCommonContext()\n      }\n      bufferApiCalls.add(function (startRumResult) {\n        startRumResult.addError(providedError, commonContext)\n      })\n    }\n  }\n}\n\nfunction overrideInitConfigurationForBridge(initConfiguration) {\n  return assign({}, initConfiguration, {\n    applicationId: '00000000-aaaa-0000-aaaa-000000000000',\n    clientToken: 'empty',\n    sessionSampleRate: 100,\n    defaultPrivacyLevel:\n      initConfiguration.defaultPrivacyLevel ??\n      getEventBridge()?.getPrivacyLevel()\n  })\n}\n","import {\n  makePublicApi,\n  createContextManager,\n  CustomerDataType,\n  // clocksNow,\n  // ActionType,\n  // deepClone,\n  // createHandlingStack,\n  // sanitizeUser,\n  // checkUser,\n  // callMonitored,\n  assign,\n  monitor,\n  storeContextManager,\n  createIdentityEncoder,\n  // addTelemetryUsage,\n  // sanitize,\n  // createCustomerDataTrackerManager,\n  // CustomerDataCompressionStatus,\n  displayAlreadyInitializedError\n} from '@cloudcare/browser-core'\nimport { buildCommonContext } from '../domain/contexts/commonContext'\nimport { createPreStartStrategy } from './perStartRum'\nvar RUM_STORAGE_KEY = 'rum'\nexport function makeRumPublicApi(startRumImpl, recorderApi, options) {\n  if (options === undefined) {\n    options = {}\n  }\n  // const customerDataTrackerManager = createCustomerDataTrackerManager(\n  //   CustomerDataCompressionStatus.Unknown\n  // )\n  const globalContextManager = createContextManager('global', {\n    // customerDataTracker: customerDataTrackerManager.getOrCreateTracker(\n    //   CustomerDataType.GlobalContext\n    // )\n  })\n  const userContextManager = createContextManager('user', {\n    // customerDataTracker: customerDataTrackerManager.getOrCreateTracker(\n    //   CustomerDataType.User\n    // ),\n    propertiesConfig: {\n      id: { type: 'string' },\n      name: { type: 'string' },\n      email: { type: 'string' }\n    }\n  })\n  function getCommonContext() {\n    return buildCommonContext(\n      globalContextManager,\n      userContextManager,\n      recorderApi\n    )\n  }\n  let strategy = createPreStartStrategy(\n    options,\n    getCommonContext,\n    function (configuration, deflateWorker, initialViewOptions) {\n      if (configuration.storeContextsToLocal) {\n        storeContextManager(\n          configuration,\n          globalContextManager,\n          RUM_STORAGE_KEY,\n          CustomerDataType.GlobalContext\n        )\n        storeContextManager(\n          configuration,\n          userContextManager,\n          RUM_STORAGE_KEY,\n          CustomerDataType.User\n        )\n      }\n      // customerDataTrackerManager.setCompressionStatus(\n      //   deflateWorker\n      //     ? CustomerDataCompressionStatus.Enabled\n      //     : CustomerDataCompressionStatus.Disabled\n      // )\n      var startRumResult = startRumImpl(\n        configuration,\n        recorderApi,\n        'customerDataTrackerManager',\n        getCommonContext,\n        initialViewOptions,\n        deflateWorker && options.createDeflateEncoder\n          ? function (streamId) {\n              return options.createDeflateEncoder(deflateWorker, streamId)\n            }\n          : createIdentityEncoder\n      )\n      // recorderApi.onRumStart(\n      //   startRumResult.lifeCycle,\n      //   configuration,\n      //   startRumResult.session,\n      //   startRumResult.viewContexts,\n      //   deflateWorker\n      // )\n\n      strategy = createPostStartStrategy(strategy, startRumResult)\n\n      return startRumResult\n    }\n  )\n\n  const startView = monitor(function (options) {\n    const sanitizedOptions =\n      typeof options === 'object' ? options : { name: options }\n    strategy.startView(sanitizedOptions)\n    // if (sanitizedOptions.context) {\n    //   customerDataTrackerManager\n    //     .getOrCreateTracker(CustomerDataType.View)\n    //     .updateCustomerData(sanitizedOptions.context)\n    // }\n    // addTelemetryUsage({ feature: 'start-view' })\n  })\n\n  var rumPublicApi = makePublicApi({\n    init: monitor(function (initConfiguration) {\n      strategy.init(initConfiguration)\n    }),\n    // setViewName: monitor((name) => {\n    //   strategy.setViewName(name)\n    //   // addTelemetryUsage({ feature: 'set-view-name' })\n    // }),\n\n    // setViewContext: monitor((context) => {\n    //   strategy.setViewContext(context)\n    //   // addTelemetryUsage({ feature: 'set-view-context' })\n    // }),\n\n    // setViewContextProperty: monitor((key, value) => {\n    //   strategy.setViewContextProperty(key, value)\n    //   // addTelemetryUsage({ feature: 'set-view-context-property' })\n    // }),\n\n    // getViewContext: monitor(() => {\n    //   // addTelemetryUsage({ feature: 'set-view-context-property' })\n    //   return strategy.getViewContext()\n    // }),\n    // /** @deprecated: use setGlobalContextProperty instead */\n    // addRumGlobalContext: monitor(function (key, value) {\n    //   globalContextManager.setContextProperty(key, value)\n    //   addTelemetryUsage({ feature: 'set-global-context' })\n    // }),\n    // setGlobalContextProperty: monitor(function (key, value) {\n    //   globalContextManager.setContextProperty(key, value)\n    //   // addTelemetryUsage({ feature: 'set-global-context' })\n    // }),\n\n    // /** @deprecated: use removeGlobalContextProperty instead */\n    // removeRumGlobalContext: monitor(function (key) {\n    //   return globalContextManager.removeContextProperty(key)\n    // }),\n    // removeGlobalContextProperty: monitor(function (key) {\n    //   return globalContextManager.removeContextProperty(key)\n    // }),\n\n    // /** @deprecated: use getGlobalContext instead */\n    // getRumGlobalContext: monitor(function () {\n    //   return globalContextManager.getContext()\n    // }),\n    // getGlobalContext: monitor(function () {\n    //   return globalContextManager.getContext()\n    // }),\n\n    // /** @deprecated: use setGlobalContext instead */\n    // setRumGlobalContext: monitor(function (context) {\n    //   globalContextManager.setContext(context)\n    //   addTelemetryUsage({ feature: 'set-global-context' })\n    // }),\n    // setGlobalContext: monitor(function (context) {\n    //   globalContextManager.setContext(context)\n    //   // addTelemetryUsage({ feature: 'set-global-context' })\n    // }),\n\n    // clearGlobalContext: monitor(function () {\n    //   return globalContextManager.clearContext()\n    // }),\n\n    // getInitConfiguration: monitor(function () {\n    //   return deepClone(strategy.initConfiguration)\n    // }),\n    // getInternalContext: monitor(function (startTime) {\n    //   return strategy.getInternalContext(startTime)\n    // }),\n    // addDebugSession: monitor(function (id) {}),\n    // clearDebugSession: monitor(function () {}),\n    // getDebugSession: monitor(function () {}),\n    // addAction: monitor(function (name, context) {\n    //   const handlingStack = createHandlingStack()\n\n    //   callMonitored(function () {\n    //     strategy.addAction({\n    //       name: sanitize(name),\n    //       context: sanitize(context),\n    //       startClocks: clocksNow(),\n    //       type: ActionType.CUSTOM,\n    //       handlingStack: handlingStack\n    //     })\n    //     // addTelemetryUsage({ feature: 'add-action' })\n    //   })\n    // }),\n    // addError: monitor(function (error, context) {\n    //   var handlingStack = createHandlingStack()\n    //   callMonitored(function () {\n    //     strategy.addError({\n    //       error, // Do not sanitize error here, it is needed unserialized by computeRawError()\n    //       handlingStack,\n    //       context: sanitize(context),\n    //       startClocks: clocksNow()\n    //     })\n    //     // addTelemetryUsage({ feature: 'add-error' })\n    //   })\n    // }),\n    // addTiming: monitor(function (name, time) {\n    //   strategy.addTiming(sanitize(name), time)\n    // }),\n    // setUser: monitor(function (newUser) {\n    //   if (checkUser(newUser)) {\n    //     userContextManager.setContext(sanitizeUser(newUser))\n    //   }\n    //   // addTelemetryUsage({ feature: 'set-user' })\n    // }),\n    // getUser: monitor(function () {\n    //   return userContextManager.getContext()\n    // }),\n    // setUserProperty: monitor(function (key, property) {\n    //   var newUser = {}\n    //   newUser[key] = property\n    //   var sanitizedProperty = sanitizeUser(newUser)[key]\n    //   userContextManager.setContextProperty(key, sanitizedProperty)\n    //   // addTelemetryUsage({ feature: 'set-user' })\n    // }),\n    // removeUserProperty: monitor(function (key) {\n    //   return userContextManager.removeContextProperty(key)\n    // }),\n\n    // /** @deprecated: renamed to clearUser */\n    // removeUser: monitor(function () {\n    //   return userContextManager.clearContext()\n    // }),\n    // clearUser: monitor(function () {\n    //   return userContextManager.clearContext()\n    // }),\n    // startView: startView,\n    // stopSession: monitor(function () {\n    //   strategy.stopSession()\n    //   // addTelemetryUsage({ feature: 'stop-session' })\n    // }),\n    // startSessionReplayRecording: monitor(function (options) {\n    //   recorderApi.start(options)\n    //   addTelemetryUsage({\n    //     feature: 'start-session-replay-recording',\n    //     force: options && options.force\n    //   })\n    // }),\n    // stopSessionReplayRecording: monitor(recorderApi.stop)\n  })\n  return rumPublicApi\n}\nfunction createPostStartStrategy(preStartStrategy, startRumResult) {\n  return assign(\n    {\n      init: function (initConfiguration) {\n        displayAlreadyInitializedError('DATAFLUX_RUM', initConfiguration)\n      },\n      initConfiguration: preStartStrategy.getInitConfiguration()\n    },\n    startRumResult\n  )\n}\n","// import { defineGlobal, getGlobalObject } from '@cloudcare/browser-core'\nimport { startRum } from './rum'\nimport { makeRumPublicApi } from './rumPublicApi'\n// import { startRecording } from './startRecording'\n// import { makeRecorderApi } from './recorderApi'\n// import { createDeflateEncoder, startDeflateWorker } from '../domain/deflate'\n// var recorderApi = makeRecorderApi(startRecording)\nexport var datafluxRum = makeRumPublicApi(startRum, 'recorderApi', {\n  startDeflateWorker: null,\n  createDeflateEncoder: null,\n})\n\n// defineGlobal(getGlobalObject(), 'DATAFLUX_RUM', datafluxRum)\n","import { datafluxRum } from './boot/rum.entry'\nexport { datafluxRum }\n"],"names":["ConsoleApiName","warn","error","globalConsole","console","originalConsoleMethods","Object","keys","forEach","name","PREFIX","display","bind","catchUserErrors","fn","errorMsg","args","slice","call","arguments","apply","err","each","assign","makePublicApi","stub","publicApi","onReady","callback","defineGlobal","global","api","existingGlobalVariable","q","getGlobalObject","globalThis","_typeof","defineProperty","prototype","get","configurable","globalObject","_gc_temp_","self","window","getZoneJsOriginalValue","target","browserWindow","original","Zone","__symbol__","onMonitorErrorCollected","debugMode","resetMonitor","undefined","monitor","callMonitored","context","e","setTimeout","delay","clearTimeout","timeoutId","setInterval","clearInterval","ArrayProto","Array","ObjProto","toString","hasOwnProperty","nativeForEach","nativeIsArray","isArray","breaker","obj","iterator","length","i","l","key","source","prop","shallowClone","object","extend","extend2Lev","isObject","isFunction","f","test","isArguments","toArray","iterable","values","results","value","filter","arr","ret","val","push","map","some","flag","every","cssEscape","str","CSS","escape","replace","ch","asCodePoint","charCodeAt","isEmptyObject","objectEntries","res","isString","isDate","isBoolean","isNumber","String","_encodeDates","encodeDates","v","k","formatDate","throttle","wait","options","needLeadingExecution","leading","needTrailingExecution","trailing","inWaitPeriod","pendingExecutionWithParameters","pendingTimeoutId","throttled","cancel","d","pad","n","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","_searchObjDate","searchObjDate","o","a","b","_searchObjString","searchObjString","formatString","unique","ar","temp","utf8Encode","string","utftext","start","end","stringl","c1","enc","fromCharCode","substring","base64Encode","data","btoa","encodeURIComponent","match","p1","b64","o1","o2","o3","h1","h2","h3","h4","bits","ac","tmp_arr","charAt","join","UUID","placeholder","parseInt","Math","random","concat","replaceNumberCharByPath","path","pathGroup","urlParse","para","URLParser","_fields","Username","Password","Port","Protocol","Host","Path","URL","QueryString","Fragment","_values","_regex","_parse","setUrl","_initValues","addQueryString","queryObj","query","RegExp","getParse","getUrl","url","Origin","exec","c","localStorage","getItem","parse","storedValue","JSON","sd","log","set","setItem","remove","removeItem","isSupport","supported","sessionStorage","getQueryParamsFromUrl","result","split","queryString","getURLSearchParams","decodeParam","decodeURIComponent","pairs","pos","indexOf","createCircularReferenceChecker","WeakSet","hasAlreadyBeenSeen","has","add","array","getType","mergeInto","destination","circularReferenceChecker","Date","getTime","flags","ignoreCase","multiline","sticky","unicode","merged","deepClone","getStatusGroup","status","substr","noop","ONE_SECOND","ONE_MINUTE","ONE_HOUR","ONE_DAY","ONE_YEAR","performDraw","threshold","round","num","decimals","toFixed","msToNs","duration","mapValues","newObject","toServerDuration","getRelativeTime","timestamp","getNavigationStart","preferredNow","relativeNow","getTimestamp","relativeTime","performance","now","clocksNow","relative","timeStamp","timeStampNow","dateNow","looksLikeRelativeTime","time","elapsed","clocksOrigin","relativeToClocks","getCorrectedTimeStamp","currentDrift","addDuration","correctedOrigin","navigationStart","timing","COMMA_SEPARATED_KEY_VALUE","findCommaSeparatedValue","rawString","lastIndex","findCommaSeparatedValues","Map","findByPath","pathArr","shift","safeTruncate","candidate","lastChar","isMatchOption","item","itemType","includes","search","find","predicate","arrayFrom","arrayLike","from","Set","findLast","isPercentage","getLocationOrigin","getLinkElementOrigin","location","Browser","IE","CHROMIUM","SAFARI","OTHER","isIE","detectBrowserCached","isChromium","isSafari","browserCache","isNullUndefinedDefaultValue","detectBrowser","_browserWindow$naviga","userAgent","navigator","chrome","vendor","document","documentMode","element","origin","sanitizedHost","host","protocol","withSnakeCaseKeys","toSnakeCase","deepSnakeCase","word","uppercaseLetter","index","toLowerCase","defaultValue","objectHasValue","startsWith","endsWith","splice","tryToClone","response","clone","isHashAnAnchor","hash","correspondingId","getElementById","getPathFromHash","discardNegativeDuration","BUFFER_LIMIT","createBoundedBuffer","buffer","drain","arg","END_OF_TIMES","Infinity","CLEAR_OLD_VALUES_INTERVAL","cleanupHistoriesInterval","cleanupTasks","cleanupHistories","task","createValueHistory","params","expireDelay","maxEntries","entries","clearExpiredValues","oldTimeThreshold","endTime","pop","startTime","entry","close","unshift","returnInactive","_i","entries_1","closeActive","latestEntry","findAll","reset","stop","size","VariableLibrary","infoMap","engine","browser","os","device","MethodLibrary","getMatchMap","u","Trident","Presto","WebKit","Gecko","Safari","Chrome","Edge","Firefox","Chromium","Opera","Vivaldi","Yandex","Arora","Lunascape","QupZilla","Kindle","Iceweasel","Konqueror","Iceape","SeaMonkey","Epiphany","UC","QQBrowser","QQ","Baidu","Maxthon","Sogou","LBBROWSER","TheWorld","XiaoMi","Quark","Qiyu","Wechat","Taobao","Alipay","Weibo","Douban","Suning","iQiYi","Windows","Linux","Android","Ubuntu","FreeBSD","Debian","BlackBerry","MeeGo","Symbian","iOS","WebOS","Mobile","Tablet","iPad","matchInfoMap","_this","s","getOS","getOSVersion","osVersion","osMajor","oldWindowsVersionMap","Windows_Phone","Mac_OS","version","getOrientationStatu","orientationStatus","orientation","matchMedia","matches","getDeviceType","getNetwork","connection","mozConnection","webkitConnection","type","effectiveType","getLanguage","language","browserLanguage","toUpperCase","getTimeZone","timeZone","Intl","DateTimeFormat","resolvedOptions","getBrowserInfo","_mime","option","mimeTypes","is360","chrome_version","showModalDialog","navigator_top","screenTop","screenY","browerVersionMap","Firefox_Focus","Coc_Coc","_","SE","EE","Explorer","WechatWork","browserVersion","browserMajor","_deviceInfo","osVersionMajor","browserVersionMajor","screenSize","screen","width","height","networkType","deviceInfo","DOM_EVENT","BEFORE_UNLOAD","CLICK","DBL_CLICK","KEY_DOWN","LOAD","POP_STATE","SCROLL","TOUCH_START","TOUCH_END","TOUCH_MOVE","VISIBILITY_CHANGE","PAGE_SHOW","FREEZE","RESUME","DOM_CONTENT_LOADED","POINTER_DOWN","POINTER_UP","POINTER_CANCEL","HASH_CHANGE","PAGE_HIDE","MOUSE_DOWN","MOUSE_UP","MOUSE_MOVE","FOCUS","BLUR","CONTEXT_MENU","RESIZE","CHANGE","INPUT","PLAY","PAUSE","SECURITY_POLICY_VIOLATION","SELECTION_CHANGE","STORAGE","ResourceType","DOCUMENT","XHR","BEACON","FETCH","JS","IMAGE","FONT","MEDIA","ActionType","CUSTOM","FrustrationType","RAGE_CLICK","ERROR_CLICK","DEAD_CLICK","RumEventType","ACTION","ERROR","LONG_TASK","VIEW","RESOURCE","LOGGER","RumLongTaskEntryType","LONG_ANIMATION_FRAME","ViewLoadingType","INITIAL_LOAD","ROUTE_CHANGE","RequestType","TraceType","DDTRACE","ZIPKIN_MULTI_HEADER","ZIPKIN_SINGLE_HEADER","W3C_TRACEPARENT","W3C_TRACEPARENT_64","SKYWALKING_V3","JAEGER","ErrorHandling","HANDLED","UNHANDLED","NonErrorPrefix","UNCAUGHT","PROVIDED","instrumentMethod","targetPrototype","method","onPreCall","opts","computeHandlingStack","stopped","instrumentation","parameters","postCallCallback","onPostCall","handlingStack","instrumentSetter","property","after","originalDescriptor","getOwnPropertyDescriptor","stoppedInstrumentation","_instrumentation","instrumentationWrapper","jsonStringify","replacer","space","stringify","restoreObjectPrototypeToJson","detachToJsonMethod","restoreArrayPrototypeToJson","restoreValuePrototypeToJson","getPrototypeOf","restoreValueToJson","_unused","objectToJson","toJSON","UNKNOWN_FUNCTION","computeStackTrace","ex","stack","stackProperty","tryToGetString","exString","line","stackFrame","parseChromeLine","parseChromeAnonymousLine","parseWinLine","parseGeckoLine","func","message","fileUrl","filePosition","CHROME_LINE_RE","CHROME_EVAL_RE","parts","isNative","isEval","submatch","column","CHROME_ANONYMOUS_FUNCTION_RE","WINJS_LINE_RE","GECKO_LINE_RE","GECKO_EVAL_RE","ERROR_TYPES_RE","startUnhandledErrorCollection","_instrumentOnError","instrumentOnError","_instrumentUnhandledRejection","instrumentUnhandledRejection","messageObj","errorObj","stackTrace","Error","tryToParseMessage","groups","reason","ONE_KIBI_BYTE","ONE_MEBI_BYTE","HAS_MULTI_BYTES_CHARACTERS","computeBytesCount","TextEncoder","encode","Blob","concatBuffers","buffers","reduce","total","Uint8Array","offset","buffers_1","SANITIZE_DEFAULT_MAX_CHARACTER_COUNT","JSON_PATH_ROOT_ELEMENT","KEY_DECORATION_LENGTH","sanitize","maxCharacterCount","containerQueue","visitedObjectsWithPath","WeakMap","sanitizedData","sanitizeProcessor","accumulatedCharacterCount","warnOverCharacterLimit","containerToProcess","separatorLength","targetData","parentPath","queue","sourceToSanitize","tryToApplyToJSON","sanitizePrimitivesAndFunctions","sanitizedSource","sanitizeObjects","sourceAsObject","currentPath","description","Event","sanitizeEvent","event","isTrusted","currentTarget","_unused2","changeType","NO_ERROR_STACK_PRESENT_MESSAGE","ErrorSource","AGENT","CONSOLE","NETWORK","SOURCE","computeRawError","originalError","startClocks","nonErrorPrefix","handling","isErrorInstance","computeMessage","hasUsableStack","toStackTraceString","causes","flattenErrorCauses","formatUnknownError","errorObject","createHandlingStack","internalFramesToSkip","formattedStack","formatErrorMessage","frame","getFileFromStackTraceString","execResult","parentSource","currentError","cause","trackRuntimeError","errorObservable","notify","LifeCycleEventType","AUTO_ACTION_COMPLETED","BEFORE_VIEW_CREATED","VIEW_CREATED","VIEW_UPDATED","BEFORE_VIEW_UPDATED","VIEW_ENDED","AFTER_VIEW_ENDED","SESSION_RENEWED","SESSION_EXPIRED","PAGE_EXITED","REQUEST_STARTED","REQUEST_COMPLETED","RAW_RUM_EVENT_COLLECTED","RUM_EVENT_COLLECTED","RAW_ERROR_COLLECTED","RAW_LOG_COLLECTED","LOG_COLLECTED","LifeCycle","callbacks","eventType","eventCallbacks","subscribe","unsubscribe","other","limitModification","modifiableFieldPaths","modifier","_ref","_ref2","_slicedToArray","fieldPath","fieldType","setValueAtPath","pathSegments","_pathSegments","_toArray","field","restPathSegments","isValidObject","setNestedValue","newType","createEventRateLimiter","limit","onLimitReached","eventCount","allowNextEvent","isLimitReached","_Observable","onFirstSubscribe","observers","onLastUnsubscribe","observer","Observable","mergeObservables","observables","globalObservable","subscriptions","observable","subscription","normalizeUrl","buildUrl","href","isValidUrl","getOrigin","getPathName","pathname","getSearch","getHash","base","checkURLSupported","doc","anchorElement","createElement","implementation","createHTMLDocument","baseElement","head","appendChild","body","isURLSupported","readBytesFromStream","stream","reader","getReader","chunks","readBytesCount","readMore","read","then","done","onDone","collectStreamBody","bytesLimit","bytes","limitExceeded","completeBuffer","chunk","requestIdleCallback","cancelIdleCallback","id","requestIdleCallbackShim","MAX_TASK_TIME","didTimeout","timeRemaining","max","IDLE_CALLBACK_TIMEOUT","MAX_EXECUTION_TIME_ON_TIMEOUT","createTaskQueue","pendingTasks","run","deadline","executionTimeRemaining","scheduleNextRun","timeout","TRIM_REGIX","typeMap","rum","sessionReplay","getEndPointUrl","configuration","subUrl","datakitOrigin","datakitUrl","site","trim","endpoint","lastIndexOf","clientToken","computeTransportConfiguration","initConfiguration","isIntakeUrl","isServerError","request","rumEndpoint","logsEndpoint","sessionReplayEndPoint","isIntakeRequest","notTakeRequest","takeUrl","getCookieName","crossSite","domain","secure","partitioned","setCookie","date","setTime","expires","toUTCString","sameSite","cookie","getCookie","initCookieParsed","getInitCookie","resetInitCookies","deleteCookie","areCookiesAuthorized","testCookieName","testCookieValue","isCookieCorrectlySet","getCurrentSiteCache","getCurrentSite","domainLevels","hostname","candidateDomain","SESSION_TIME_OUT_DELAY","SESSION_EXPIRATION_DELAY","SESSION_STORE_KEY","SESSION_ENTRY_REGEXP","SESSION_ENTRY_SEPARATOR","EXPIRED","getExpiredSessionState","isExpired","isSessionInNotStartedState","session","isSessionStarted","isSessionInExpiredState","isActiveSession","sessionState","created","Number","expire","expandSessionState","toSessionString","toSessionState","sessionString","isValidSessionString","_matches","selectCookieStrategy","cookieOptions","buildCookieOptions","initCookieStrategy","cookieStore","isLockEnabled","persistSession","persistSessionCookie","retrieveSession","retrieveSessionCookie","expireSession","expireSessionCookie","useSecureSessionCookie","usePartitionedCrossSiteSessionCookie","useCrossSiteSessionCookie","trackSessionAcrossSubdomains","LOCAL_STORAGE_TEST_KEY","selectLocalStorageStrategy","testKey","retrievedId","initLocalStorageStrategy","persistInLocalStorage","retrieveSessionFromLocalStorage","expireSessionFromLocalStorage","LOCK_RETRY_DELAY","LOCK_MAX_TRIES","bufferedOperations","ongoingOperations","processSessionStoreOperations","operations","sessionStoreStrategy","numberOfRetries","persistWithLock","lock","currentLock","retrieveStore","next","currentStore","retryLater","processedSession","process","sessionStore","currentNumberOfRetries","nextOperations","STORAGE_POLL_DELAY","selectSessionStoreStrategyType","sessionStoreStrategyType","allowFallbackToLocalStorage","startSessionStore","productKey","computeSessionState","renewObservable","expireObservable","sessionStateUpdateObservable","watchSessionTimeoutId","watchSession","sessionCache","startSession","_throttle","synchronizedSession","synchronizeSession","expandOrRenewSessionState","hasSessionInCache","renewSessionInCache","throttledExpandOrRenewSession","cancelExpandOrRenewSession","expandSession","isSessionInCacheOutdated","expireSessionInCache","previousState","newState","_computeSessionState","trackingType","isTracked","updateSessionState","partialSessionState","expandOrRenewSession","getSession","restartSession","DefaultPrivacyLevel","ALLOW","MASK","MASK_USER_INPUT","validateAndBuildConfiguration","sampleRate","sessionSampleRate","telemetrySampleRate","beforeSend","service","env","telemetryEnabled","silentMultipleInit","batchBytesLimit","eventRateLimiterThreshold","maxTelemetryEventsPerPage","flushTimeout","batchMessagesLimit","messageBytesLimit","resourceUrlLimit","storeContextsToLocal","storeContextsKey","sendContentTypeByJson","retryMaxSize","validatePostRequestRequireParamsConfiguration","fetchObservable","initFetchObservable","createFetchObservable","resetFetchObservable","fetch","fetchMethod","input","init","methodFromParams","Request","state","responsePromise","afterSend","startContext","reportFetch","partialContext","responseType","constructor","Response","isAborted","signal","aborted","DOMException","code","ABORT_ERR","addEventListener","eventTarget","listener","addEventListeners","eventNames","wrappedListener","once","passive","capture","listenerTarget","EventTarget","eventName","xhrObservable","xhrContexts","initXhrObservable","createXhrObservable","openInstrumentMethod","XMLHttpRequest","openXhr","sendInstrumentMethod","sendXhr","abortInstrumentMethod","abortXhr","xhr","hasBeenReported","stopInstrumentingOnReadyStateChange","readyState","DONE","onEnd","unsubscribeLoadEndListener","completeContext","PageExitReason","HIDDEN","UNLOADING","PAGEHIDE","FROZEN","createPageExitObservable","visibilityChangeListener","visibilityState","beforeUnloadListener","isPageExitReason","runOnReadyState","expectedReadyState","commonTags","sdk_name","sdk_version","app_id","userid","user_email","user_name","session_id","session_type","session_sampling","is_signin","os_version","os_version_major","browser_version","browser_version_major","screen_size","network_type","time_zone","view_id","view_referrer","view_url","view_host","view_path","view_name","view_path_group","commonFields","view_url_query","action_id","action_ids","view_in_foreground","session_has_replay","is_login","page_states","session_sample_rate","session_replay_sample_rate","session_on_error_sample_rate","session_replay_on_error_sample_rate","drift","dataMap","view","tags","view_loading_type","view_apdex_level","view_privacy_replay_level","fields","sampled_for_replay","sampled_for_error_replay","sampled_for_error_session","session_error_timestamp","is_active","session_replay_stats","session_is_active","view_error_count","view_resource_count","view_long_task_count","view_action_count","first_contentful_paint","largest_contentful_paint","largest_contentful_paint_element_selector","cumulative_layout_shift","cumulative_layout_shift_time","cumulative_layout_shift_target_selector","first_input_delay","loading_time","dom_interactive","dom_content_loaded","dom_complete","load_event","first_input_time","first_input_target_selector","first_paint_time","interaction_to_next_paint","interaction_to_next_paint_target_selector","resource_load_time","time_to_interactive","dom","dom_ready","time_spent","first_byte","frustration_count","custom_timings","resource","trace_id","span_id","resource_id","resource_status","resource_status_group","resource_method","resource_size","resource_url","resource_url_host","resource_url_path","resource_url_path_group","resource_url_query","resource_delivery_type","resource_type","resource_protocol","resource_encode_size","resource_decode_size","resource_transfer_size","resource_render_blocking_status","resource_dns","resource_tcp","resource_ssl","resource_ttfb","resource_trans","resource_redirect","resource_first_byte","resource_dns_time","resource_download_time","resource_first_byte_time","resource_connect_time","resource_ssl_time","resource_redirect_time","error_id","error_source","error_type","error_handling","error_message","error_stack","error_causes","error_handling_stack","long_task","long_task_id","blocking_duration","first_ui_event_timestamp","render_start","style_and_layout_start","long_task_start_time","scripts","action","action_type","action_name","action_error_count","action_resource_count","action_frustration_types","action_long_task_count","action_target","action_position","telemetry","error_kind","connectivity","runtime_env","usage","browser_log","error_resource_url","error_resource_url_host","error_resource_url_path","error_resource_url_path_group","error_resource_status","error_resource_status_group","error_resource_method","VISIBILITY_CHECK_DELAY","SESSION_CONTEXT_TIMEOUT_DELAY","stopCallbacks","startSessionManager","sessionContextHistory","buildSessionContext","trackActivity","trackVisibility","trackResume","hasError","findSession","stopSessionManager","_addEventListeners","expandSessionWhenVisible","_addEventListener","visibilityCheckInterval","cb","_addEventListener2","MAX_ONGOING_BYTES_COUNT","MAX_ONGOING_REQUESTS","MAX_QUEUE_BYTES_COUNT","MAX_BACKOFF_TIME","INITIAL_BACKOFF_TIME","TransportStatus","UP","FAILURE_DETECTED","DOWN","RetryReason","AFTER_SUCCESS","AFTER_RESUME","sendWithRetryStrategy","payload","sendStrategy","endpointUrl","reportError","transportStatus","queuedPayloads","bandwidthMonitor","canHandle","send","onSuccess","retryQueuedPayloads","onFailure","enqueue","scheduleRetry","first","dequeue","currentBackoffTime","min","responseData","shouldRetryRequest","ongoingRequestCount","retry","count","lastFailureStatus","isFull","queueFullReported","previousQueue","newPayloadQueue","onLine","newRetryState","newBandwidthMonitor","bytesCount","ongoingByteCount","addBatchPrecision","encoding","createHttpRequest","retryState","sendStrategyForRetry","onResponse","fetchKeepAliveStrategy","sendOnExit","sendBeaconStrategy","canUseBeacon","sendBeacon","beaconData","isQueued","reportBeaconError","sendXHR","hasReportedBeaconError","canUseKeepAlive","isKeepAliveSupported","fetchOption","keepalive","mode","headers","open","setRequestHeader","escapeRowData","reg","escapeJsonValue","isTag","escapeFieldValueStr","escapeRowField","CUSTOM_KEYS","processedMessageByDataMap","rowStr","rowData","hasFileds","measurement","tagsStr","filterFileds","value_path","_key","_value","fieldsStr","_valueData","_tagKeys","createBatch","encoder","flushController","upsertBuffer","flushSubscription","flushObservable","flush","getMessageText","messages","isEmpty","serializedMessage","estimatedMessageBytesCount","notifyBeforeAddMessage","notifyAfterAddMessage","write","realMessageBytesCount","hasMessageFor","removedMessage","messageBytesCount","estimateEncodedBytesCount","notifyAfterRemoveMessage","processedMessage","addOrUpdate","upsertMessages","isPageExit","isAsync","encoderResult","finishSync","outputBytesCount","formatPayloadFromEncoder","pendingMessages","pendingData","Boolean","text","finish","upsert","output","createFlushController","messagesLimit","durationLimit","pageExitObservable","sessionExpireObservable","pageExitSubscription","sessionExpireSubscription","currentBytesCount","currentMessagesCount","flushReason","messagesCount","cancelDurationLimitTimeout","durationLimitTimeoutId","scheduleDurationLimitTimeout","getMessagesCount","messageBytesCountDiff","startBatchWithReplica","primary","batchFactoryImp","primaryBatch","createBatchFromConfig","batchConfiguration","getEventBridgeGlobal","getEventBridge","eventBridgeGlobal","getCapabilities","getPrivacyLevel","getAllowedWebViewHosts","viewId","sendEvent","BridgeCapability","RECORDS","bridgeSupports","capability","bridge","canUseEventBridge","_getGlobalObject$loca","currentHost","allowedHost","SYNTHETICS_TEST_ID_COOKIE_NAME","SYNTHETICS_RESULT_ID_COOKIE_NAME","SYNTHETICS_INJECTS_RUM_COOKIE_NAME","willSyntheticsInjectRum","_GUANCE_SYNTHETICS_INJECTS_RUM","getSyntheticsTestId","_GUANCE_SYNTHETICS_PUBLIC_ID","getSyntheticsResultId","_GUANCE_SYNTHETICS_RESULT_ID","ensureProperties","propertiesConfig","newContext","_objectSpread","_Object$entries","_Object$entries$_i","_Object$entries$_i$","required","createContextManager","customerDataTracker","_ref$propertiesConfig","changeObservable","contextManager","getContext","setContext","updateCustomerData","clearContext","setContextProperty","_defineProperty","removeContextProperty","resetCustomerData","CustomerDataType","FeatureFlag","User","GlobalContext","View","CONTEXT_STORE_KEY_PREFIX","storageListeners","storeContextManager","customerDataType","storageKey","buildStorageKey","synchronizeWithStorage","dumpToStorage","getFromStorage","rawContext","removeStorageListeners","CUSTOMER_DATA_BYTES_LIMIT","CUSTOMER_COMPRESSED_DATA_BYTES_LIMIT","BYTES_COMPUTATION_THROTTLING_DELAY","CustomerDataCompressionStatus","Unknown","Enabled","Disabled","createCustomerDataTrackerManager","compressionStatus","customerDataTrackers","alreadyWarned","checkCustomerDataLimit","initialBytesCount","bytesCountLimit","tracker","getBytesCount","displayCustomerDataLimitReachedWarning","createDetachedTracker","createCustomerDataTracker","getOrCreateTracker","setCompressionStatus","newCompressionStatus","getCompressionStatus","clear","bytesCountCache","computeBytesCountThrottled","cancelComputeBytesCount","resetBytesCount","createIdentityEncoder","additionalEncodedBytesCount","rawBytesCount","sanitizeUser","newUser","user","checkUser","isValid","PLACEHOLDER","initialValues","displayAlreadyInitializedError","sdkName","RUM_SESSION_KEY","RumSessionPlan","WITHOUT_SESSION_REPLAY","WITH_SESSION_REPLAY","WITH_ERROR_SESSION_REPLAY","ERROR_SESSION","RumTrackingType","NOT_TRACKED","TRACKED_WITH_SESSION_AND_WITH_SESSION_REPLAY","TRACKED_WITH_SESSION_AND_WITHOUT_SESSION_REPLAY","TRACKED_WITH_SESSION_AND_WITH_ERROR_SESSION_REPLAY","TRACKED_WITH_ERROR_SESSION_AND_WITH_SESSION_REPLAY","TRACKED_WITH_ERROR_SESSION_AND_WITHOUT_SESSION_REPLAY","TRACKED_WITH_ERROR_SESSION_AND_WITH_ERROR_SESSION_REPLAY","startRumSessionManager","lifeCycle","sessionManager","rawTrackingType","sessionEntity","ets","findTrackedSession","isTypeTracked","isErrorSession","plan","errorSessionReplayAllowed","sessionHasError","sessionErrorTimestamp","sessionReplayAllowed","setErrorForSession","startRumSessionManagerStub","sessionOnErrorSampleRate","sessionReplaySampleRate","sessionReplayOnErrorSampleRate","isSession","isSessionReplay","isErrorSessionReplay","hasValidRumSession","rumSessionType","USR_ID_COOKIE_NAME","ANONYMOUS_ID_EXPIRATION","initUsrCookie","usrCacheId","initUsrLocalStorage","startCacheUsrCache","getId","createLocationChangeObservable","currentLocation","_trackHistory","trackHistory","onLocationChange","_trackHash","trackHash","newLocation","oldLocation","onHistoryChange","pushState","History","replaceState","popState","onHashChange","startRumBatch","telemetryEventObservable","createEncoder","batch","serverRumEvent","SessionType","SYNTHETICS","USER","VIEW_MODIFIABLE_FIELD_PATHS","USER_CUSTOMIZABLE_FIELD_PATHS","ROOT_MODIFIABLE_FIELD_PATHS","modifiableFieldPathsByEvent","startRumAssembly","userSessionManager","viewContexts","urlContexts","actionContexts","displayContext","getCommonContext","eventRateLimiters","rawRumEvent","savedCommonContext","customerContext","domainContext","viewContext","findView","urlContext","findUrl","commonContext","rumContext","_gc","sdkVersion","terminal","application","applicationId","getSessionType","referrer","urlQuery","rumEvent","has_replay","hasReplay","error_timestamp_for_session","shouldSend","rateLimitReached","_DATAFLUX_SYNTHETICS_BROWSER","viewportObservable","initViewportObservable","createViewportObservable","_throttledUpdateDimension","getViewportDimension","updateDimension","visual","visualViewport","scale","innerWidth","innerHeight","startDisplayContext","viewport","unsubscribeViewport","viewportDimension","startInternalContext","URL_CONTEXT_TIME_OUT_DELAY","startUrlContexts","locationChangeObservable","urlContextHistory","previousViewUrl","viewUrl","buildUrlContext","endClocks","locationChangeSubscription","current","changeTime","VIEW_CONTEXT_TIME_OUT_DELAY","startViewContexts","viewContextHistory","buildViewContext","viewUpdate","currentView","MAX_PAGE_STATE_ENTRIES","MAX_PAGE_STATE_ENTRIES_SELECTABLE","PAGE_STATE_CONTEXT_TIME_OUT_DELAY","PageState","ACTIVE","PASSIVE","TERMINATED","startPageStateHistory","maxPageStateEntriesSelectable","pageStateEntryHistory","currentPageState","addPageState","getPageState","computePageState","stopEventListeners","nextPageState","pageStateHistory","eventStartTime","pageStateEntries","pageStateServerEntries","pageState","relativeStartTime","wasInPageStateAt","wasInPageStateDuringPeriod","persisted","hasFocus","startErrorCollection","doStartErrorCollection","processError","addError","providedError","rawError","trace","handling_stack","source_type","in_foreground","THROTTLE_VIEW_UPDATE_PERIOD","SESSION_KEEP_ALIVE_INTERVAL","KEEP_TRACKING_AFTER_VIEW_DELAY","trackViews","domMutationObservable","areViewsTrackedAutomatically","initialViewOptions","activeViews","startNewView","loadingType","viewOptions","newlyCreatedView","newView","stopObservable","startViewLifeCycle","renewViewOnLocationChange","sessionIsActive","areDifferentLocation","addTiming","startView","setViewContext","setViewContextProperty","setViewName","getViewContext","initialLocation","customTimings","documentVersion","viewCreatedEvent","_scheduleViewUpdate","triggerViewUpdate","cancelScheduleViewUpdate","_trackInitialViewTimings","initialViewMetrics","stopInitialViewMetricsTracking","keepAliveIntervalId","pageMayExitSubscription","pageMayExitEvent","scheduleViewUpdate","triggerBeforeViewUpdate","currentEnd","commonViewMetrics","isActive","eventCounts","sanitizeTiming","updatedName","sanitized","otherLocation","startViewCollection","recorderApi","processViewUpdate","trackViewsManually","pageStates","viewEvent","document_version","loading_type","privacy","replay_level","defaultPrivacyLevel","startRum","customerDataTrackerManager","userSession","_startRumEventCollection","startRumEventCollection","stopRumEventCollection","addAction","_startViewCollection","stopViewCollection","_startErrorCollection","internalContext","stopSession","getInternalContext","buildCommonContext","globalContextManager","userContextManager","buildEnv","__BUILD_ENV__SDK_VERSION__","validateAndBuildRumConfiguration","requireParamsValidate","excludedActivityUrls","baseConfiguration","trackUserInteractions","trackInteractions","actionNameAttribute","workerUrl","compressIntakeRequests","enableLongAnimationFrame","validateAndBuildTracingOptions","allowedTracingUrls","allowedTracingOrigins","tracingOptions","traceType","isTracingOption","legacyMatchOption","tracingOption","convertLegacyMatchOptionToTracingOption","allowedDDTracingOrigins","createPreStartStrategy","rumPublicApiOptions","doStartRum","ignoreInitIfSyntheticsWillInjectRum","startDeflateWorker","bufferApiCalls","firstStartViewCall","deflateWorker","cachedInitConfiguration","cachedConfiguration","tryStartRum","startRumResult","doInit","eventBridgeAvailable","remoteConfiguration","getInitConfiguration","overrideInitConfigurationForBridge","_initConfiguration$de","_getEventBridge","RUM_STORAGE_KEY","makeRumPublicApi","startRumImpl","email","strategy","createDeflateEncoder","streamId","createPostStartStrategy","sanitizedOptions","rumPublicApi","preStartStrategy","datafluxRum"],"sourceRoot":""}