!function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var t={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},n=console,r={};Object.keys(t).forEach((function(e){r[e]=n[e]}));var i,o="GUANCE Browser SDK:",a={debug:r.debug.bind(n,o),log:r.log.bind(n,o),info:r.info.bind(n,o),warn:r.warn.bind(n,o),error:r.error.bind(n,o)},s=!1;function u(e){s=e}function c(e){return function(){return f(e,this,arguments)}}function f(e,t,n){try{return e.apply(t,n)}catch(e){if(l(e),i)try{i(e)}catch(e){l(e)}}}function l(){var e=[].slice.call(arguments);s&&a.error.apply(null,["[MONITOR]"].concat(e))}function d(e,t){return function(){var n=[].slice.call(arguments);try{return e.apply(this,n)}catch(e){a.error(t,e)}}}function p(){if("object"===("undefined"==typeof globalThis?"undefined":e(globalThis)))return globalThis;Object.defineProperty(Object.prototype,"_gc_temp_",{get:function(){return this},configurable:!0});var t=_gc_temp_;return delete Object.prototype._gc_temp_,"object"!==e(t)&&(t="object"===("undefined"==typeof self?"undefined":e(self))?self:"object"===("undefined"==typeof window?"undefined":e(window))?window:{}),t}function v(e,t){var n,r=p();return r.Zone&&"function"==typeof r.Zone.__symbol__&&(n=e[r.Zone.__symbol__(t)]),n||(n=e[t]),n}function m(e,t){return v(p(),"setTimeout")(c(e),t)}function g(e){v(p(),"clearTimeout")(e)}function y(e,t){return v(p(),"setInterval")(c(e),t)}function h(e){v(p(),"clearInterval")(e)}var b=Array.prototype,_=(Function.prototype,Object.prototype),w=b.slice,S=_.toString,E=_.hasOwnProperty,C=b.forEach,T=Array.isArray,k=function(e,t,n){if(null===e)return!1;if(C&&e.forEach===C)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,i=e.length;r<i;r++)if(r in e&&false===t.call(n,e[r],r,e))return!1}else for(var o in e)if(E.call(e,o)&&false===t.call(n,e[o],o,e))return!1};function x(e){return k(w.call(arguments,1),(function(t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})),e}function O(e){return x({},e)}var R=function(e){return k(w.call(arguments,1),(function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])})),e},A=function(e){return k(w.call(arguments,1),(function(t){for(var n in t)void 0!==t[n]&&(j(t[n])&&j(e[n])?R(e[n],t[n]):e[n]=t[n])})),e},I=T||function(e){return"[object Array]"===S.call(e)},P=function(e){if(!e)return!1;try{return/^\s*\bfunction\b/.test(e)}catch(e){return!1}},N=function(e){return e?e.toArray?e.toArray():I(e)?w.call(e):(t=e)&&E.call(t,"callee")?w.call(e):M(e):[];var t},M=function(e){var t=[];return null===e||k(e,(function(e){t[t.length]=e})),t},L=function(e,t,n){if(e.filter)return e.filter(t);for(var r=[],i=0;i<e.length;i++)if(E.call(e,i)){var o=e[i];t.call(n,o,i,e)&&r.push(o)}return r},U=function(e,t,n){if(e.map)return e.map(t);for(var r=[],i=0;i<e.length;i++)if(E.call(e,i)){var o=e[i];r.push(t.call(n,o,i,e))}return r},D=function(e,t,n){if(e.some)return e.some(t);for(var r=!1,i=0;i<e.length;i++)if(E.call(e,i)){var o=e[i];if(t.call(n,o,i,e)){r=!0;break}}return r},V=function(e){return e+="",window.CSS&&window.CSS.escape?window.CSS.escape(e):e.replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,(function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}))},j=function(e){return null!==e&&"[object Object]"===S.call(e)},B=function(e){if(j(e)){for(var t in e)if(E.call(e,t))return!1;return!0}return!1},q=function(e){var t=[];return k(e,(function(e,n){t.push([n,e])})),t},H=function(e){return"[object String]"===S.call(e)},z=function(e){return"[object Boolean]"===S.call(e)},F=function(e){return"[object Number]"===S.call(e)&&/[\d\.]+/.test(String(e))},G=(Date.now,function(e,t,n){var r,i,o=!n||void 0===n.leading||n.leading,a=!n||void 0===n.trailing||n.trailing,s=!1,u=this;return{throttled:function(){s?r=arguments:(o?e.apply(u,arguments):r=arguments,s=!0,i=m((function(){a&&r&&e.apply(u,r),s=!1,r=void 0}),t))},cancel:function(){g(i),s=!1,r=void 0}}});function W(e){return e?(parseInt(e,10)^16*Math.random()>>parseInt(e,10)/4).toString(16):"".concat(1e7,"-",1e3,"-",4e3,"-",8e3,"-",1e11).replace(/[018]/g,W)}function J(e){var t="";return e&&(t=e.replace(/\/([^\/]*)\d([^\/]*)/g,"/?").replace(/\/$/g,"")),t||"/"}var X=function(t){var n=function(e){this._fields={Username:4,Password:5,Port:7,Protocol:2,Host:6,Path:8,URL:0,QueryString:9,Fragment:10},this._values={},this._regex=null,this._regex=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/,void 0!==e&&this._parse(e)};return n.prototype.setUrl=function(e){this._parse(e)},n.prototype._initValues=function(){for(var e in this._fields)this._values[e]=""},n.prototype.addQueryString=function(t){if("object"!==e(t))return!1;var n=this._values.QueryString||"";for(var r in t)n=new RegExp(r+"[^&]+").test(n)?n.replace(new RegExp(r+"[^&]+"),r+"="+t[r]):"&"===n.slice(-1)?n+r+"="+t[r]:""===n?r+"="+t[r]:n+"&"+r+"="+t[r];this._values.QueryString=n},n.prototype.getParse=function(){return this._values},n.prototype.getUrl=function(){var e="";return e+=this._values.Origin,e+=this._values.Path,e+=this._values.QueryString?"?"+this._values.QueryString:""},n.prototype._parse=function(e){this._initValues();var t=this._regex.exec(e);if(!t)throw"DPURLParser::_parse -> Invalid URL";for(var n in this._fields)void 0!==t[this._fields[n]]&&(this._values[n]=t[this._fields[n]]);this._values.Path=this._values.Path||"/",this._values.Hostname=this._values.Host.replace(/:\d+$/,""),this._values.Origin=this._values.Protocol+"://"+this._values.Hostname+(this._values.Port?":"+this._values.Port:"")},new n(t)};var K=function(e){var t={},n=e.split("?")[1]||"";return n&&(t=$("?"+n)),t},$=function(e){for(var t=function(e){return decodeURIComponent(e)},n={},r=(e=e||"").substring(1).split("&"),i=0;i<r.length;i++){var o=r[i].indexOf("=");if(-1!==o){var a=r[i].substring(0,o),s=r[i].substring(o+1);a=t(a),s=t(s),n[a]=s}}return n};function Q(t){return null===t?"null":Array.isArray(t)?"array":e(t)}function Z(t,n,r){if(void 0===r&&(r=function(){if("undefined"!=typeof WeakSet){var e=new WeakSet;return{hasAlreadyBeenSeen:function(t){var n=e.has(t);return n||e.add(t),n}}}var t=[];return{hasAlreadyBeenSeen:function(e){var n=t.indexOf(e)>=0;return n||t.push(e),n}}}()),void 0===n)return t;if("object"!==e(n)||null===n)return n;if(n instanceof Date)return new Date(n.getTime());if(n instanceof RegExp){var i=n.flags||[n.global?"g":"",n.ignoreCase?"i":"",n.multiline?"m":"",n.sticky?"y":"",n.unicode?"u":""].join("");return new RegExp(n.source,i)}if(!r.hasAlreadyBeenSeen(n)){if(Array.isArray(n)){for(var o=Array.isArray(t)?t:[],a=0;a<n.length;++a)o[a]=Z(o[a],n[a],r);return o}o="object"===Q(t)?t:{};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(o[s]=Z(o[s],n[s],r));return o}}function Y(e){return Z(void 0,e)}function ee(e){return e?String(e).substr(0,1)+String(e).substr(1).replace(/\d*/g,"x"):0===e?void 0:e}function te(){}var ne,re=1e3,ie=6e4;function oe(e){return 0!==e&&100*Math.random()<=e}function ae(e,t){return+e.toFixed(t)}function se(e){return"number"!=typeof e?e:ae(1e6*e,0)}function ue(e){return F(e)?ae(1e6*e,0):e}function ce(e){return e-_e()}function fe(e){return Math.round(_e()+e)}function le(){return performance.now()}function de(){return{relative:le(),timeStamp:pe()}}function pe(){return ve()}function ve(){return(new Date).getTime()}function me(e,t){return t-e}function ge(){return{relative:0,timeStamp:_e()}}function ye(e){return{relative:e,timeStamp:be(e)}}function he(e,t){return e+t}function be(e){var t=ve()-performance.now();return t>_e()?Math.round(t+e):fe(e)}function _e(){return void 0===ne&&(ne=performance.timing.navigationStart),ne}var we=/([\w-]+)\s*=\s*([^;]+)/g;function Se(e,t){for(var n=t.split(".");n.length;){var r=n.shift();if(!(e&&j(e)&&r in e&&E.call(e,r)))return;e=e[r]}return e}function Ee(e,t){var n=e.charCodeAt(t-1);return n>=55296&&n<=56319?e.slice(0,t+1):e.slice(0,t)}function Ce(e){var t=Q(e);return"string"===t||"function"===t||e instanceof RegExp}function Te(e,t){return-1!==e.indexOf(t)}function ke(e,t){for(var n=0;n<e.length;n+=1){var r=e[n];if(t(r,n,e))return r}}function xe(e){if(Array.from)return Array.from(e);var t=[];if(e instanceof Set)e.forEach((function(e){t.push(e)}));else for(var n=0;n<e.length;n++)t.push(e[n]);return t}function Oe(e){return F(e)&&e>=0&&e<=100}var Re,Ae=0,Ie=1,Pe=2,Ne=3;function Me(){return Ve(Re,Re=function(e){var t;void 0===e&&(e=window);var n=e.navigator.userAgent;if(e.chrome||/HeadlessChrome/.test(n))return Ie;if(0===(null===(t=e.navigator.vendor)||void 0===t?void 0:t.indexOf("Apple"))||/safari/i.test(n)&&!/chrome|android/i.test(n))return Pe;if(e.document.documentMode)return Ae;return Ne}())}function Le(e){if(e.origin&&"null"!==e.origin)return e.origin;var t=e.host.replace(/(:80|:443)$/,"");return e.protocol+"//"+t}function Ue(e){var t={};return k(e,(function(e,n){var r;t[(r=n,r.replace(/[A-Z]/g,(function(e,t){return(0!==t?"_":"")+e.toLowerCase()})).replace(/-/g,"_"))]=De(e)})),t}function De(t){return I(t)?U(t,(function(e){return De(e)})):"object"===e(t)&&null!==t?Ue(t):t}function Ve(e,t){return null!=e?e:t}function je(e,t){return D((r=[],null===(n=e)||k(n,(function(e,t){r[r.length]=t})),r),(function(n){return e[n]===t}));var n,r}function Be(e,t){return e.slice(0,t.length)===t}function qe(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}function He(e){var t=e.substr(1);return!!t&&!!document.getElementById(t)}function ze(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}function Fe(e){return F(e)&&e<0?void 0:e}var Ge=1/0,We=null,Je=new Set;function Xe(e){var t=e.expireDelay,n=e.maxEntries,r=[];function i(){for(var e=le()-t;r.length>0&&r[r.length-1].endTime<e;)r.pop()}return We&&(We=y((function(){return i()}),6e4)),Je.add(i),{add:function(e,t){var i={value:e,startTime:t,endTime:Ge,remove:function(){qe(r,i)},close:function(e){i.endTime=e}};return n&&r.length>=n&&r.pop(),r.unshift(i),i},find:function(e,t){void 0===e&&(e=Ge),void 0===t&&(t={returnInactive:!1});for(var n=0,i=r;n<i.length;n++){var o=i[n];if(o.startTime<=e){if(t.returnInactive||e<=o.endTime)return o.value;break}}},closeActive:function(e){var t=r[0];t&&t.endTime===Ge&&t.close(e)},findAll:function(e,t){void 0===e&&(e=Ge),void 0===t&&(t=0);var n=he(e,t);return r.filter((function(t){return t.startTime<=n&&e<=t.endTime})).map((function(e){return e.value}))},reset:function(){r=[]},stop:function(){Je.delete(i),0===Je.size&&We&&(h(We),We=null)}}}var Ke={navigator:"undefined"!=typeof window&&void 0!==window.navigator?window.navigator:{}},$e={getLanguage:c((function(){var e;return this.language=((e=(Ke.navigator.browserLanguage||Ke.navigator.language||"").split("-"))[1]&&(e[1]=e[1].toUpperCase()),e.join("_")),this.language})),getNetwork:c((function(){var e=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection,t="unknown",n=e?e.type||e.effectiveType:null;if(n&&"string"==typeof n)switch(n){case"bluetooth":case"cellular":t="cellular";break;case"none":t="none";break;case"ethernet":case"wifi":case"wimax":t="wifi";break;case"other":case"unknown":t="unknown";break;case"slow-2g":case"2g":case"3g":t="cellular";break;case"4g":t="wifi"}return t})),getTimeZone:c((function(){return Intl.DateTimeFormat().resolvedOptions().timeZone}))},Qe={};"undefined"!=typeof window&&(Qe={screenSize:window.screen.width+"*"+window.screen.height,networkType:$e.getNetwork(),timeZone:$e.getTimeZone()});var Ze=Qe,Ye="beforeunload",et="click",tt="keydown",nt="load",rt="popstate",it="scroll",ot="touchstart",at="visibilitychange",st="pageshow",ut="freeze",ct="resume",ft="DOMContentLoaded",lt="pointerdown",dt="pointerup",pt="pointercancel",vt="hashchange",mt="pagehide",gt="mousedown",yt="focus",ht="blur",bt="resize",_t="input",wt="securitypolicyviolation",St="selectionchange",Et="storage",Ct="document",Tt="xhr",kt="beacon",xt="fetch",Ot="css",Rt="js",At="image",It="font",Pt="media",Nt="other",Mt="click",Lt="custom",Ut="rage_click",Dt="error_click",Vt="dead_click",jt={ACTION:"action",ERROR:"error",LONG_TASK:"long_task",VIEW:"view",RESOURCE:"resource",LOGGER:"logger"},Bt="long-task",qt="long-animation-frame",Ht="initial_load",zt="route_change",Ft={FETCH:xt,XHR:Tt},Gt="ddtrace",Wt="handled",Jt="unhandled",Xt="Uncaught",Kt="Provided";function $t(t,n,r){if("object"!==e(t)||null===t)return JSON.stringify(t);var i=Qt(Object.prototype),o=Qt(Array.prototype),a=Qt(Object.getPrototypeOf(t)),s=Qt(t);try{return JSON.stringify(t,n,r)}catch(e){return"<error: unable to serialize object>"}finally{i(),o(),a(),s()}}function Qt(e){var t=e,n=t.toJSON;return n?(delete t.toJSON,function(){t.toJSON=n}):te}var Zt="?";function Yt(e){var t=[],n=un(e,"stack"),r=String(e);return n&&n.startsWith(r)&&(n=n.slice(r.length)),n&&k(n.split("\n"),(function(e){var n=function(e){var t=tn.exec(e);if(!t)return;var n=t[2]&&0===t[2].indexOf("native"),r=t[2]&&0===t[2].indexOf("eval"),i=nn.exec(t[2]);r&&i&&(t[2]=i[1],t[3]=i[2],t[4]=i[3]);return{args:n?[t[2]]:[],column:t[4]?+t[4]:void 0,func:t[1]||Zt,line:t[3]?+t[3]:void 0,url:n?void 0:t[2]}}(e)||function(e){var t=rn.exec(e);if(!t)return;return{args:[],column:t[3]?+t[3]:void 0,func:Zt,line:t[2]?+t[2]:void 0,url:t[1]}}(e)||function(e){var t=on.exec(e);if(!t)return;return{args:[],column:t[4]?+t[4]:void 0,func:t[1]||Zt,line:+t[3],url:t[2]}}(e)||function(e){var t=an.exec(e);if(!t)return;var n=t[3]&&t[3].indexOf(" > eval")>-1,r=sn.exec(t[3]);n&&r&&(t[3]=r[1],t[4]=r[2],t[5]=void 0);return{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:void 0,func:t[1]||Zt,line:t[4]?+t[4]:void 0,url:t[3]}}(e);n&&(!n.func&&n.line&&(n.func=Zt),t.push(n))})),{message:un(e,"message"),name:un(e,"name"),stack:t}}var en="((?:file|https?|blob|chrome-extension|electron|native|eval|webpack|<anonymous>|\\w+\\.|\\/).*?)",tn=new RegExp("^\\s*at (.*?) ?\\("+en+"(?::(\\d+))?"+"(?::(\\d+))?\\)?\\s*$","i"),nn=new RegExp("\\((\\S*)(?::(\\d+))(?::(\\d+))\\)");var rn=new RegExp("^\\s*at ?"+en+"(?::(\\d+))?"+"(?::(\\d+))??\\s*$","i");var on=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;var an=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle|\[wasm code\])(?::(\d+))?(?::(\d+))?\s*$/i,sn=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function un(t,n){if("object"===e(t)&&t&&n in t){var r=t[n];return"string"==typeof r?r:void 0}}var cn=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function fn(e){var t=function(e){return Cn(window,"onerror",(function(t){var n,r=t.parameters,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4];if(u instanceof Error)n=Yt(u);else{var c={url:o,column:s,line:a},f=function(e){var t,n;if("[object String]"==={}.toString.call(e)){var r=cn.exec(e);r&&(t=r[1],n=r[2])}return{name:t,message:n}}(i);n={name:f.name,message:f.message,stack:[c]}}e(n,Ve(u,i))}))}(e),n=function(e){return Cn(window,"onunhandledrejection",(function(t){var n=t.parameters[0].reason||"Empty reason",r=Yt(n);e(r,n)}))}(e);return{stop:function(){t.stop(),n.stop()}}}var ln=1024,dn=/[^\u0000-\u007F]/;function pn(e){return dn.test(e)?void 0!==window.TextEncoder?(new TextEncoder).encode(e).length:new Blob([e]).size:e.length}function vn(e,t){void 0===t&&(t=225280);var n=Qt(Object.prototype),r=Qt(Array.prototype),i=[],o=new WeakMap,a=mn(e,"$",void 0,i,o),s=JSON.stringify(a)&&JSON.stringify(a).length||0;if(!(s>t)){for(;i.length>0&&s<t;){var u=i.shift(),c=0;if(Array.isArray(u.source))for(var f=0;f<u.source.length;f++){if(s+=void 0!==(l=mn(u.source[f],u.path,f,i,o))?JSON.stringify(l).length:4,s+=c,c=1,s>t){yn(t,"truncated",e);break}u.target[f]=l}else for(var f in u.source)if(Object.prototype.hasOwnProperty.call(u.source,f)){var l;if(void 0!==(l=mn(u.source[f],u.path,f,i,o))&&(s+=JSON.stringify(l).length+c+f.length+3,c=1),s>t){yn(t,"truncated",e);break}u.target[f]=l}}return n(),r(),a}yn(t,"discarded",e)}function mn(t,n,r,i,o){var a=function(e){var t=e;if(t&&"function"==typeof t.toJSON)try{return t.toJSON()}catch(e){}return e}(t);if(!a||"object"!==e(a))return function(t){if("bigint"==typeof t)return"[BigInt] "+t.toString();if("function"==typeof t)return"[Function] "+t.name||0;if("symbol"===e(t))return"[Symbol] "+t.description||0;return t}(a);var s=gn(a);if("[Object]"!==s&&"[Array]"!==s&&"[Error]"!==s)return s;var u=t;if(o.has(u))return"[Reference seen at "+o.get(u)+"]";var c=void 0!==r?n+"."+r:n,f=Array.isArray(a)?[]:{};return o.set(u,c),i.push({source:a,target:f,path:c}),f}function gn(e){try{if(e instanceof Event)return{type:(n=e).type,isTrusted:n.isTrusted,currentTarget:n.currentTarget?gn(n.currentTarget):null,target:n.target?gn(n.target):null};if(e instanceof RegExp)return"[RegExp] ".concat(e.toString());var t=Object.prototype.toString.call(e).match(/\[object (.*)\]/);if(t&&t[1])return"["+t[1]+"]"}catch(e){}var n;return"[Unserializable]"}function yn(e,t,n){a.warn("The data provided has been "+t+" as it is over the limit of "+e+" characters:",n)}var hn={AGENT:"agent",CONSOLE:"console",NETWORK:"network",SOURCE:"source",LOGGER:"logger",CUSTOM:"custom"};function bn(e){var t=e.stackTrace,n=e.originalError,r=e.handlingStack,i=e.startClocks,o=e.nonErrorPrefix,a=e.source,s=e.handling,u=n instanceof Error,c=function(e,t,n,r){return e&&e.message&&e&&e.name?e.message:t?"Empty message":n+" "+$t(vn(r))}(t,u,o,n),f=function(e,t){if(void 0===t)return!1;if(e)return!0;return t.stack.length>0&&(t.stack.length>1||void 0!==t.stack[0].url)}(u,t)?wn(t):"No stack, consider using an instance of Error",l=u?En(n,a):void 0;return{startClocks:i,source:a,handling:s,originalError:n,message:c,stack:f,handlingStack:r,type:t&&t.name,causes:l}}function _n(){var e,t=new Error;if(!t.stack)try{throw t}catch(e){}return f((function(){var n=Yt(t);n.stack=n.stack.slice(2),e=wn(n)})),e}function wn(e){var t=Sn(e);return k(e.stack,(function(e){var n="?"===e.func?"<anonymous>":e.func,r=e.args&&e.args.length>0?"("+e.args.join(", ")+")":"",i=e.line?":"+e.line:"",o=e.line&&e.column?":"+e.column:"";t+="\n  at "+n+r+" @ "+e.url+i+o})),t}function Sn(e){return(e.name||"Error")+": "+e.message}function En(e,t){for(var n=e,r=[];n&&n.cause instanceof Error&&r.length<10;){var i=Yt(n.cause);r.push({message:n.cause.message,source:t,type:i&&i.name,stack:i&&wn(i)}),n=n.cause}return r.length?r:void 0}function Cn(e,t,n,r){var i=r&&r.computeHandlingStack,o=e[t];if("function"!=typeof o){if(!Be(t,"on"))return{stop:te};o=te}var a=!1,s=function(){if(a)return o.apply(this,arguments);var e,t=xe(arguments);f(n,null,[{target:this,parameters:t,onPostCall:function(t){e=t},handlingStack:i?_n():void 0}]);var r=o.apply(this,t);return e&&f(e,null,[r]),r};return e[t]=s,{stop:function(){a=!0,e[t]===s&&(e[t]=o)}}}var Tn=function(e){this.observers=[],this.onLastUnsubscribe=void 0,this.onFirstSubscribe=e};Tn.prototype={subscribe:function(e){this.observers.push(e),1===this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe(this)||void 0);var t=this;return{unsubscribe:function(){t.observers=L(t.observers,(function(t){return e!==t})),!t.observers.length&&t.onLastUnsubscribe&&t.onLastUnsubscribe()}}},notify:function(e){k(this.observers,(function(t){t(e)}))}};var kn=Tn;function xn(){var e=[].slice.call(arguments);return new kn((function(t){var n=U(e,(function(e){return e.subscribe((function(e){return t.notify(e)}))}));return function(){return k(n,(function(e){return e.unsubscribe()}))}}))}var On={};function Rn(e){var t=U(e,(function(e){return On[e]||(On[e]=function(e){return new kn((function(t){var n=console[e];return console[e]=function(){var r=[].slice.call(arguments);n.apply(console,arguments);var i=_n();f((function(){t.notify(An(r,e,i))}))},function(){console[e]=n}}))}(e)),On[e]}));return xn.apply(this,t)}function An(e,n,r){var i,o=U(e,(function(e){return function(e){if("string"==typeof e)return e;if(e instanceof Error)return Sn(Yt(e));return $t(e,void 0,2)}(e)})).join(" ");if(n===t.error){var a=ke(e,(function(e){return e instanceof Error}));i={stack:a?wn(Yt(a)):void 0,causes:a?En(a,"console"):void 0,startClocks:de(),message:o,source:hn.CONSOLE,handling:Wt,handlingStack:r}}return{api:n,message:o,error:i,handlingStack:r}}function In(e,t,n,r){return Pn(e,[t],n,r)}function Pn(e,t,n,r){var i=c(r&&r.once?function(e){s(),n(e)}:n);r=r&&r.passive?{capture:r.capture,passive:r.passive}:r&&r.capture;var o=window.EventTarget&&e instanceof EventTarget?window.EventTarget.prototype:e,a=v(o,"addEventListener");k(t,(function(t){a.call(e,t,i,r)}));var s=function(){var n=v(o,"removeEventListener");k(t,(function(t){n.call(e,t,i,r)}))};return{stop:s}}var Nn="intervention",Mn="csp_violation";function Ln(e,t){var n=[];Te(t,Mn)&&n.push(new kn((function(e){return In(document,wt,(function(t){e.notify(function(e){var t="'"+e.blockedURI+"' blocked by '"+e.effectiveDirective+"' directive";return Un({type:e.effectiveDirective,message:Mn+": "+t,originalError:e,csp:{disposition:e.disposition},stack:Dn(e.effectiveDirective,e.originalPolicy?"".concat(t,' of the policy "').concat(Ee(e.originalPolicy,100),'"'):"no policy",e.sourceFile,e.lineNumber,e.columnNumber)})}(t))})).stop})));var r=L(t,(function(e){return e!==Mn}));return r.length&&n.push(function(e){return new kn((function(t){if(window.ReportingObserver){var n=c((function(e){k(e,(function(e){t.notify(function(e){var t=e.body,n=e.type;return Un({type:t.id,message:n+": "+t.message,originalError:e,stack:Dn(t.id,t.message,t.sourceFile,t.lineNumber,t.columnNumber)})}(e))}))})),r=new window.ReportingObserver(n,{types:e,buffered:!0});return r.observe(),function(){r.disconnect()}}}))}(r)),xn.apply(this,n)}function Un(e){return x({startClocks:de(),source:ErrorSource.REPORT,handling:ErrorHandling.UNHANDLED},e)}function Dn(e,t,n,r,i){return n&&wn({name:e,message:t,stack:[{func:"?",url:n,line:r,column:i}]})}var Vn,jn="AUTO_ACTION_COMPLETED",Bn="BEFORE_VIEW_CREATED",qn="VIEW_CREATED",Hn="VIEW_UPDATED",zn="BEFORE_VIEW_UPDATED",Fn="VIEW_ENDED",Gn="AFTER_VIEW_ENDED",Wn="SESSION_RENEWED",Jn="SESSION_EXPIRED",Xn="PAGE_EXITED",Kn="REQUEST_STARTED",$n="REQUEST_COMPLETED",Qn="RAW_RUM_EVENT_COLLECTED",Zn="RUM_EVENT_COLLECTED",Yn="RAW_ERROR_COLLECTED";function er(){this.callbacks={}}function tr(e){if(Array.isArray(e))return e}function nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function rr(e,t){if(e){if("string"==typeof e)return nr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nr(e,t):void 0}}function ir(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function or(e){return tr(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rr(e)||ir()}function ar(e,t){return tr(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||rr(e,t)||ir()}function sr(e,t,n){var r=Y(e),i=n(r);return q(t).forEach((function(t){var n=ar(t,2),i=n[0],o=n[1];return ur(e,r,i.split(/\.|(?=\[\])/),o)})),i}function ur(e,t,n,r){var i=or(n),o=i[0],a=i.slice(1);if("[]"!==o){if(cr(e)&&cr(t))return a.length>0?ur(e[o],t[o],a,r):void function(e,t,n,r){var i=Q(n);i===r?e[t]=vn(n):"object"!==r||"undefined"!==i&&"null"!==i||(e[t]={})}(e,o,t[o],r)}else Array.isArray(e)&&Array.isArray(t)&&e.forEach((function(e,n){return ur(e,t[n],a,r)}))}function cr(e){return"object"===Q(e)}function fr(e,t,n){var r=0,i=!1;return{isLimitReached:function(){if(0===r&&m((function(){r=0}),ie),(r+=1)<=t||i)return i=!1,!1;if(r===t+1){i=!0;try{n({message:"Reached max number of "+e+"s by minute: "+t,source:hn.AGENT,startClocks:de()})}finally{i=!1}}return!0}}}function lr(e){return pr(e,Le(window.location)).href}function dr(e){return Le(pr(e))}function pr(e,t){if(function(){if(void 0!==Vn)return Vn;try{var e=new URL("http://test/path");return Vn="http://test/path"===e.href}catch(e){Vn=!1}return Vn}())return void 0!==t?new URL(e,t):new URL(e);if(void 0===t&&!/:/.test(e))throw new Error("Invalid URL: "+e);var n=document,r=n.createElement("a");if(void 0!==t){var i=(n=document.implementation.createHTMLDocument("")).createElement("base");i.href=t,n.head.appendChild(i),n.body.appendChild(r)}return r.href=e,r}function vr(e,t){if(window.requestIdleCallback&&window.cancelIdleCallback){var n=window.requestIdleCallback(c(e),t);return function(){return window.cancelIdleCallback(n)}}return function(e){var t=ve(),n=m((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(ve()-t))}})}),0);return function(){return g(n)}}(e)}er.prototype={notify:function(e,t){var n=this.callbacks[e];n&&k(n,(function(e){e(t)}))},subscribe:function(e,t){this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t);var n=this;return{unsubscribe:function(){n.callbacks[e]=L(n.callbacks[e],(function(e){return e!==t}))}}}};var mr,gr=/^\s+|\s+$/g,yr={rum:"/rum",log:"/logging",sessionReplay:"/rum/replay"};function hr(e,t){var n=yr[t];if(!n)return"";var r=e.datakitOrigin||e.datakitUrl||e.site;0===r.indexOf("/")&&(r=location.origin+br(r));var i=r;return i=r.lastIndexOf("/")===r.length-1?br(r)+"v1/write"+n:br(r)+"/v1/write"+n,e.site&&e.clientToken&&(i=i+"?token="+e.clientToken+"&to_headless=true"),i}function br(e){return e.replace(gr,"")}function _r(e,t){return"".concat(e,"_").concat(t&&t.crossSite?"cs1":"cs0","_").concat(t&&t.domain?"d1":"d0","_").concat(t&&t.secure?"sec1":"sec0","_").concat(t&&t.partitioned?"part1":"part0")}function wr(e,t,n,r){var i=new Date;i.setTime(i.getTime()+n);var o="expires="+i.toUTCString(),a=r&&r.crossSite?"none":"strict",s=r&&r.domain?";domain="+r.domain:"",u=r&&r.secure?";secure":"",c=r&&r.partitioned?";partitioned":"";document.cookie=_r(e,r)+"="+t+";"+o+";path=/;samesite="+a+s+u+c}function Sr(e,t){return function(e,t){for(we.lastIndex=0;;){var n=we.exec(e);if(!n)break;if(n[1]===t)return n[2]}}(document.cookie,_r(e,t))}function Er(e,t){wr(e,"",0,t)}var Cr=144e5,Tr=9e5,kr="_gc_s",xr=/^([a-zA-Z]+)=([a-z0-9-]+)$/,Or="&";function Rr(e){return B(e)}function Ar(e){return void 0!==e.isExpired||!((void 0===(t=e).created||ve()-Number(t.created)<Cr)&&(void 0===t.expire||ve()<Number(t.expire)));var t}function Ir(e){e.expire=String(ve()+Tr)}function Pr(e){return U(q(e),(function(e){return e[0]+"="+e[1]})).join("&")}function Nr(e){var t={};return function(e){return!!e&&(-1!==e.indexOf(Or)||xr.test(e))}(e)&&e.split(Or).forEach((function(e){var n=xr.exec(e);if(null!==n){var r=ar(n,3),i=r[1],o=r[2];t[i]=o}})),t}function Mr(e){var t=function(e){var t={};t.secure=!!e.useSecureSessionCookie||!!e.usePartitionedCrossSiteSessionCookie||!!e.useCrossSiteSessionCookie,t.crossSite=!!e.usePartitionedCrossSiteSessionCookie||!!e.useCrossSiteSessionCookie,t.partitioned=!!e.usePartitionedCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(t.domain=function(){if(void 0===mr){for(var e="gc_site_test_".concat(W()),t=window.location.hostname.split("."),n=t.pop();t.length&&!Sr(e,{domain:n});)n="".concat(t.pop(),".").concat(n),wr(e,"test",re,{domain:n});Er(e,{domain:n}),mr=n}return mr}());return t}(e);return function(e){if(void 0===document.cookie||null===document.cookie)return!1;try{var t="gc_cookie_test_".concat(W()),n="test";wr(t,n,ie,e);var r=Sr(t,e)===n;return Er(t,e),r}catch(e){return!1}}(t)?{type:"Cookie",cookieOptions:t}:void 0}function Lr(e){var t;return{isLockEnabled:Me()===Ie,persistSession:(t=e,function(e){wr(kr,Pr(e),Tr,t)}),retrieveSession:Ur(e),expireSession:function(){return function(e){wr(kr,Pr({isExpired:"1"}),Cr,e)}(e)}}}function Ur(e){return function(){return Nr(Sr(kr,e))}}function Dr(e){localStorage.setItem(kr,Pr(e))}function Vr(){return Nr(localStorage.getItem(kr))}function jr(){Dr({isExpired:"1"})}var Br,qr=[];function Hr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.isLockEnabled,i=t.persistSession,o=t.expireSession,a=function(e){return i(x({},e,{lock:u}))},s=function(){var e=t.retrieveSession(),n=e.lock;return e.lock&&delete e.lock,{session:e,lock:n}};if(Br||(Br=e),e===Br)if(r&&n>=100)Fr(t);else{var u,c=s();if(r){if(c.lock)return void zr(e,t,n);if(u=W(),a(c.session),(c=s()).lock!==u)return void zr(e,t,n)}var f=e.process(c.session);if(r&&(c=s()).lock!==u)zr(e,t,n);else{if(f&&(Ar(f)?o():(Ir(f),r?a(f):i(f))),r&&(!f||!Ar(f))){if((c=s()).lock!==u)return void zr(e,t,n);i(c.session),f=c.session}e.after&&e.after(f||c.session),Fr(t)}}else qr.push(e)}function zr(e,t,n){m((function(){Hr(e,t,n+1)}),10)}function Fr(e){Br=void 0;var t=qr.shift();t&&Hr(t,e)}function Gr(e){var t=Mr(e);return!t&&e.allowFallbackToLocalStorage&&(t=function(){try{var e=W(),t="".concat("_gc_test_").concat(e);localStorage.setItem(t,e);var n=localStorage.getItem(t);return localStorage.removeItem(t),e===n?{type:"LocalStorage"}:void 0}catch(e){return}}()),t}function Wr(e,t,n){var r,i=new kn,o=new kn,a=new kn,s="Cookie"===e.type?Lr(e.cookieOptions):{isLockEnabled:!1,persistSession:Dr,retrieveSession:Vr,expireSession:jr},u=s.expireSession,c=y((function(){Hr({process:function(e){return Ar(e)?{isExpired:"1"}:void 0},after:p},s)}),1e3);v();var f=G((function(){Hr({process:function(e){if(!Rr(e)){var r=p(e);return function(e){if(Rr(e))return!1;var r=n(e[t]),i=r.trackingType,o=r.isTracked;e[t]=i,delete e.isExpired,o&&!e.id&&(e.id=W(),e.created=String(ve()))}(r),r}},after:function(e){Rr(e)||m()||function(e){r=e,i.notify()}(e),r=e}},s)}),1e3),l=f.throttled,d=f.cancel;function p(e){return Ar(e)&&(e={isExpired:"1"}),m()&&(!function(e){return r.id!==e.id||r[t]!==e[t]}(e)?(a.notify({previousState:r,newState:e}),r=e):(r={isExpired:"1"},o.notify())),e}function v(){Hr({process:function(e){if(Rr(e))return{isExpired:"1"}},after:function(e){r=e}},s)}function m(){return void 0!==r[t]}return{expandOrRenewSession:l,expandSession:function(){Hr({process:function(e){return m()?p(e):void 0}},s)},getSession:function(){return r},renewObservable:i,expireObservable:o,sessionStateUpdateObservable:a,restartSession:v,expire:function(){d(),u(),p({isExpired:"1"})},stop:function(){h(c)},updateSessionState:function(e){Hr({process:function(t){return x({},t,e)},after:p},s)}}}var Jr,Xr,Kr={ALLOW:"allow",MASK:"mask",MASK_USER_INPUT:"mask-user-input"};function $r(e){if(void 0===e.sampleRate||Oe(e.sampleRate))if(void 0===e.sessionSampleRate||Oe(e.sessionSampleRate)){if(void 0===e.telemetrySampleRate||Oe(e.telemetrySampleRate)){var t=Ve(e.sessionSampleRate,e.sampleRate);return x({beforeSend:e.beforeSend&&d(e.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:Gr(e),sessionSampleRate:Ve(t,100),service:e.service,version:e.version,env:e.env,telemetrySampleRate:Ve(e.telemetrySampleRate,100),telemetryEnabled:Ve(e.telemetryEnabled,!1),silentMultipleInit:!!e.silentMultipleInit,batchBytesLimit:16384,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:3e4,batchMessagesLimit:50,messageBytesLimit:262144,resourceUrlLimit:5120,storeContextsToLocal:!!e.storeContextsToLocal,storeContextsKey:e.storeContextsKey,sendContentTypeByJson:!!e.sendContentTypeByJson,retryMaxSize:Ve(e.retryMaxSize,-1)},function(e){var t=function(e){return!1};"isIntakeUrl"in e&&P(e.isIntakeUrl)&&z(e.isIntakeUrl())&&(t=e.isIntakeUrl);var n=function(e){return!1};return"isServerError"in e&&P(e.isServerError)&&z(e.isServerError())&&(n=e.isServerError),{rumEndpoint:hr(e,"rum"),logsEndpoint:hr(e,"log"),sessionReplayEndPoint:hr(e,"sessionReplay"),isIntakeUrl:t,isServerError:n}}(e))}a.error("Telemetry Sample Rate should be a number between 0 and 100")}else a.error("Sample Rate should be a number between 0 and 100");else a.error("Sample Rate should be a number between 0 and 100")}function Qr(){return Jr||(Jr=new kn((function(e){if(window.fetch)return Cn(window,"fetch",(function(t){return function(e,t){var n=e.parameters,r=e.onPostCall,i=e.handlingStack,o=n[0],a=n[1],s=a&&a.method;void 0===s&&o instanceof Request&&(s=o.method);var u=void 0!==s?String(s).toUpperCase():"GET",f=o instanceof Request?o.url:lr(String(o)),l=de(),d={state:"start",init:a,input:o,method:u,startClocks:l,url:f,handlingStack:i};t.notify(d),n[0]=d.input,n[1]=d.init,r((function(e){return function(e,t,n){var r=n,i=function(t){r.state="resolve",x(r,t),e.notify(r)};t.then(c((function(e){var t="";try{t=e.constructor===Response&&e.type||""}catch(e){t=""}i({response:e,responseType:t,status:e.status,isAborted:!1})})),c((function(e){i({status:0,isAborted:r.init&&r.init.signal&&r.init.signal.aborted||e instanceof DOMException&&e.code===DOMException.ABORT_ERR,error:e})})))}(t,e,d)}))}(t,e)}),{computeHandlingStack:!0}).stop}))),Jr}var Zr=new WeakMap;function Yr(){return Xr||(Xr=new kn((function(e){var t=Cn(XMLHttpRequest.prototype,"open",ei),n=Cn(XMLHttpRequest.prototype,"send",(function(t){!function(e,t){var n=e.target,r=e.handlingStack,i=Zr.get(n);if(i){var o=i;o.state="start",o.startClocks=de(),o.isAborted=!1,o.xhr=n,o.handlingStack=r;var a=!1,s=Cn(n,"onreadystatechange",(function(){n.readyState===XMLHttpRequest.DONE&&u()})).stop,u=function(){if(c(),s(),!a){a=!0;var e=i;e.state="complete",e.duration=me(o.startClocks.timeStamp,pe()),e.status=n.status,t.notify(O(e))}},c=In(n,"loadend",u).stop;t.notify(o)}}(t,e)}),{computeHandlingStack:!0}),r=Cn(XMLHttpRequest.prototype,"abort",ti);return function(){t.stop(),n.stop(),r.stop()}}))),Xr}function ei(e){var t=e.target,n=e.parameters[0],r=e.parameters[1];Zr.set(t,{state:"open",method:String(n).toUpperCase(),url:lr(String(r))})}function ti(e){var t=e.target,n=Zr.get(t);n&&(n.isAborted=!0)}var ni={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function ri(e){return e.nodeType===Node.ELEMENT_NODE}function ii(e,t){return document.readyState===e||"complete"===document.readyState?(t(),{stop:te}):In(window,"complete"===e?nt:ft,t,{once:!0})}var oi={sdk_name:"_gc.sdk_name",sdk_version:"_gc.sdk_version",app_id:"application.id",env:"env",service:"service",version:"version",source:"source",userid:"user.id",user_email:"user.email",user_name:"user.name",session_id:"session.id",session_type:"session.type",session_sampling:"session.is_sampling",is_signin:"user.is_signin",os:"device.os",os_version:"device.os_version",os_version_major:"device.os_version_major",browser:"device.browser",browser_version:"device.browser_version",browser_version_major:"device.browser_version_major",screen_size:"device.screen_size",network_type:"device.network_type",time_zone:"device.time_zone",device:"device.device",view_id:"view.id",view_referrer:"view.referrer",view_url:"view.url",view_host:"view.host",view_path:"view.path",view_name:"view.name",view_path_group:"view.path_group"},ai={view_url_query:"view.url_query",action_id:"action.id",action_ids:"action.ids",view_in_foreground:"view.in_foreground",display:"display",session_has_replay:"session.has_replay",is_login:"user.is_login",page_states:"_gc.page_states",session_sample_rate:"_gc.configuration.session_sample_rate",session_replay_sample_rate:"_gc.configuration.session_replay_sample_rate",session_on_error_sample_rate:"_gc.configuration.session_on_error_sample_rate",session_replay_on_error_sample_rate:"_gc.configuration.session_replay_on_error_sample_rate",drift:"_gc.drift"},si={view:{type:jt.VIEW,tags:{view_loading_type:"view.loading_type",view_apdex_level:"view.apdex_level",view_privacy_replay_level:"privacy.replay_level"},fields:{sampled_for_replay:"session.sampled_for_replay",sampled_for_error_replay:"session.sampled_for_error_replay",sampled_for_error_session:"session.sampled_for_error_session",session_error_timestamp:"session.error_timestamp_for_session",is_active:"view.is_active",session_replay_stats:"_gc.replay_stats",session_is_active:"session.is_active",view_error_count:"view.error.count",view_resource_count:"view.resource.count",view_long_task_count:"view.long_task.count",view_action_count:"view.action.count",first_contentful_paint:"view.first_contentful_paint",largest_contentful_paint:"view.largest_contentful_paint",largest_contentful_paint_element_selector:"view.largest_contentful_paint_element_selector",cumulative_layout_shift:"view.cumulative_layout_shift",cumulative_layout_shift_time:"view.cumulative_layout_shift_time",cumulative_layout_shift_target_selector:"view.cumulative_layout_shift_target_selector",first_input_delay:"view.first_input_delay",loading_time:"view.loading_time",dom_interactive:"view.dom_interactive",dom_content_loaded:"view.dom_content_loaded",dom_complete:"view.dom_complete",load_event:"view.load_event",first_input_time:"view.first_input_time",first_input_target_selector:"view.first_input_target_selector",first_paint_time:"view.fpt",interaction_to_next_paint:"view.interaction_to_next_paint",interaction_to_next_paint_target_selector:"view.interaction_to_next_paint_target_selector",resource_load_time:"view.resource_load_time",time_to_interactive:"view.tti",dom:"view.dom",dom_ready:"view.dom_ready",time_spent:"view.time_spent",first_byte:"view.first_byte",frustration_count:"view.frustration.count",custom_timings:"view.custom_timings"}},resource:{type:jt.RESOURCE,tags:{trace_id:"_gc.trace_id",span_id:"_gc.span_id",resource_id:"resource.id",resource_status:"resource.status",resource_status_group:"resource.status_group",resource_method:"resource.method"},fields:{duration:"resource.duration",resource_size:"resource.size",resource_url:"resource.url",resource_url_host:"resource.url_host",resource_url_path:"resource.url_path",resource_url_path_group:"resource.url_path_group",resource_url_query:"resource.url_query",resource_delivery_type:"resource.delivery_type",resource_type:"resource.type",resource_protocol:"resource.protocol",resource_encode_size:"resource.encoded_body_size",resource_decode_size:"resource.decoded_body_size",resource_transfer_size:"resource.transfer_size",resource_render_blocking_status:"resource.render_blocking_status",resource_dns:"resource.dns",resource_tcp:"resource.tcp",resource_ssl:"resource.ssl",resource_ttfb:"resource.ttfb",resource_trans:"resource.trans",resource_redirect:"resource.redirect",resource_first_byte:"resource.firstbyte",resource_dns_time:"resource.dns_time",resource_download_time:"resource.download_time",resource_first_byte_time:"resource.first_byte_time",resource_connect_time:"resource.connect_time",resource_ssl_time:"resource.ssl_time",resource_redirect_time:"resource.redirect_time"}},error:{type:jt.ERROR,tags:{error_id:"error.id",trace_id:"_gc.trace_id",span_id:"_gc.span_id",error_source:"error.source",error_type:"error.type",error_handling:"error.handling"},fields:{error_message:["string","error.message"],error_stack:["string","error.stack"],error_causes:["string","error.causes"],error_handling_stack:["string","error.handling_stack"]}},long_task:{type:jt.LONG_TASK,tags:{long_task_id:"long_task.id"},fields:{duration:"long_task.duration",blocking_duration:"long_task.blocking_duration",first_ui_event_timestamp:"long_task.first_ui_event_timestamp",render_start:"long_task.render_start",style_and_layout_start:"long_task.style_and_layout_start",long_task_start_time:"long_task.start_time",scripts:["string","long_task.scripts"]}},action:{type:jt.ACTION,tags:{action_type:"action.type"},fields:{action_name:"action.target.name",duration:"action.loading_time",action_error_count:"action.error.count",action_resource_count:"action.resource.count",action_frustration_types:"action.frustration.type",action_long_task_count:"action.long_task.count",action_target:"_gc.action.target",action_position:"_gc.action.position"}},telemetry:{type:"telemetry",fields:{status:"telemetry.status",message:["string","telemetry.message"],type:"telemetry.type",error_stack:["string","telemetry.error.stack"],error_kind:["string","telemetry.error.kind"],connectivity:["string","telemetry.connectivity"],runtime_env:["string","telemetry.runtime_env"],usage:["string","telemetry.usage"],configuration:["string","telemetry.configuration"]}},browser_log:{type:jt.LOGGER,tags:{error_source:"error.source",error_type:"error.type",error_resource_url:"http.url",error_resource_url_host:"http.url_host",error_resource_url_path:"http.url_path",error_resource_url_path_group:"http.url_path_group",error_resource_status:"http.status_code",error_resource_status_group:"http.status_group",error_resource_method:"http.method",action_id:"user_action.id",service:"service",status:"status"},fields:{message:["string","message"],error_message:["string","error.message"],error_stack:["string","error.stack"]}}},ui=[];function ci(e,t,n){var r=new kn,i=new kn,o=Wr(e.sessionStoreStrategyType,t,n);ui.push((function(){return o.stop()}));var a,s=Xe({expireDelay:144e5});function u(){return{id:o.getSession().id,trackingType:o.getSession()[t],hasError:!!o.getSession().hasError}}return ui.push((function(){return s.stop()})),o.renewObservable.subscribe((function(){s.add(u(),le()),r.notify()})),o.expireObservable.subscribe((function(){i.notify(),s.closeActive(le())})),o.expandOrRenewSession(),s.add(u(),ge().relative),a=Pn(window,[et,ot,tt,it],(function(){o.expandOrRenewSession()}),{capture:!0,passive:!0}).stop,ui.push(a),function(e){var t=function(){"visible"===document.visibilityState&&e()},n=In(document,at,t).stop;ui.push(n);var r=y(t,6e4);ui.push((function(){h(r)}))}((function(){return o.expandSession()})),function(e){var t=In(window,ct,e,{capture:!0}).stop;ui.push(t)}((function(){o.restartSession()})),{findSession:function(e,t){return s.find(e,t)},renewObservable:r,expireObservable:i,sessionStateUpdateObservable:o.sessionStateUpdateObservable,expire:o.expire,updateSessionState:o.updateSessionState}}var fi=3145728,li=0,di=1,pi=2,vi=0,mi=1;function gi(e,t,n,r,i){t.transportStatus===li&&0===t.queuedPayloads.size()&&t.bandwidthMonitor.canHandle(e)?hi(e,t,n,{onSuccess:function(){return bi(vi,t,n,r,i)},onFailure:function(){t.queuedPayloads.enqueue(e),yi(t,n,r,i)}}):t.queuedPayloads.enqueue(e)}function yi(e,t,n,r){e.transportStatus===pi&&m((function(){hi(e.queuedPayloads.first(),e,t,{onSuccess:function(){e.queuedPayloads.dequeue(),e.currentBackoffTime=1e3,bi(mi,e,t,n,r)},onFailure:function(){e.currentBackoffTime=Math.min(256e3,2*e.currentBackoffTime),yi(e,t,n,r)}})}),e.currentBackoffTime)}function hi(e,t,n,r){var i=r.onSuccess,o=r.onFailure;t.bandwidthMonitor.add(e),n(e,(function(n){t.bandwidthMonitor.remove(e),!function(e,t,n){return!(t.retryMaxSize>-1&&n.retry&&n.retry.count>t.retryMaxSize)&&("opaque"!==e.type&&(0===e.status&&!navigator.onLine||408===e.status||429===e.status||e.status>=500))}(n,t,e)?(t.transportStatus=li,i()):(t.transportStatus=t.bandwidthMonitor.ongoingRequestCount>0?di:pi,e.retry={count:e.retry?e.retry.count+1:1,lastFailureStatus:n.status},o())}))}function bi(e,t,n,r,i){e===vi&&t.queuedPayloads.isFull()&&!t.queueFullReported&&(i({message:"Reached max "+r+" events size queued for upload: 3MiB",source:hn.AGENT,startClocks:de()}),t.queueFullReported=!0);var o=t.queuedPayloads;for(t.queuedPayloads=_i();o.size()>0;)gi(o.dequeue(),t,n,r,i)}function _i(){var e=[];return{bytesCount:0,enqueue:function(t){this.isFull()||(e.push(t),this.bytesCount+=t.bytesCount)},first:function(){return e[0]},dequeue:function(){var t=e.shift();return t&&(this.bytesCount-=t.bytesCount),t},size:function(){return e.length},isFull:function(){return this.bytesCount>=fi}}}function wi(e,t){return e?(e=e+(-1===e.indexOf("?")?"?":"&")+"precision=ms",t&&(e=e+"&encoding="+t),e):e}function Si(e,t,n,r){void 0===n&&(n=-1);var i=function(e){return{transportStatus:li,currentBackoffTime:1e3,bandwidthMonitor:{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(e){return 0===this.ongoingRequestCount||this.ongoingByteCount+e.bytesCount<=81920&&this.ongoingRequestCount<32},add:function(e){this.ongoingRequestCount+=1,this.ongoingByteCount+=e.bytesCount},remove:function(e){this.ongoingRequestCount-=1,this.ongoingByteCount-=e.bytesCount}},queuedPayloads:_i(),queueFullReported:!1,retryMaxSize:e}}(n),o=function(n,r){return function(e,t,n,r){var i=n.data,o=n.bytesCount,a=wi(e,n.encoding);if(function(){try{return window.Request&&"keepalive"in new Request("http://a")}catch(e){return!1}}()&&o<t){var s={method:"POST",body:i,keepalive:!0,mode:"cors"};n.type&&(s.headers={"Content-Type":n.type}),fetch(a,s).then(c((function(e){"function"==typeof r&&r({status:e.status,type:e.type})})),c((function(){Ci(a,n,r)})))}else Ci(a,n,r)}(e,t,n,r)};return{send:function(t){gi(t,i,o,e,r)},sendOnExit:function(n){!function(e,t,n){var r=n.data,i=n.bytesCount,o=wi(e,n.encoding);if(navigator.sendBeacon&&i<t)try{var a;if(a=n.type?new Blob([r],{type:n.type}):r,navigator.sendBeacon(o,a))return}catch(e){Ei||(Ei=!0)}Ci(o,n)}(e,t,n)}}}var Ei=!1;function Ci(e,t,n){var r=t.data,i=new XMLHttpRequest;i.open("POST",e,!0),r instanceof Blob?i.setRequestHeader("Content-Type",r.type):t.type&&i.setRequestHeader("Content-Type",t.type),In(i,"loadend",(function(){"function"==typeof n&&n({status:i.status})}),{once:!0}),i.send(r)}function Ti(t){if("object"===e(t)&&t)t=$t(t);else if(!H(t))return t;return String(t).replace(/[\s=,"]/g,(function(e){return"\\"+e}))}function ki(t,n){return"object"===e(t)&&t?t=$t(t):n&&(t=""+t),t}function xi(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function Oi(t){return"object"===e(t)&&t?xi($t(t)):H(t)?xi(t):t}var Ri="custom_keys",Ai=function(e){if(!e||!e.type)return{rowStr:"",rowData:void 0};var t={tags:{},fields:{}},n=!1,r="";return k(si,(function(i,o){if(i.type===e.type){r+=o+",",t.measurement=o;var a=[],s=R({},oi,i.tags),u=["date","type",Ri];k(s,(function(n,r){var i=Se(e,n);u.push(r),(i||F(i))&&(t.tags[r]=ki(i,!0),a.push(Ti(r)+"="+Ti(i)))}));var c=[],f=R({},ai,i.fields);if(k(f,(function(n,r){if(I(n)&&2===n.length){var i=n[1],o=Se(e,i);u.push(r),null!=o&&(t.fields[r]=ki(o),c.push(Ti(r)+"="+Oi(o)))}else if(H(n)){o=Se(e,n);u.push(r),null!=o&&(t.fields[r]=ki(o),c.push(Ti(r)+"="+Oi(o)))}})),e.context&&j(e.context)&&!B(e.context)){var l=[];k(e.context,(function(e,n){u.indexOf(n)>-1||(u.push(n),null!=e&&(l.push(n),t.fields[n]=ki(e),c.push(Ti(n)+"="+Oi(e))))})),l.length&&(t.fields.custom_keys=ki(l),c.push(Ti(Ri)+"="+Oi(l)))}e.type===jt.LOGGER&&k(e,(function(e,n){-1===u.indexOf(n)&&null!=e&&(t.fields[n]=ki(e),c.push(Ti(n)+"="+Oi(e)))})),a.length&&(r+=a.join(",")),c.length&&(r+=" ",r+=c.join(","),n=!0),r=r+" "+e.date,t.time=e.date}})),{rowStr:n?r:"",rowData:n?t:void 0}};function Ii(e){var t=e.encoder,n=e.request,r=e.messageBytesLimit,i=e.sendContentTypeByJson,o=e.flushController,s={},u=o.flushObservable.subscribe((function(e){!function(e){var r=M(s).join(i?",":"\n");s={};var o=(u=e.reason,Te(M(ni),u)),a=o?n.sendOnExit:n.send;var u;if(o&&t.isAsync){var f=t.finishSync();f.outputBytesCount&&a(Pi(f,i));var l=[f.pendingData,r].filter(Boolean).join("\n");l&&a({data:l,bytesCount:pn(l)})}else{if(r){var d=c([r],t.isEmpty());i&&(d+="]"),t.write(d)}else i&&t.write("]");t.finish((function(e){a(Pi(e))}))}}(e)}));function c(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i?t?"["+e.join(","):","+e.join(","):t?e.join("\n"):"\n"+e.join("\n")}function f(e,n){var u=function(e){return i?$t(Ai(e).rowData):Ai(e).rowStr}(e),f=t.estimateEncodedBytesCount(u);f>=r?a.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(r,"KB.")):(function(e){return void 0!==e&&void 0!==s[e]}(n)&&function(e){var n=s[e];delete s[e];var r=t.estimateEncodedBytesCount(n);o.notifyAfterRemoveMessage(r)}(n),function(e,n,r){o.notifyBeforeAddMessage(n),void 0!==r?(s[r]=e,o.notifyAfterAddMessage()):t.write(c([e],t.isEmpty()),(function(e){o.notifyAfterAddMessage(e-n)}))}(u,f,n))}return{flushController:o,add:f,upsert:f,stop:u.unsubscribe}}function Pi(e,t){return{data:"string"==typeof e.output?e.output:new Blob([e.output],{type:"text/plain"}),type:t?"application/json;UTF-8":void 0,bytesCount:e.outputBytesCount,encoding:e.encoding}}function Ni(e){var t=e.messagesLimit,n=e.bytesLimit,r=e.durationLimit,i=e.pageExitObservable,o=e.sessionExpireObservable;i.subscribe((function(e){return f(e.reason)})),o.subscribe((function(){return f("session_expire")}));var a,s=new kn((function(){return function(){pageExitSubscription.unsubscribe(),sessionExpireSubscription.unsubscribe()}})),u=0,c=0;function f(e){if(0!==c){var t=c,n=u;c=0,u=0,l(),s.notify({reason:e,messagesCount:t,bytesCount:n})}}function l(){g(a),a=void 0}return{flushObservable:s,getMessagesCount:function(){return c},notifyBeforeAddMessage:function(e){u+e>=n&&f("bytes_limit"),c+=1,u+=e,void 0===a&&(a=m((function(){f("duration_limit")}),r))},notifyAfterAddMessage:function(e){void 0===e&&(e=0),u+=e,c>=t?f("messages_limit"):u>=n&&f("bytes_limit")},notifyAfterRemoveMessage:function(e){u-=e,0===(c-=1)&&l()}}}function Mi(){var e;arguments.length>0&&void 0!==arguments[0]||null===(e=p().location)||void 0===e||e.hostname;return!1}function Li(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}function Ui(e,t,n){return(t=Li(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vi(e,t,n){for(var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Di(Object(n),!0).forEach((function(t){Ui(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Di(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),i=0,o=Object.entries(t);i<o.length;i++){var s=ar(o[i],2),u=s[0],c=s[1],f=c.required;"string"===c.type&&u in r&&(r[u]=String(r[u])),f&&!(u in e)&&a.warn("The property ".concat(u," of ").concat(n," context is required; context will not be sent to the intake."))}return r}function ji(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.customerDataTracker,r=t.propertiesConfig,i=void 0===r?{}:r,o={},a=new kn,s={getContext:function(){return Y(o)},setContext:function(t){"object"===Q(t)?(o=vn(Vi(t,i,e)),null==n||n.updateCustomerData(o)):s.clearContext(),a.notify()},setContextProperty:function(t,r){o[t]=vn(Vi(Ui({},t,r),i,e)[t]),null==n||n.updateCustomerData(o),a.notify()},removeContextProperty:function(t){delete o[t],null==n||n.updateCustomerData(o),Vi(o,i,e),a.notify()},clearContext:function(){o={},null==n||n.resetCustomerData(),a.notify()},changeObservable:a};return s}var Bi="user",qi="global context",Hi="view",zi=[];function Fi(e,t,n,r){var i=function(e,t,n){return e.storeContextsKey&&H(e.storeContextsKey)?"_gc_s_"+t+"_"+n+"_"+e.storeContextsKey:"_gc_s_"+t+"_"+n}(e,n,r);function o(){var e=localStorage.getItem(i);return null!==e?JSON.parse(e):{}}return zi.push(In(window,Et,(function(e){i===e.key&&t.setContext(o())}))),t.changeObservable.subscribe((function(){localStorage.setItem(i,JSON.stringify(t.getContext()))})),t.setContext(A(o(),t.getContext())),t}var Gi=3072,Wi=16384,Ji=0,Xi=1,Ki=2;function $i(e){var t=0,n=G((function(n){t=pn($t(n)),e()}),200),r=n.throttled,i=n.cancel,o=function(){i(),t=0};return{updateCustomerData:function(e){B(e)?o():r(e)},resetCustomerData:o,getBytesCount:function(){return t},stop:function(){i()}}}function Qi(e){a.warn("Customer data exceeds the recommended ".concat(e/ln,"KiB threshold."))}function Zi(){var e="",t=0;return{isAsync:!1,isEmpty:function(){return!e},write:function(n,r){var i=pn(n);t+=i,e+=n,r&&r(i)},finish:function(e){e(this.finishSync())},finishSync:function(){var n={output:e,outputBytesCount:t,rawBytesCount:t,pendingData:""};return e="",t=0,n},estimateEncodedBytesCount:function(e){return e.length}}}function Yi(e){var t=x({},e);return k(["id","name","email"],(function(e){e in t&&(t[e]=String(t[e]))})),t}function eo(e){this.map=new WeakMap,e&&e.forEach((function(e){this.map.set(e,1)}))}function to(e,t){t.silentMultipleInit||a.error(e+" is already initialized.")}eo.prototype.add=function(e){return this.map.set(e,1),this},eo.prototype.delete=function(e){return this.map.delete(e)},eo.prototype.has=function(e){return this.map.has(e)};var no=1,ro=2,io=3,oo="0",ao="1",so="2",uo="3",co="4",fo="5",lo="6";function po(e,t){var n=ci(e,"rum",(function(t){return function(e,t){var n,r=e.sessionSampleRate,i=e.sessionOnErrorSampleRate,o=e.sessionReplaySampleRate,a=e.sessionReplayOnErrorSampleRate,s=oe(r),u=oe(i),c=oe(o),f=oe(a);!function(e){return e===oo||e===fo||e===lo||e===co||e===so||e===uo||e===ao}(t)?u||s?s&&c?n=ao:s&&f?n=uo:!s||c||f?u&&c?n=co:u&&f?n=lo:!u||c||f||(n=fo):n=so:n=oo:n=t;return{trackingType:n,isTracked:vo(n)}}(e,t)}));return n.expireObservable.subscribe((function(){t.notify(Jn)})),n.renewObservable.subscribe((function(){t.notify(Wn)})),n.sessionStateUpdateObservable.subscribe((function(e){var t=e.previousState,r=e.newState;if(!t.hasError&&r.hasError){var i=n.findSession();i&&(i.hasError=!0,i.ets=r.ets||pe())}})),{findTrackedSession:function(e){var t=n.findSession(e);if(t&&vo(t.trackingType)){var r=t.trackingType===fo||t.trackingType===co||t.trackingType===lo,i=no;return t.trackingType===ao||t.trackingType===co?i=ro:t.trackingType!==lo&&t.trackingType!==uo||(i=io),{id:t.id,plan:i,errorSessionReplayAllowed:i===io,sessionHasError:t.hasError,isErrorSession:r,sessionErrorTimestamp:t.ets,sessionReplayAllowed:i===ro||i===io}}},expire:n.expire,expireObservable:n.expireObservable,sessionStateUpdateObservable:n.sessionStateUpdateObservable,setErrorForSession:function(){return n.updateSessionState({hasError:"1",ets:pe()})}}}function vo(e){return e!==oo}var mo="_gc_usr_id";var go=function(e){var t;if(e.sessionStoreStrategyType)return t="Cookie"===e.sessionStoreStrategyType.type?function(e){var t=Sr(mo,e);return t||(t=W(),wr(mo,t,5184e6,e)),t}(e.sessionStoreStrategyType.cookieOptions):function(){var e=localStorage.getItem(mo);return e||(e=W(),localStorage.setItem(mo,e)),e}(),{getId:function(){return t}}};function yo(){var e=function(){var e,t=window;if(t.Zone&&(e=v(t,"MutationObserver"),t.MutationObserver&&e===t.MutationObserver)){var n=v(new t.MutationObserver(te),"originalInstance");e=n&&n.constructor}e||(e=t.MutationObserver);return e}();return new kn((function(t){if(e){var n=new e(c((function(){return t.notify()})));return n.observe(document,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),function(){return n.disconnect()}}}))}function ho(e){var t=O(e);return new kn((function(n){var r,i,o,a,s=(r=c,i=Cn(History.prototype,"pushState",(function(e){(0,e.onPostCall)(r)})),o=Cn(History.prototype,"replaceState",(function(e){(0,e.onPostCall)(r)})),a=In(window,rt,r),{stop:function(){i.stop(),o.stop(),a.stop()}}),u=In(window,vt,c);function c(){if(t.href!==e.href){var r=O(e);n.notify({newLocation:r,oldLocation:t}),t=r}}return function(){s.stop(),u.stop()}}))}var bo="initial_document",_o=[[Ct,function(e){return bo===e}],[Tt,function(e){return"xmlhttprequest"===e}],[xt,function(e){return"fetch"===e}],[kt,function(e){return"beacon"===e}],[Ot,function(e,t){return null!==t.match(/\.css$/i)}],[Rt,function(e,t){return null!==t.match(/\.js$/i)}],[At,function(e,t){return Te(["image","img","icon"],e)||null!==t.match(/\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i)}],[It,function(e,t){return null!==t.match(/\.(woff|eot|woff2|ttf)$/i)}],[Pt,function(e,t){return Te(["audio","video"],e)||null!==t.match(/\.(mp3|mp4)$/i)}]];function wo(e){var t=e.name;if(!function(e){try{return!!pr(e)}catch(e){return!1}}(t))return Nt;var n=function(e){var t=pr(e).pathname;return"/"===t[0]?t:"/"+t}(t),r=Nt;return k(_o,(function(t){var i=t[0];if((0,t[1])(e.initiatorType,n))return r=i,!1})),r}function So(){for(var e=N(arguments),t=1;t<e.length;t+=1)if(e[t-1]>e[t])return!1;return!0}function Eo(e){return""===e.deliveryType?"other":e.deliveryType}function Co(e){return""===e.nextHopProtocol?void 0:e.nextHopProtocol}var To=/[^\u0000-\u007F]/;function ko(e,t){return n=e,(To.test(n)?void 0!==window.TextEncoder?(new TextEncoder).encode(n).length:new Blob([n]).size:n.length)>t;var n}function xo(e){return 0===e.duration&&e.startTime<e.responseEnd?se(e.responseEnd-e.startTime):se(e.duration)}function Oo(e){if(Ao(e)){var t=e.startTime,n=e.fetchStart,r=e.redirectStart,i=e.redirectEnd,o=e.domainLookupStart,a=e.domainLookupEnd,s=e.connectStart,u=e.secureConnectionStart,c=e.connectEnd,f=e.requestStart,l=e.responseStart,d=e.responseEnd,p={firstbyte:se(l-f),trans:se(d-l),downloadTime:Po(t,l,d),firstByteTime:Po(t,f,l)};return l>0&&l<=le()&&(p.ttfb=se(l-f)),c!==n&&(p.tcp=se(c-s),p.connectTime=Po(t,s,c),So(s,u,c)&&(p.ssl=se(c-u),p.sslTime=Po(t,u,c))),a!==n&&(p.dns=se(a-o),p.dnsTime=Po(t,o,a)),Io(e)&&(p.redirect=se(i-r),p.redirectTime=Po(t,r,i)),e.renderBlockingStatus&&(p.renderBlockingStatus=e.renderBlockingStatus),p}}function Ro(e){return e.duration>=0}function Ao(e){var t=So(e.startTime,e.fetchStart,e.domainLookupStart,e.domainLookupEnd,e.connectStart,e.connectEnd,e.requestStart,e.responseStart,e.responseEnd),n=!Io(e)||So(e.startTime,e.redirectStart,e.redirectEnd,e.fetchStart);return t&&n}function Io(e){return e.redirectEnd>e.startTime}function Po(e,t,n){return{duration:se(n-t),start:se(t-e)}}function No(e){return e.startTime<e.responseStart?{size:e.decodedBodySize,encodedBodySize:e.encodedBodySize,decodedBodySize:e.decodedBodySize,transferSize:e.transferSize}:{size:void 0,encodedBodySize:void 0,decodedBodySize:void 0,transferSize:void 0}}function Mo(e,t){return t&&!function(e,t){var n=[t.rumEndpoint];return t.logsEndpoint&&n.push(t.logsEndpoint),t.sessionReplayEndPoint&&n.push(t.sessionReplayEndPoint),D(n,(function(t){return 0===e.indexOf(t)}))||t.isIntakeUrl(e)}(t,e)}var Lo=/data:(.+)?(;base64)?,/g;function Uo(e){return!(e.length<=24e3)&&("data:"===e.substring(0,5)&&(e=e.substring(0,24e3),!0))}function Do(e){return e.match(Lo)[0]+"[...]"}function Vo(e,t){var n=ve(),r=!1,i=Pn(window,[et,gt,tt,ot,lt],(function(e){if(e.cancelable){var t={entryType:"first-input",processingStart:le(),processingEnd:le(),startTime:e.timeStamp,duration:0,name:"",cancelable:!1,target:null,toJSON:function(){return{}}};e.type===lt?function(e){Pn(window,[dt,pt],(function(t){t.type===dt&&o(e)}),{once:!0})}(t):o(t)}}),{passive:!0,capture:!0}).stop;return{stop:i};function o(e){if(!r){r=!0,i();var o=e.processingStart-e.startTime;o>=0&&o<ve()-n&&t(e)}}}var jo,Bo="event",qo="first-input",Ho="largest-contentful-paint",zo="layout-shift",Fo="longtask",Go="long-animation-frame",Wo="navigation",Jo="paint",Xo="resource",Ko="visibility-state";function $o(e,t){return new kn((function(n){if(window.PerformanceObserver){var r,i,o=function(t){var r=function(e,t){return t.filter((function(t){return!function(e,t){return!(t.entryType!==Xo||Mo(e,t.name)&&Ro(t))}(e,t)}))}(e,t);r.length>0&&n.notify(r)},a=!0,s=new PerformanceObserver(c((function(e){a?r=m((function(){o(e.getEntries())})):o(e.getEntries())})));try{s.observe(t)}catch(e){if(Te([Xo,Wo,Fo,Jo],t.type)){t.buffered&&(r=m((function(){o(performance.getEntriesByType(t.type))})));try{s.observe({entryTypes:[t.type]})}catch(e){return}}}if(a=!1,function(e){!jo&&void 0!==window.performance&&"getEntries"in performance&&"addEventListener"in performance&&(jo=In(performance,"resourcetimingbufferfull",(function(){performance.clearResourceTimings()})))}(),!Qo(qo)&&t.type===qo){var u=Vo(0,(function(e){o([e])}));i=u.stop}return function(){s.disconnect(),i&&i(),g(r)}}}))}function Qo(e){return window.PerformanceObserver&&void 0!==PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes(e)}function Zo(e){var t=e.lifeCycle,n=e.isChildEvent,r=e.onChange;void 0===r&&(r=te);var i={errorCount:0,longTaskCount:0,resourceCount:0,actionCount:0,frustrationCount:0},o=t.subscribe(Zn,(function(e){if(e.type!==jt.VIEW&&n(e))switch(e.type){case jt.ERROR:i.errorCount+=1,r();break;case jt.ACTION:e.action.frustration&&(i.frustrationCount+=e.action.frustration.type.length),i.actionCount+=1,r();break;case jt.LONG_TASK:i.longTaskCount+=1,r();break;case jt.RESOURCE:i.resourceCount+=1,r()}}));return{stop:function(){o.unsubscribe()},eventCounts:i}}var Yo=100;function ea(e,t,n,r,i){return function(e,t,n){var r,i=!1,o=m((function(){c({hadActivity:!1})}),100),a=void 0!==n?m((function(){return c({hadActivity:!0,end:pe()})}),n):void 0,s=e.subscribe((function(e){var t=e.isBusy;g(o),g(r);var n=pe();t||(r=m((function(){c({hadActivity:!0,end:n})}),100))})),u=function(){i=!0,g(o),g(r),g(a),s.unsubscribe()};function c(e){i||(u(),t(e))}return{stop:u}}(function(e,t,n){return new kn((function(r){var i,o=[],a=0;o.push(t.subscribe((function(){u()})),$o(n,{type:Xo}).subscribe((function(e){D(e,(function(e){return!ta(n,e.name)}))&&u()})),e.subscribe(Kn,(function(e){ta(n,e.url)||(void 0===i&&(i=e.requestIndex),a+=1,u())})),e.subscribe($n,(function(e){ta(n,e.url)||void 0===i||e.requestIndex<i||(a-=1,u())})));var s=Cn(window,"open",u).stop;return function(){s(),k(o,(function(e){e.unsubscribe()}))};function u(){r.notify({isBusy:a>0})}}))}(e,t,n),r,i)}function ta(e,t){return n=e.excludedActivityUrls,r=t,void 0===i&&(i=!1),D(n,(function(e){try{if("function"==typeof e)return e(r);if(e instanceof RegExp)return e.test(r);if("string"==typeof e)return i?Be(r,e):e===r}catch(e){a.error(e)}return!1}));var n,r,i}var na=re,ra=0,ia=1,oa=2;function aa(e,t){var n,r=[],i=ra;function o(e){e.stopObservable.subscribe(a),r.push(e),g(n),n=m(s,1e3)}function a(){i===ia&&function(e,t,n){if(e.every)return e.every(t);for(var r=!0,i=0;i<e.length;i++)if(E.call(e,i)){var o=e[i];if(!t.call(n,o,i,e)){r=!1;break}}return r}(r,(function(e){return e.isStopped()}))&&(i=oa,t(r))}function s(){g(n),i===ra&&(i=ia,a())}return o(e),{tryAppend:function(e){return i===ra&&(r.length>0&&(t=r[r.length-1].event,n=e.event,!(t.target===n.target&&(a=t,u=n,Math.sqrt(Math.pow(a.clientX-u.clientX,2)+Math.pow(a.clientY-u.clientY,2))<=100)&&t.timeStamp-n.timeStamp<=na))?(s(),!1):(o(e),!0));var t,n,a,u},stop:function(){s()}}}var sa="data-guance-action-name",ua=[sa,"data-testid","data-test","data-qa","data-cy","data-test-id","data-qa-id","data-testing","data-component","data-element","data-source-file"];function ca(e,t){return fa(e,sa)||t&&fa(e,t)||ma(e,t,pa)||ma(e,t,va)||""}function fa(e,t){var n;if(function(){void 0===da&&(da="closest"in HTMLElement.prototype);return da}())n=e.closest("["+t+"]");else for(var r=e;r;){if(r.hasAttribute(t)){n=r;break}r=r.parentElement}if(n)return ya(ga(n.getAttribute(t).trim()))}var la,da,pa=[function(e,t){if(function(){void 0===la&&(la="labels"in HTMLInputElement.prototype);return la}()){if("labels"in e&&e.labels&&e.labels.length>0)return ha(e.labels[0],t)}else if(e.id){var n=e.ownerDocument&&ke(e.ownerDocument.querySelectorAll("label"),(function(t){return t.htmlFor===e.id}));return n&&ha(n,t)}},function(e){if("INPUT"===e.nodeName){var t=e,n=t.getAttribute("type");if("button"===n||"submit"===n||"reset"===n)return t.value}},function(e,t){if("BUTTON"===e.nodeName||"LABEL"===e.nodeName||"button"===e.getAttribute("role"))return ha(e,t)},function(e){return e.getAttribute("aria-label")},function(e,t){var n=e.getAttribute("aria-labelledby");if(n)return n=n.split(/\s+/),n=U(n,(function(t){return function(e,t){return e.ownerDocument?e.ownerDocument.getElementById(t):null}(e,t)})),n=L(n,(function(e){return Boolean(e)})),(n=U(n,(function(e){return ha(e,t)}))).join(" ")},function(e){return e.getAttribute("alt")},function(e){return e.getAttribute("name")},function(e){return e.getAttribute("title")},function(e){return e.getAttribute("placeholder")},function(e,t){if("options"in e&&e.options.length>0)return ha(e.options[0],t)}],va=[function(e,t){return ha(e,t)}];function ma(e,t,n){for(var r=e,i=0;i<=10&&r&&"BODY"!==r.nodeName&&"HTML"!==r.nodeName&&"HEAD"!==r.nodeName;){for(var o=0;o<n.length;o++){var a=(0,n[o])(r,t);if("string"==typeof a){var s=a.trim();if(s)return ya(ga(s))}}if("FORM"===r.nodeName)break;r=r.parentElement,i+=1}}function ga(e){return e.replace(/\s+/g," ")}function ya(e){return e.length>100?Ee(e,100)+" [...]":e}function ha(e,t){if(!e.isContentEditable){if("innerText"in e){var n=e.innerText,r=function(t){for(var r=e.querySelectorAll(t),i=0;i<r.length;i+=1){var o=r[i];if("innerText"in o){var a=o.innerText;a&&a.trim().length>0&&(n=n.replace(a,""))}}};return Me()===Ae&&r("script, style"),r("[data-guance-action-name]"),t&&r("["+t+"]"),n}return e.textContent}}var ba,_a=[Ca,function(e){if(e.id&&!Ea(e.id))return"#"+V(e.id)}],wa=[Ca,function(e){if("BODY"===e.tagName)return;if(e.classList.length>0)for(var t=0;t<e.classList.length;t+=1){var n=e.classList[t];if(!Ea(n))return V(e.tagName)+"."+V(n)}},function(e){return V(e.tagName)}];function Sa(e,t){if(function(e){if("isConnected"in e)return e.isConnected;return e.ownerDocument.documentElement.contains(e)}(e)){for(var n,r=e;r&&"HTML"!==r.nodeName;){var i=ka(r,_a,xa,t,n);if(i)return i;n=ka(r,wa,Oa,t,n)||Ra(Ta(r),n),r=r.parentElement}return n}}function Ea(e){return/[0-9]/.test(e)}function Ca(e,t){if(t&&(r=i(t)))return r;for(var n=0;n<ua.length;n++){var r;if(r=i(ua[n]))return r}function i(t){if(e.hasAttribute(t))return V(e.tagName)+"["+t+'="'+V(e.getAttribute(t))+'"]'}}function Ta(e){for(var t=e.parentElement&&e.parentElement.firstElementChild,n=1;t&&t!==e;)t.tagName===e.tagName&&(n+=1),t=t.nextElementSibling;var r=V(e.tagName);return/^::/.test(r)?r:r+":nth-of-type("+n+")"}function ka(e,t,n,r,i){for(var o=0;o<t.length;o++){var a=(0,t[o])(e,r);if(a&&n(e,a,i))return Ra(a,i)}}function xa(e,t,n){return 1===e.ownerDocument.querySelectorAll(Ra(t,n)).length}function Oa(e,t,n){var r;if(void 0===n)r=function(e){return e.matches(t)};else{var i=function(){if(void 0===ba)try{document.querySelector(":scope"),ba=!0}catch(e){ba=!1}return ba}()?Ra("".concat(t,":scope"),n):Ra(t,n);r=function(e){return null!==e.querySelector(i)}}for(var o=e.parentElement.firstElementChild;o;){if(o!==e&&r(o))return!1;o=o.nextElementSibling}return!0}function Ra(e,t){return t?e+">"+t:e}function Aa(){var e=window.getSelection();return!e||e.isCollapsed}function Ia(e){return e.target instanceof Element&&!1!==e.isPrimary}function Pa(e,t){if(function(e){if(D(e,(function(e){return e.getUserActivity().selection||e.getUserActivity().scroll})))return!1;for(var t=0;t<e.length-2;t+=1)if(e[t+3-1].event.timeStamp-e[t].event.timeStamp<=re)return!0;return!1}(e))return t.addFrustration(Ut),D(e,Na)&&t.addFrustration(Vt),t.hasError()&&t.addFrustration(Dt),{isRage:!0};var n=D(e,(function(e){return e.getUserActivity().selection}));return k(e,(function(e){e.hasError()&&e.addFrustration(Dt),Na(e)&&!n&&e.addFrustration(Vt)})),{isRage:!1}}function Na(e){return!(e.hasPageActivity()||e.getUserActivity().input||e.getUserActivity().scroll)&&(t=e.event.target,n='input:not([type="checkbox"]):not([type="radio"]):not([type="button"]):not([type="submit"]):not([type="reset"]):not([type="range"]),textarea,select,[contenteditable],[contenteditable] *,canvas,a[href],a[href] *',!(t.matches?t.matches(n):t.msMatchesSelector&&t.msMatchesSelector(n)));var t,n}var Ma=1e4,La=new Map;function Ua(e,t){La.set(e,t),La.forEach((function(e,t){me(t,le())>1e4&&La.delete(t)}))}function Da(e,t,n){var r,i=new Xe({expireDelay:3e5}),o=new kn;e.subscribe(Wn,(function(){i.reset()})),e.subscribe(Fn,d);var a,s,u,c,f,l=(a={onPointerDown:function(r){return function(e,t,n,r){var i,o,a,s,u=(i=r,o=e.actionNameAttribute,a=i.target.getBoundingClientRect(),(s=Sa(i.target,o))&&Ua(i.timeStamp,s),{type:Mt,target:{width:Math.round(a.width),height:Math.round(a.height),selector:s},position:{x:Math.round(i.clientX-a.left),y:Math.round(i.clientY-a.top)},name:ca(i.target,o)}),c=!1;return ea(t,n,e,(function(e){c=e.hadActivity}),Yo),{clickActionBase:u,hadActivityOnPointerDown:function(){return c}}}(n,e,t,r)},onPointerUp:function(r,a,s){!function(e,t,n,r,i,o,a,s,u,c){var f=qa(t,r,u,a,s);o(f);var l=a&&a.target&&a.target.selector;l&&Ua(s.timeStamp,l);var d=ea(t,n,e,(function(e){e.hadActivity&&e.end<f.startClocks.timeStamp?f.discard():e.hadActivity?f.stop(e.end):c()?f.stop(f.startClocks.timeStamp):f.stop()}),Ma).stop,p=t.subscribe(Fn,(function(e){f.stop(e.endClocks.timeStamp)})),v=i.subscribe((function(){f.stop()}));f.stopObservable.subscribe((function(){p.unsubscribe(),d(),v.unsubscribe()}))}(n,e,t,i,o,p,r.clickActionBase,a,s,r.hadActivityOnPointerDown)}},c={selection:!1,input:!1,scroll:!1},f=[In(window,lt,(function(e){Ia(e)&&(s=Aa(),c={selection:!1,input:!1,scroll:!1},u=a.onPointerDown(e))}),{capture:!0}),In(window,St,(function(){s&&Aa()||(c.selection=!0)}),{capture:!0}),In(window,dt,(function(e){if(Ia(e)&&u){var t=c;a.onPointerUp(u,e,(function(){return t})),u=void 0}}),{capture:!0}),In(window,it,(function(){c.scroll=!0}),{capture:!0,passive:!0}),In(window,_t,(function(){c.input=!0}),{capture:!0})],{stop:function(){k(f,(function(e){return e.stop()}))}}).stop;return{stop:function(){d(),o.notify(),l()},actionContexts:{findActionId:function(e){var t=i.findAll(e);if(t&&t.length)return t[t.length-1]},findAllActionId:function(e){return i.findAll(e)}}};function d(){r&&r.stop()}function p(e){if(!r||!r.tryAppend(e)){var t=e.clone();r=aa(e,(function(e){!function(e,t){Pa(e,t).isRage?(k(e,(function(e){e.discard()})),t.stop(pe()),t.validate(U(e,(function(e){return e.event})))):(t.discard(),k(e,(function(e){e.validate()})))}(e,t)}))}}}var Va=0,ja=1,Ba=2;function qa(e,t,n,r,i){var o,a=W(),s=de(),u=t.add(a,s.relative),c=Zo({lifeCycle:e,isChildEvent:function(e){return void 0!==e.action&&(I(e.action.ids)?Te(e.action.ids,a):e.action.ids===a)}}),f=Va,l=[],d=new kn;function p(e){f===Va&&(f=ja,(o=e)?u.close(ce(o)):u.remove(),c.stop(),d.notify())}return{event:i,stop:p,stopObservable:d,hasError:function(){return c.eventCounts.errorCount>0},hasPageActivity:function(){return void 0!==o},getUserActivity:n,addFrustration:function(e){l.push(e)},startClocks:s,isStopped:function(){return f===ja||f===Ba},clone:function(){return qa(e,t,n,r,i)},validate:function(t){if(p(),f===ja){var n=c.eventCounts,u=n.resourceCount,d=n.errorCount,v=n.longTaskCount,m=x({type:Mt,duration:o&&me(s.timeStamp,o),startClocks:s,id:a,frustrationTypes:l,counts:{resourceCount:u,errorCount:d,longTaskCount:v},events:Ve(t,[i]),event:i},r);e.notify(jn,m),f=Ba}},discard:function(){p(),f=Ba}}}var Ha="active",za="passive",Fa="hidden",Ga="frozen",Wa="terminated";function Ja(e){void 0===e&&(e=500);var t,n=Xe({expireDelay:144e5,maxEntries:4e3});i(Xa(),le());var r=Pn(window,[st,yt,ht,at,ct,ut,mt],(function(e){i(function(e){if(e.type===ut)return Ga;if(e.type===mt)return e.persisted?Ga:Wa;return Xa()}(e),e.timeStamp)}),{capture:!0}).stop;function i(e,r){void 0===r&&(r=le()),e!==t&&(t=e,n.closeActive(r),n.add({state:t,startTime:r},r))}var o={findAll:function(t,r){var i=n.findAll(t,r);if(0!==i.length){for(var o=[],a=Math.max(0,i.length-e),s=i.length-1;s>=a;s--){var u=i[s],c=me(t,u.startTime);o.push({state:u.state,start:ue(c)})}return o}},wasInPageStateAt:function(e,t){return o.wasInPageStateDuringPeriod(e,t,0)},wasInPageStateDuringPeriod:function(e,t,r){return n.findAll(t,r).some((function(t){return t.state===e}))},addPageState:i,stop:function(){r(),n.stop()}};return o}function Xa(){return"hidden"===document.visibilityState?Fa:document.hasFocus()?Ha:za}function Ka(e,t){var n=$a(e)?{action:{error:{count:e.counts.errorCount},id:e.id,loadingTime:Fe(ue(e.duration)),frustration:{type:e.frustrationTypes},long_task:{count:e.counts.longTaskCount},resource:{count:e.counts.resourceCount}},_gc:{action:{target:e.target,position:e.position}}}:{action:{loadingTime:0}};return{customerContext:$a(e)?void 0:e.context,rawRumEvent:A({action:{id:W(),target:{name:e.name},type:e.type},date:e.startClocks.timeStamp,type:jt.ACTION,view:{in_foreground:t.wasInPageStateAt(Ha,e.startClocks.relative)}},n),startTime:e.startClocks.relative,domainContext:$a(e)?{event:e.event,events:e.events}:{}}}function $a(e){return e.type!==Lt}function Qa(e,t,n,r,i,o,a){var s=function(e,t,n,r,i,o){void 0===o&&(o=Ii);var a=function(e,t){return o({encoder:t.encoder,request:Si(t.endpoint,e.batchBytesLimit,e.retryMaxSize,n),flushController:Ni({messagesLimit:e.batchMessagesLimit,bytesLimit:e.batchBytesLimit,durationLimit:e.flushTimeout,pageExitObservable:r,sessionExpireObservable:i}),messageBytesLimit:e.messageBytesLimit,sendContentTypeByJson:e.sendContentTypeByJson})}(e,t);return{flushObservable:a.flushController.flushObservable,add:function(e){a.add(e)},upsert:function(e,t){a.upsert(e,t)},stop:function(){a.stop()}}}(e,{endpoint:e.rumEndpoint,encoder:a(2)},r,i,o);return t.subscribe(Zn,(function(e){e.type===jt.VIEW?s.upsert(e,e.view.id):s.add(e)})),s}function Za(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ya(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Za(Object(n),!0).forEach((function(t){Ui(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Za(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var es,ts="synthetics",ns="user",rs={"view.url":"string","view.referrer":"string"},is={context:"object"},os={service:"string",version:"string"},as={};function ss(e,t,n,r,i,o,s,u,c,f){as[jt.VIEW]=Ya(Ya({},is),rs),as[jt.ERROR]=x({"error.message":"string","error.stack":"string","error.resource.url":"string"},is,rs,os),as[jt.RESOURCE]=x({"resource.url":"string"},is,rs,os),as[jt.ACTION]=x({"action.target.name":"string"},is,rs,os),as[jt.LONG_TASK]=x({},is,rs);var l={};l[jt.ERROR]=fr(jt.ERROR,e.eventRateLimiterThreshold,f),l[jt.ACTION]=fr(jt.ACTION,e.eventRateLimiterThreshold,f),t.subscribe(Qn,(function(f){var d,p=f.startTime,v=f.rawRumEvent,m=f.savedCommonContext,g=f.customerContext,y=f.domainContext,h=i.findView(p),b=o.findUrl(p),_=n.findTrackedSession(p);if((!_||!_.isErrorSession||_.sessionHasError)&&(_&&h&&b)){var w=s.findActionId(p),S=s.findAllActionId(p),E=m||c(),C={_gc:{sdkName:e.sdkName,sdkVersion:e.sdkVersion,drift:Math.round(ve()-(_e()+performance.now())),configuration:{session_sample_rate:ae(e.sessionSampleRate,3),session_replay_sample_rate:ae(e.sessionReplaySampleRate,3),session_on_error_sample_rate:ae(e.sessionOnErrorSampleRate,3),session_replay_on_error_sample_rate:ae(e.sessionReplayOnErrorSampleRate,3)}},terminal:{type:"web"},application:{id:e.applicationId},device:Ze,env:e.env||"",service:h.service||e.service||"browser",version:h.version||e.version||"",source:"browser",date:pe(),user:{id:r.getId(),is_signin:"F",is_login:!1},session:{type:void 0===window._DATAFLUX_SYNTHETICS_BROWSER?ns:ts,id:_.id},view:{id:h.id,name:h.name||b.path,url:b.url,referrer:b.referrer,host:b.host,path:b.path,pathGroup:b.pathGroup,urlQuery:b.urlQuery},action:(d=v,-1!==[jt.ERROR,jt.RESOURCE,jt.LONG_TASK].indexOf(d.type)&&w?{id:w,ids:S}:void 0),display:u.get()},T=Ue(A(C,h,v)),k=A({},E.context,h.context,g);B(k)||(T.context=k),"has_replay"in T.session||(T.session.has_replay=E.hasReplay),_.errorSessionReplayAllowed&&(T.session.has_replay=T.session.has_replay&&_.sessionHasError),"view"===T.type&&(T.session.sampled_for_error_replay=_.errorSessionReplayAllowed,T.session.sampled_for_error_session=_.isErrorSession,T.session.error_timestamp_for_session=_.sessionErrorTimestamp),B(E.context.device)||(T.device=A(T.device,E.context.device)),B(E.user)||(T.user=A(T.user,{is_signin:"T",is_login:!0},E.user)),function(e,t,n,r){if(t){var i=sr(e,as[e.type],(function(e){return t(e,n)}));if(!1===i&&e.type!==jt.VIEW)return!1;!1===i&&a.warn("Can't dismiss view events using beforeSend!")}var o=!1;r[e.type]&&(o=r[e.type].isLimitReached());return!o}(T,e.beforeSend,y,l)&&(B(T.context)&&delete T.context,t.notify(Zn,T))}}))}function us(){return es||(es=new kn((function(e){var t=G((function(){e.notify(cs())}),200).throttled;return In(window,bt,t,{capture:!0,passive:!0}).stop}))),es}function cs(){var e=window.visualViewport;return e?{width:Number(e.width*e.scale),height:Number(e.height*e.scale)}:{width:Number(window.innerWidth||0),height:Number(window.innerHeight||0)}}function fs(e,n,r,i){var o=new kn;!function(e){var n=Rn([t.error]).subscribe((function(t){e.notify(t.error)}))}(o),function(e){fn((function(t,n){e.notify(bn({stackTrace:t,originalError:n,startClocks:de(),nonErrorPrefix:Xt,source:hn.SOURCE,handling:Jt}))}))}(o),function(e,t){var n=Ln(0,[Nn]).subscribe((function(e){t.notify({startClocks:de(),message:e.message,stack:e.stack,type:e.subtype,source:hn.REPORT,handling:Jt})}))}(0,o);var a=r.findTrackedSession(),s=a.isErrorSession&&a.sessionHasError;return a.isErrorSession&&e.subscribe(Wn,(function(){s=!1})),o.subscribe((function(t){a.isErrorSession&&!s&&(r.setErrorForSession(),s=!0),e.notify(Yn,{error:t})})),function(e,t){return e.subscribe(Yn,(function(n){e.notify(Qn,x({customerContext:n.customerContext,savedCommonContext:n.savedCommonContext},function(e,t){return{rawRumEvent:{date:e.startClocks.timeStamp,error:{id:W(),message:e.message,source:e.source,stack:e.stack,handling_stack:e.handlingStack,type:e.type,handling:e.handling,causes:e.causes,source_type:"browser"},type:jt.ERROR,view:{in_foreground:t.wasInPageStateAt(Ha,e.startClocks.relative)}},startTime:e.startClocks.relative,domainContext:{error:e.originalError}}}(n.error,t)))})),{addError:function(t,n){var r=t.error,i=bn({stackTrace:r instanceof Error?Yt(r):void 0,originalError:r,handlingStack:t.handlingStack,startClocks:t.startClocks,nonErrorPrefix:Kt,source:hn.CUSTOM,handling:Wt});e.notify(Yn,{customerContext:t.context,savedCommonContext:n,error:i})}}}(e,i)}function ls(){if(Qo(Wo)){var e=performance.getEntriesByType(Wo)[0];if(e)return e}var t=function(){var e={},t=performance.timing;for(var n in t)if(F(t[n])){var r=n,i=t[r];e[r]=0===i?0:ce(i)}return e}(),n=x({entryType:Wo,initiatorType:"navigation",name:window.location.href,startTime:0,duration:t.responseEnd,decodedBodySize:0,encodedBodySize:0,transferSize:0,toJSON:function(){return x({},n,{toJSON:void 0})}},t);return n}function ds(e,t,n){return void 0===n&&(n=ls),function(e){var t,n=ii("complete",(function(){t=m((function(){e()}))}));return{stop:function(){n.stop(),g(t)}}}((function(){var e=n();(function(e){return e.loadEventEnd<=0})(e)||t(function(e){return{fetchStart:e.fetchStart,responseEnd:e.responseEnd,domComplete:e.domComplete,domContentLoaded:e.domContentLoadedEventEnd,domInteractive:e.domInteractive,loadEvent:e.loadEventEnd,loadEventEnd:e.loadEventEnd,loadEventStart:e.loadEventStart,domContentLoadedEventEnd:e.domContentLoadedEventEnd,domContentLoadedEventStart:e.domContentLoadedEventStart,firstByte:e.responseStart>=0&&e.responseStart<=le()?e.responseStart:void 0}}(e))}))}function ps(e){if(void 0===e&&(e=window),"hidden"===document.visibilityState)return{getTimeStamp:function(){return 0},stop:te};if(Qo(Ko)){var t=performance.getEntriesByType(Ko).find((function(e){return"hidden"===e.name}));if(t)return{getTimeStamp:function(){return t.startTime},stop:te}}var n=1/0,r=Pn(e,[mt,at],(function(e){e.type!==mt&&"hidden"!==document.visibilityState||(n=e.timeStamp,r())}),{capture:!0}).stop;return{getTimeStamp:function(){return n},stop:function(){r()}}}function vs(e,t,n){var r={},i=ds(0,(function(e){t(e.loadEvent),r.navigationTimings=e,n()})),o=ps(),a=i.stop,s=function(e,t,n){return{stop:$o(e,{type:Jo,buffered:!0}).subscribe((function(e){var r=ke(e,(function(e){return e.entryType===Jo&&"first-contentful-paint"===e.name&&e.startTime<t.getTimeStamp()&&e.startTime<6e5}));r&&n(r.startTime)})).unsubscribe}}(e,o,(function(e){r.firstContentfulPaint=e,n()})).stop,u=function(e,t,n,r){var i=1/0,o=Pn(n,[lt,tt],(function(e){i=e.timeStamp}),{capture:!0,once:!0}).stop,a=0,s=$o(e,{type:Ho,buffered:!0}).subscribe((function(n){var o,s=function(e,t){for(var n=e.length-1;n>=0;n-=1){var r=e[n];if(t(r,n,e))return r}}(n,(function(e){return e.entryType===Ho&&e.startTime<i&&e.startTime<t.getTimeStamp()&&e.startTime<6e5&&e.size>a}));s&&(s.element&&(o=Sa(s.element,e.actionNameAttribute)),r({value:s.startTime,targetSelector:o}),a=s.size)}));return{stop:function(){o(),s.unsubscribe()}}}(e,o,window,(function(e){r.largestContentfulPaint=e,n()})).stop,c=function(e,t,n){var r=$o(e,{type:qo,buffered:!0}).subscribe((function(r){var i=ke(r,(function(e){return e.entryType===qo&&e.startTime<t.getTimeStamp()}));if(i){var o,a=me(i.startTime,i.processingStart);i.target&&ri(i.target)&&(o=Sa(i.target,e.actionNameAttribute)),n({delay:a>=0?a:0,time:i.startTime,targetSelector:o})}}));return{stop:function(){r.unsubscribe()}}}(e,o,(function(e){r.firstInput=e,n()})).stop;return{stop:function(){a(),s(),u(),c(),o.stop()},initialViewMetrics:r}}function ms(e,t,n,r){void 0===r&&(r=function(e,t){void 0===t&&(t=1e3);return new kn((function(e){function n(){var t,n,r,i,o,a;e.notify((a=window.visualViewport,o=a?a.pageTop-a.offsetTop:void 0!==window.scrollY?window.scrollY:window.pageYOffset||0,t=Math.round(o),n=cs().height,r=Math.round((document.scrollingElement||document.documentElement).scrollHeight),i=Math.round(n+t),{scrollHeight:r,scrollDepth:i,scrollTop:t}))}if(window.ResizeObserver){var r=G(n,t,{leading:!1,trailing:!0}),i=document.scrollingElement||document.documentElement,o=new ResizeObserver(c(r.throttled));i&&o.observe(i);var a=In(window,it,r.throttled,{passive:!0});return function(){r.cancel(),o.unobserve(i),a.stop()}}}))}());var i=0,o=0,a=0,s=r.subscribe((function(e){var r=e.scrollDepth,s=e.scrollTop,u=e.scrollHeight,c=!1;if(r>i&&(i=r,c=!0),u>o){o=u;var f=le();a=me(t.relative,f),c=!0}c&&n({maxDepth:Math.min(i,o),maxDepthScrollTop:s,maxScrollHeight:o,maxScrollHeightTime:a})}));return{stop:function(){return s.unsubscribe()}}}function gs(e,t,n){if(!bs())return{stop:te};var r,i,o=0;n({value:0});var a=function(){var e,t,n=0,r=0;return{update:function(i){var o;return void 0===e||i.startTime-t>=1e3||i.startTime-e>=25e3?(e=t=i.startTime,r=n=i.value,o=!0):(n+=i.value,t=i.startTime,(o=i.value>r)&&(r=i.value)),{cumulatedValue:n,isMaxValue:o}}}}(),s=$o(e,{type:zo,buffered:!0}).subscribe((function(s){for(var u=0,c=s;u<c.length;u++){var f=c[u];if(!(f.hadRecentInput||f.startTime<t)){var l=a.update(f),d=l.cumulatedValue;if(l.isMaxValue){var p=ys(f.sources);r=p?new WeakRef(p):void 0,i=me(t,f.startTime)}if(d>o){o=d;p=r&&r.deref();n({value:ae(o,4),targetSelector:p&&Sa(p,e.actionNameAttribute),time:i})}}}}));return{stop:function(){s.unsubscribe()}}}function ys(e){if(e){var t=ke(e,(function(e){return!!e.node&&ri(e.node)}));return t&&t.node}}var hs;function bs(){return Qo(zo)&&"WeakRef"in window}var _s=0,ws=1/0,Ss=0;var Es=function(){return hs?_s:window.performance.interactionCount||0};function Cs(e,t,n){if(!(Qo("event")&&window.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype))return{getInteractionToNextPaint:function(){},setViewEnd:te,stop:te};var r,i,o=function(e){"interactionCount"in performance||hs||(hs=new window.PerformanceObserver(c((function(e){e.getEntries().forEach((function(e){var t=e;t.interactionId&&(ws=Math.min(ws,t.interactionId),Ss=Math.max(Ss,t.interactionId),_s=(Ss-ws)/7+1)}))})))).observe({type:"event",buffered:!0,durationThreshold:0});var t=e===Ht?0:Es(),n={stopped:!1};function r(){return Es()-t}return{getViewInteractionCount:function(){return n.stopped?n.interactionCount:r()},stopViewInteractionCount:function(){n={stopped:!0,interactionCount:r()}}}}(n),a=o.getViewInteractionCount,s=o.stopViewInteractionCount,u=1/0,f=function(e){var t=[];function n(){t.sort((function(e,t){return t.duration-e.duration})).splice(10)}return{process:function(e){var r=t.findIndex((function(t){return e.interactionId===t.interactionId})),i=t[t.length-1];-1!==r?e.duration>t[r].duration&&(t[r]=e,n()):(t.length<10||e.duration>i.duration)&&(t.push(e),n())},estimateP98Interaction:function(){var n=Math.min(t.length-1,Math.floor(e()/50));return t[n]}}}(a),l=-1;function d(n){for(var o=0,a=n;o<a.length;o++){var s=a[o];s.interactionId&&s.startTime>=t&&s.startTime<=u&&f.process(s)}var c,d,p=f.estimateP98Interaction();p&&p.duration!==l&&(l=p.duration,i=me(t,p.startTime),c=p.startTime,d=La.get(c),La.delete(c),!(r=d)&&p.target&&ri(p.target)&&(r=Sa(p.target,e.actionNameAttribute)))}var p=$o(e,{type:qo,buffered:!0}).subscribe(d),v=$o(e,{type:Bo,durationThreshold:40,buffered:!0}).subscribe(d);return{getInteractionToNextPaint:function(){return l>=0?{value:Math.min(l,6e4),targetSelector:r,time:i}:a()?{value:0}:void 0},setViewEnd:function(e){u=e,s()},stop:function(){v.unsubscribe(),p.unsubscribe()}}}function Ts(e,t,n,r,i,o){var a={},s=function(e,t,n,r,i,o){var a=r===Ht,s=!0,u=[],c=ps();function f(){if(!s&&!a&&u.length>0){var e=Math.max.apply(Math,u);e<c.getTimeStamp()&&o(e)}}var l=ea(e,t,n,(function(e){s&&(s=!1,e.hadActivity&&u.push(me(i.timeStamp,e.end)),f())})).stop;return{setLoadEvent:function(e){a&&(a=!1,u.push(e),f())},stop:function(){l(),c.stop(),s&&(s=!1,f())}}}(e,t,n,i,o,(function(e){a.loadingTime=e,r()})),u=s.stop,c=s.setLoadEvent,f=ms(0,o,(function(e){a.scroll=e})).stop,l=gs(n,o.relative,(function(e){a.cumulativeLayoutShift=e,r()})).stop,d=Cs(n,o.relative,i),p=d.stop,v=d.getInteractionToNextPaint;return{stop:function(){u(),l(),f()},stopINPTracking:p,setLoadEvent:c,setViewEnd:d.setViewEnd,getCommonViewMetrics:function(){return a.interactionToNextPaint=v(),a}}}var ks=3e5,xs=3e5;function Os(e,t,n,r,i,o,a){var s=new Set;function u(i,o,a){var u=function(e,t,n,r,i,o,a){void 0===o&&(o=de());var s,u,c,f,l,d=W(),p=new kn,v={},g=0,b=O(r),_=ji(),w=!0;a&&(u=a.name,c=a.service,f=a.version,l=a.context);l&&_.setContext(l);var S={id:d,name:u,startClocks:o,service:c,version:f};e.notify(Bn,S),e.notify(qn,S);var E=G(q,3e3,{leading:!1}),C=E.throttled,T=E.cancel,k=Ts(e,t,n,B,i,o),x=k.setLoadEvent,R=(k.stop,k.getCommonViewMetrics),A=k.stopINPTracking,I=(k.setViewEnd,i===Ht?vs(n,x,B):{stop:te,initialViewMetrics:{}}),P=I.stop,N=I.initialViewMetrics,M=function(e,t,n){var r=Zo({lifeCycle:e,isChildEvent:function(e){return e.view.id===t},onChange:n});return{stop:r.stop,eventCounts:r.eventCounts}}(e,d,B),L=M.stop,U=M.eventCounts,D=y(q,ks),V=e.subscribe(Xn,(function(e){e.reason===ni.UNLOADING&&q()}));function j(){e.notify(zn,{id:d,name:u,context:_.getContext(),startClocks:o})}function B(){j(),C()}function q(){T(),j(),g+=1;var t=void 0===s?pe():s.timeStamp;e.notify(Hn,{customTimings:v,documentVersion:g,id:d,name:u,service:c,version:f,context:_.getContext(),loadingType:i,location:b,startClocks:o,commonViewMetrics:R(),initialViewMetrics:N,duration:me(o.timeStamp,t),isActive:void 0===s,sessionIsActive:w,eventCounts:U})}q(),_.changeObservable.subscribe(B);var H={name:u,service:c,version:f,contextManager:_,stopObservable:p,end:function(t){s||(s=Ve(t&&t.endClocks,de()),w=Ve(t&&t.sessionIsActive,!0),e.notify(Fn,{endClocks:s}),e.notify(Gn,{endClocks:s}),h(D),V.unsubscribe(),q(),m((function(){H.stop()}),xs))},stop:function(){P(),L(),A(),p.notify()},addTiming:function(e,t){if(!s){var n=function(e){return e<31536e6}(t)?t:me(o.timeStamp,t);v[function(e){var t=e.replace(/[^a-zA-Z0-9-_.@$]/g,"_");t!==e&&console.warn("Invalid timing name: "+e+", sanitized to: "+t);return t}(e)]=n,B()}},setViewName:function(e){u=e,q()}};return H}(t,n,r,e,i,o,a);return s.add(u),u.stopObservable.subscribe((function(){s.delete(u)})),u}var c,f=u(Ht,ge(),a);return t.subscribe(Wn,(function(){f=u(zt,void 0,{name:f.name,service:f.service,version:f.version,context:f.contextManager.getContext()})})),t.subscribe(Jn,(function(){f.end({sessionIsActive:!1})})),o&&(c=function(e){return e.subscribe((function(e){var t,n,r=e.oldLocation,i=e.newLocation;if(n=i,(t=r).pathname!==n.pathname||!He(n.hash)&&ze(n.hash)!==ze(t.hash))return f.end(),void(f=u(zt))}))}(i)),{addTiming:function(e,t){void 0===t&&(t=pe()),f.addTiming(e,t)},startView:function(e,t){f.end({endClocks:t}),f=u(zt,t,e)},setViewContext:function(e){f.contextManager.setContext(e)},setViewContextProperty:function(e,t){f.contextManager.setContextProperty(e,t)},setViewName:function(e){f.setViewName(e)},getViewContext:function(){return f.contextManager.getContext()},stop:function(){c&&c.unsubscribe(),f.end(),s.forEach((function(e){e.stop()}))}}}function Rs(e,t,n,r,i,o,a,s){return e.subscribe(Hn,(function(n){e.notify(Qn,function(e,t,n,r){var i=r.findAll(e.startClocks.relative,e.duration),o={_gc:{document_version:e.documentVersion,page_states:i},date:e.startClocks.timeStamp,type:jt.VIEW,view:{action:{count:e.eventCounts.actionCount},frustration:{count:e.eventCounts.frustrationCount},cumulative_layout_shift:Se(e.commonViewMetrics,"cumulativeLayoutShift.value"),cumulative_layout_shift_time:Se(e.commonViewMetrics,"cumulativeLayoutShift.time"),cumulative_layout_shift_target_selector:Se(e.commonViewMetrics,"cumulativeLayoutShift.targetSelector"),first_byte:ue(Se(e.initialViewMetrics,"navigationTimings.firstByte")),dom_complete:ue(Se(e.initialViewMetrics,"navigationTimings.domComplete")),dom_content_loaded:ue(Se(e.initialViewMetrics,"navigationTimings.domContentLoaded")),dom_interactive:ue(Se(e.initialViewMetrics,"navigationTimings.domInteractive")),error:{count:e.eventCounts.errorCount},first_contentful_paint:ue(Se(e.initialViewMetrics,"firstContentfulPaint")),first_input_delay:ue(Se(e.initialViewMetrics,"firstInput.delay")),first_input_time:ue(Se(e.initialViewMetrics,"firstInput.time")),first_input_target_selector:Se(e.initialViewMetrics,"firstInput.targetSelector"),interaction_to_next_paint:ue(Se(e.commonViewMetrics,"interactionToNextPaint.value")),interaction_to_next_paint_target_selector:Se(e.commonViewMetrics,"interactionToNextPaint.targetSelector"),is_active:e.isActive,name:e.name,largest_contentful_paint:ue(Se(e.initialViewMetrics,"largestContentfulPaint.value")),largest_contentful_paint_element_selector:Se(e.initialViewMetrics,"largestContentfulPaint.targetSelector"),load_event:ue(Se(e.initialViewMetrics,"navigationTimings.loadEvent")),loading_time:Fe(ue(e.commonViewMetrics.loadingTime)),loading_type:e.loadingType,long_task:{count:e.eventCounts.longTaskCount},resource:{count:e.eventCounts.resourceCount},time_spent:ue(e.duration)},display:e.commonViewMetrics.scroll?{scroll:{max_depth:e.commonViewMetrics.scroll.maxDepth,max_depth_scroll_top:e.commonViewMetrics.scroll.maxDepthScrollTop,max_scroll_height:e.commonViewMetrics.scroll.maxScrollHeight,max_scroll_height_time:ue(e.commonViewMetrics.scroll.maxScrollHeightTime)}}:void 0,session:{is_active:!!e.sessionIsActive&&void 0},privacy:{replay_level:t.defaultPrivacyLevel}};B(e.customTimings)||(o.view.custom_timings=(a=e.customTimings,s=ue,u={},k(a,(function(e,t){u[t]=s(e)})),u));var a,s,u;return{rawRumEvent:o=A(o,{view:As(e.initialViewMetrics.navigationTimings)}),startTime:e.startClocks.relative,domainContext:{location:e.location}}}(n,t,0,o))})),Os(n,e,r,t,i,!t.trackViewsManually,s)}function As(e){if(e){var t=e.fetchStart,n=e.responseEnd,r=e.domInteractive,i=e.domContentLoaded,o=e.domComplete,a=e.loadEventEnd,s=e.loadEventStart,u=e.domContentLoadedEventEnd,c={};if(F(n)&&F(t)&&n!==t&&n>t){c.fpt=ue(n-t);var f=parseInt((n-t)/1e3);c.apdexLevel=f>9?9:f}return F(r)&&F(t)&&r!==t&&r>t&&(c.tti=ue(r-t)),F(i)&&F(t)&&i!==t&&i>t&&(c.dom_ready=ue(i-t)),F(a)&&F(t)&&a!==t&&a>t&&(c.load=ue(a-t)),F(s)&&F(u)&&s!==u&&s>u&&(c.resource_load_time=ue(s-u)),F(o)&&F(r)&&o!==r&&o>r&&(c.dom=ue(o-r)),c}}function Is(e){0!==e.status||e.isAborted||(e.traceId=void 0,e.spanId=void 0,e.traceSampled=void 0)}var Ps=1;function Ns(e,t,n){var r={clearTracingIfNeeded:Is,traceFetch:function(e){},traceXhr:function(e,t){}};!function(e,t,n){var r=Yr().subscribe((function(r){var i=r;if(Mo(t,i.url))switch(i.state){case"start":n.traceXhr(i,i.xhr),i.requestIndex=Ms(),e.notify(Kn,{requestIndex:i.requestIndex,url:i.url});break;case"complete":n.clearTracingIfNeeded(i),e.notify($n,{duration:i.duration,method:i.method,requestIndex:i.requestIndex,spanId:i.spanId,startClocks:i.startClocks,status:i.status,traceId:i.traceId,traceSampled:i.traceSampled,type:Ft.XHR,url:i.url,xhr:i.xhr,isAborted:i.isAborted,handlingStack:i.handlingStack})}}))}(e,t,r),function(e,t,n){var r=Qr().subscribe((function(r){var i=r;if(Mo(t,i.url))switch(i.state){case"start":n.traceFetch(i),i.requestIndex=Ms(),e.notify(Kn,{requestIndex:i.requestIndex,url:i.url});break;case"resolve":!function(e,t){var n=e.response&&function(e){try{return e.clone()}catch(e){return}}(e.response);n&&n.body?function(e,t,n){var r=e.getReader(),i=[],o=0;function a(){var e,a;if(r.cancel().catch(te),n.collectStreamBody){var s;if(1===i.length)s=i[0];else{s=new Uint8Array(o);var u=0;k(i,(function(e){s.set(e,u),u+=e.length}))}e=s.slice(0,n.bytesLimit),a=s.length>n.bytesLimit}t(void 0,e,a)}!function e(){r.read().then(c((function(t){t.done?a():(n.collectStreamBody&&i.push(t.value),(o+=t.value.length)>n.bytesLimit?a():e())})),c((function(e){t(e)})))}()}(n.body,(function(){t(me(e.startClocks.timeStamp,pe()))}),{bytesLimit:Number.POSITIVE_INFINITY,collectStreamBody:!1}):t(me(e.startClocks.timeStamp,pe()))}(i,(function(t){n.clearTracingIfNeeded(i),e.notify($n,{duration:t,method:i.method,requestIndex:i.requestIndex,responseType:i.responseType,spanId:i.spanId,startClocks:i.startClocks,status:i.status,traceId:i.traceId,traceSampled:i.traceSampled,type:Ft.FETCH,url:i.url,response:i.response,init:i.init,input:i.input,isAborted:i.isAborted,handlingStack:i.handlingStack})}))}}))}(e,t,r)}function Ms(){var e=Ps;return Ps+=1,e}var Ls=new eo;function Us(e){if(performance&&"getEntriesByName"in performance){var t=performance.getEntriesByName(e.url,"resource");if(t.length&&"toJSON"in t[0]){var n=L(t,(function(e){return!Ls.has(e)}));n=L(n,(function(e){return Ro(e)&&Ao(e)})),n=L(n,(function(t){return n=t,r=e.startClocks.relative,i=Ds({startTime:e.startClocks.relative,duration:e.duration}),o=1,n.startTime>=r-o&&Ds(n)<=he(i,o);var n,r,i,o}));var r=void 0;if(n.length>1){var i=Number.MAX_SAFE_INTEGER;n.forEach((function(t){var n=Math.abs(t.startTime-e.startClocks.relative);n<i&&(i=n,r=t)}))}else 1===n.length&&(r=n[0]);return r?(Ls.add(r),r.toJSON()):void 0}}}function Ds(e){return he(e.startTime,e.duration)}function Vs(e,t){ii("interactive",(function(){var e=x(ls().toJSON(),{entryType:Xo,initiatorType:bo,toJSON:function(){return x({},e,{toJSON:void 0})}});t(e)}))}function js(e,t,n,r,i){void 0===r&&(r=function(){var e=[];function t(t){var r;if(t.didTimeout){var i=performance.now();r=function(){return 30-(performance.now()-i)}}else r=t.timeRemaining.bind(t);for(;r()>0&&e.length;)e.shift()();e.length&&n()}function n(){vr(t,{timeout:1e3})}return{push:function(t){1===e.push(t)&&n()}}}()),void 0===i&&(i=Vs),e.subscribe($n,(function(e){a((function(){return function(e,t){var n=Us(e),r=n?ye(n.startTime):e.startClocks,i=function(e){if(!(e.traceSampled&&e.traceId&&e.spanId))return;return{_gc:{spanId:e.spanId,traceId:e.traceId},resource:{id:W()}}}(e),o=e.type===Ft.XHR?Tt:xt,a=n?qs(n):void 0,s=function(e,t,n){return e.wasInPageStateDuringPeriod(Ga,t.relative,n)?void 0:ue(n)}(t,r,e.duration),u=X(e.url).getParse(),c=A({date:r.timeStamp,resource:{id:W(),type:o,duration:s,method:e.method,status:e.status,statusGroup:ee(e.status),url:Uo(e.url)?Do(e.url):e.url,urlHost:u.Host,urlPath:u.Path,urlPathGroup:J(u.Path),urlQuery:K(e.url),deliveryType:n&&Eo(n),protocol:n&&Co(n)},type:jt.RESOURCE},i,a);return{startTime:r.relative,rawRumEvent:c,domainContext:{performanceEntry:n,xhr:e.xhr,response:e.response,requestInput:e.input,requestInit:e.init,error:e.error,isAborted:e.isAborted,handlingStack:e.handlingStack}}}(e,n)}))}));var o=$o(t,{type:Xo,buffered:!0}).subscribe((function(e){for(var n=function(e){(function(e){return"xmlhttprequest"===e.initiatorType||"fetch"===e.initiatorType})(e)||ko(e.name,t.resourceUrlLimit)||a((function(){return Bs(e,t)}))},r=0,i=e;r<i.length;r++){n(i[r])}}));function a(t){r.push((function(){var n=t();n&&e.notify(Qn,n)}))}return i(t,(function(e){a((function(){return Bs(e,t)}))})),{stop:function(){o.unsubscribe()}}}function Bs(e,t){var n,r=ye(e.startTime),i=function(e){return e.traceId?{_gc:{traceId:e.traceId}}:void 0}(e),o=wo(e),a=qs(e),s=X(e.name).getParse(),u=A({date:r.timeStamp,resource:{id:W(),type:o,url:e.name,urlHost:s.Host,urlPath:s.Path,urlPathGroup:J(s.Path),urlQuery:K(e.name),method:"GET",status:(n=e.responseStatus,0===n?void 0:n),statusGroup:ee(e.responseStatus),deliveryType:Eo(e),protocol:Co(e)},type:jt.RESOURCE},i,a);return{startTime:r.relative,rawRumEvent:u,domainContext:{performanceEntry:e}}}function qs(e){return{resource:A({},{duration:xo(e)},No(e),Oo(e))}}var Hs={sdkVersion:"3.2.24",sdkName:"df_web_rum_sdk"};function zs(e){if(e.applicationId){if(function(e){return e.site||e.datakitOrigin||e.datakitUrl?!(e.site&&!e.clientToken&&(a.error("clientToken is not configured, no RUM data will be collected."),1)):(a.error("datakitOrigin or site is not configured, no RUM data will be collected."),!1)}(e))if(void 0===e.sessionOnErrorSampleRate||Oe(e.sessionOnErrorSampleRate))if(void 0===e.sessionReplaySampleRate||Oe(e.sessionReplaySampleRate))if(void 0===e.sessionReplayOnErrorSampleRate||Oe(e.sessionReplayOnErrorSampleRate)){var t=function(e){void 0!==e.allowedTracingUrls&&void 0!==e.allowedTracingOrigins&&a.warn("Both allowedTracingUrls and allowedTracingOrigins (deprecated) have been defined. The parameter allowedTracingUrls will override allowedTracingOrigins.");if(void 0!==e.allowedTracingUrls){if(!I(e.allowedTracingUrls))return void a.error("Allowed Tracing URLs should be an array");var t=[];return k(e.allowedTracingUrls,(function(n){var r;Ce(n)?t.push({match:n,traceType:Ve(e.traceType,Gt)}):"object"===Q(r=n)&&Ce(r.match)&&H(r.traceType)?t.push(n):a.warn("Allowed Tracing Urls parameters should be a string, RegExp, function, or an object. Ignoring parameter",n)})),t}if(void 0!==e.allowedTracingOrigins){if(!I(e.allowedTracingOrigins))return void a.error("Allowed Tracing Origins should be an array");t=[];return k(e.allowedTracingOrigins,(function(n){var r=Fs(n,Ve(e.traceType,Gt));r&&t.push(r)})),t}if(void 0!==e.allowedDDTracingOrigins){if(!I(e.allowedDDTracingOrigins))return void a.error("Allowed Tracing Origins should be an array");t=[];return k(e.allowedDDTracingOrigins,(function(n){var r=Fs(n,Ve(e.traceType,Gt));r&&t.push(r)})),t}return[]}(e);if(t)if(void 0===e.tracingSampleRate||Oe(e.tracingSampleRate))if(void 0===e.excludedActivityUrls||I(e.excludedActivityUrls)){var n=$r(e);if(n){var r=!!Ve(e.trackUserInteractions,e.trackInteractions);return x({applicationId:e.applicationId,actionNameAttribute:e.actionNameAttribute,sessionReplaySampleRate:Ve(e.sessionReplaySampleRate,100),sessionOnErrorSampleRate:Ve(e.sessionOnErrorSampleRate,0),sessionReplayOnErrorSampleRate:Ve(e.sessionReplayOnErrorSampleRate,0),tracingSampleRate:Ve(e.tracingSampleRate,100),allowedTracingUrls:t,injectTraceHeader:e.injectTraceHeader&&d(e.injectTraceHeader,"injectTraceHeader threw an error:"),generateTraceId:e.generateTraceId&&d(e.generateTraceId,"generateTraceId threw an error:"),excludedActivityUrls:Ve(e.excludedActivityUrls,[]),workerUrl:e.workerUrl,compressIntakeRequests:!!e.compressIntakeRequests,trackUserInteractions:r,enableLongAnimationFrame:!!e.enableLongAnimationFrame,trackViewsManually:!!e.trackViewsManually,traceType:Ve(e.traceType,Gt),traceId128Bit:!!e.traceId128Bit,defaultPrivacyLevel:je(Kr,e.defaultPrivacyLevel)?e.defaultPrivacyLevel:Kr.MASK_USER_INPUT,shouldMaskNode:e.shouldMaskNode&&d(e.shouldMaskNode,"shouldMaskNode threw an error:")},n,Hs)}}else a.error("Excluded Activity Urls should be an array");else a.error("Tracing Sample Rate should be a number between 0 and 100")}else a.error("Error Session Replay Sample Rate should be a number between 0 and 100");else a.error("Session Replay Sample Rate should be a number between 0 and 100");else a.error("Error Session  Sample Rate should be a number between 0 and 100")}else a.error("Application ID is not configured, no RUM data will be collected.")}function Fs(e,t){var n;if("string"==typeof e?n=e:e instanceof RegExp?n=function(t){return e.test(dr(t))}:"function"==typeof e&&(n=function(t){return e(dr(t))}),void 0!==n)return{match:n,traceType:t};a.warn("Allowed Tracing Origins parameters should be a string, RegExp or function. Ignoring parameter",e)}function Gs(e,t,n){var r,i,o,s,u=e.ignoreInitIfSyntheticsWillInjectRum,c=(r=[],{add:function(e){r.push(e)>500&&r.splice(0,1)},remove:function(e){qe(r,e)},drain:function(e){r.forEach((function(t){t(e)})),r.length=0}});function f(){if(o&&s){var e;if(s.trackViewsManually){if(!i)return;c.remove(i.callback),e=i.options}var t=n(s,undefined,e);c.drain(t)}}return{init:function(e){e?(o=e,u&&Boolean(window._GUANCE_SYNTHETICS_INJECTS_RUM||Sr("guance-synthetics-injects-rum"))||e.remoteConfiguration||function(e){if(o=e,s)to("DATAFLUX_RUM",e);else{var t=zs(e);t&&(s=t,Qr().subscribe(te),f())}}(e)):a.error("Missing configuration")},getInitConfiguration:function(){return o},getInternalContext:te,stopSession:te,addTiming:function(e,t){void 0===t&&(t=pe()),c.add((function(n){n.addTiming(e,t)}))},startView:function(e,t){void 0===t&&(t=de());var n=function(n){n.startView(e,t)};c.add(n),i||(i={options:e,callback:n},f())},setViewName:function(e){c.add((function(t){return t.setViewName(e)}))},setViewContext:function(e){c.add((function(t){return t.setViewContext(e)}))},setViewContextProperty:function(e,t){c.add((function(n){return n.setViewContextProperty(e,t)}))},getViewContext:function(){},addAction:function(e,n){void 0===n&&(n=t()),c.add((function(t){t.addAction(e,n)}))},addError:function(e,n){void 0===n&&(n=t()),c.add((function(t){t.addError(e,n)}))}}}var Ws,Js,Xs,Ks,$s=function(t,n,r){void 0===r&&(r={});var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ki,t=new Map,n=!1;function r(){if(!n&&e!==Ji){var r=e===Ki?Gi:Wi,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t.forEach((function(e){i+=e.getBytesCount()})),i>r&&(Qi(r),n=!0)}}return{createDetachedTracker:function(){var e=$i((function(){return r(e.getBytesCount())}));return e},getOrCreateTracker:function(e){return t.has(e)||t.set(e,$i(r)),t.get(e)},setCompressionStatus:function(t){e===Ji&&(e=t,r())},getCompressionStatus:function(){return e},stop:function(){t.forEach((function(e){return e.stop()})),t.clear()}}}(Ji),o=ji("global",{customerDataTracker:i.getOrCreateTracker(qi)}),s=ji("user",{customerDataTracker:i.getOrCreateTracker(Bi),propertiesConfig:{id:{type:"string"},name:{type:"string"},email:{type:"string"}}});function l(){return function(e,t,n){return{context:e.getContext(),user:t.getContext(),hasReplay:!1}}(o,s)}var d,p,v=Gs(r,l,(function(e,a,u){e.storeContextsToLocal&&(Fi(e,o,"rum",qi),Fi(e,s,"rum",Bi)),i.setCompressionStatus(a?Xi:Ki);var c=t(e,n,i,l,u,a&&r.createDeflateEncoder?function(e){return r.createDeflateEncoder(a,e)}:Zi);return v=function(e,t){return x({init:function(e){to("DATAFLUX_RUM",e)},initConfiguration:e.getInitConfiguration()},t)}(v,c),c})),m=c((function(t){var n="object"===e(t)?t:{name:t};v.startView(n),n.context&&i.getOrCreateTracker(Hi).updateCustomerData(n.context)}));return d={init:c((function(e){v.init(e)})),setViewName:c((function(e){v.setViewName(e)})),setViewContext:c((function(e){v.setViewContext(e)})),setViewContextProperty:c((function(e,t){v.setViewContextProperty(e,t)})),getViewContext:c((function(){return v.getViewContext()})),setGlobalContextProperty:c((function(e,t){o.setContextProperty(e,t)})),removeGlobalContextProperty:c((function(e){return o.removeContextProperty(e)})),getGlobalContext:c((function(){return o.getContext()})),setGlobalContext:c((function(e){o.setContext(e)})),clearGlobalContext:c((function(){return o.clearContext()})),getInitConfiguration:c((function(){return Y(v.initConfiguration)})),getInternalContext:c((function(e){return v.getInternalContext(e)})),addDebugSession:c((function(e){})),clearDebugSession:c((function(){})),getDebugSession:c((function(){})),addAction:c((function(e,t){var n=_n();f((function(){v.addAction({name:vn(e),context:vn(t),startClocks:de(),type:Lt,handlingStack:n})}))})),addError:c((function(e,t){var n=_n();f((function(){v.addError({error:e,handlingStack:n,context:vn(t),startClocks:de()})}))})),addTiming:c((function(e,t){v.addTiming(vn(e),t)})),setUser:c((function(e){(function(e){var t="object"===Q(e);return t||a.error("Unsupported user:",e),t})(e)&&s.setContext(Yi(e))})),getUser:c((function(){return s.getContext()})),setUserProperty:c((function(e,t){var n={};n[e]=t;var r=Yi(n)[e];s.setContextProperty(e,r)})),removeUserProperty:c((function(e){return s.removeContextProperty(e)})),clearUser:c((function(){return s.clearContext()})),startView:m,stopSession:c((function(){v.stopSession()}))},p=x({onReady:function(e){e()}},d),Object.defineProperty(p,"_setDebug",{get:function(){return u},enumerable:!1}),p}((function(e,t,n,r,i,o){var a=[],s=new er,u=function(e){s.notify(Yn,{error:e})},c=new kn((function(e){var t=Pn(window,[at,ut],(function(t){t.type===at&&"hidden"===document.visibilityState?e.notify({reason:ni.HIDDEN}):t.type===ut&&e.notify({reason:ni.FROZEN})}),{capture:!0}),n=In(window,Ye,(function(){e.notify({reason:ni.UNLOADING})}));return function(){t.stop(),n.stop()}}));c.subscribe((function(e){s.notify(Xn,e)})),a.push((function(){pageExitSubscription.unsubscribe()}));var f=Mi()?void 0:po(e,s);if(!Mi()){var l=Qa(e,s,0,u,c,f.expireObservable,o);a.push((function(){l.stop()}))}var d=go(e),p=yo(),v=ho(location),m=Ja(),g=function(e,t,n,r,i,o,a,s,u,c){var f=function(e){var t=Xe({expireDelay:144e5});return e.subscribe(Bn,(function(e){t.add(function(e){return{service:e.service,version:e.version,context:e.context,id:e.id,name:e.name,startClocks:e.startClocks}}(e),e.startClocks.relative)})),e.subscribe(Gn,(function(e){t.closeActive(e.endClocks.relative)})),e.subscribe(zn,(function(e){var n=t.find(e.startClocks.relative);n&&e.name&&(n.name=e.name),n&&e.context&&(n.context=e.context)})),e.subscribe(Wn,(function(){t.reset()})),{findView:function(e){return t.find(e)},stop:function(){t.stop()}}}(e),l=function(e,t,n){var r,i=Xe({expireDelay:144e5});e.subscribe(Bn,(function(e){var t=n.href;i.add(a({url:t,location:n,referrer:r||document.referrer}),e.startClocks.relative),r=t})),e.subscribe(Gn,(function(e){i.closeActive(e.endClocks.relative)}));var o=t.subscribe((function(e){var t=i.find();if(t){var n=le();i.closeActive(n),i.add(a({url:e.newLocation.href,location:e.newLocation,referrer:t.referrer}),n)}}));function a(e){var t=e.location.pathname,n=e.location.hash;return n&&!He(n)&&(t="/"+ze(n)),{url:e.url,referrer:e.referrer,host:e.location.host,path:t,pathGroup:J(t),urlQuery:K(e.location.href)}}return{findUrl:function(e){return i.find(e)},stop:function(){o.unsubscribe(),i.stop()}}}(e,a,n),d=function(e,t,n,r){e.subscribe(jn,(function(t){e.notify(Qn,Ka(t,r))}));var i={findActionId:te,findAllActionId:te};return n.trackUserInteractions&&(i=Da(e,t,n).actionContexts),{actionContexts:i,addAction:function(t,n){e.notify(Qn,R({savedCommonContext:n},Ka(t,r)))}}}(e,s,t,o),p=d.actionContexts,v=d.addAction,m=(g=cs(),{get:function(){return{viewport:g}},stop:us().subscribe((function(e){g=e})).unsubscribe});var g;return ss(t,e,r,i,f,l,p,m,u,c),{viewContexts:f,urlContexts:l,pageStateHistory:o,addAction:v,actionContexts:p,stop:function(){m.stop(),o.stop(),l.stop(),f.stop()}}}(s,e,location,f,d,m,v,p,r,u),y=g.viewContexts,h=g.urlContexts,b=g.actionContexts,_=g.stop,w=g.addAction;a.push(_);var S=Rs(s,e,location,p,v,m,0,i),E=S.addTiming,C=S.startView,T=S.setViewName,k=S.setViewContext,x=S.setViewContextProperty,O=S.getViewContext,A=S.stop;a.push(A);var I=js(s,e,m);if(a.push(I.stop),PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes(Go)){var P=function(e,t){var n=$o(t,{type:Go,buffered:!0}).subscribe((function(t){for(var n=0,r=t;n<r.length;n++){var i=r[n],o=ye(i.startTime),a={date:o.timeStamp,longTask:{id:W(),entryType:qt,duration:ue(i.duration),blockingDuration:ue(i.blockingDuration),firstUiEventTimestamp:ue(i.firstUIEventTimestamp),renderStart:ue(i.renderStart),styleAndLayoutStart:ue(i.styleAndLayoutStart),startTime:ue(i.startTime),scripts:i.scripts.map((function(e){return{duration:ue(e.duration),pause_duration:ue(e.pauseDuration),forced_style_and_layout_duration:ue(e.forcedStyleAndLayoutDuration),start_time:ue(e.startTime),execution_start:ue(e.executionStart),source_url:e.sourceURL,source_function_name:e.sourceFunctionName,source_char_position:e.sourceCharPosition,invoker:e.invoker,invoker_type:e.invokerType,window_attribution:e.windowAttribution}}))},type:jt.LONG_TASK};e.notify(Qn,{rawRumEvent:a,startTime:o.relative,domainContext:{performanceEntry:i}})}}));return{stop:function(){n.unsubscribe()}}}(s,e);a.push(P.stop)}else!function(e,t){var n=$o(t,{type:Fo,buffered:!0}).subscribe((function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r.entryType!==Fo)break;var i=ye(r.startTime),o={date:i.timeStamp,longTask:{id:W(),entryType:Bt,duration:ue(r.duration)},type:jt.LONG_TASK};e.notify(Qn,{rawRumEvent:o,startTime:i.relative,domainContext:{performanceEntry:r}})}}))}(s,e);var N=fs(s,0,f,m).addError;Ns(s,e);var M=function(e,t,n,r,i){return{get:function(o){var a=n.findView(o),s=i.findUrl(o),u=t.findTrackedSession(o);if(u&&a&&s){var c=r.findActionId(o),f=r.findAllActionId(o);return{application:{id:e},session:{id:u.id},userAction:c?{id:c,ids:f}:void 0,view:{id:a.id,name:a.name||s.path,url:s.url,referrer:s.referrer,host:s.host,path:s.path,pathGroup:s.pathGroup,urlQuery:s.urlQuery}}}}}}(e.applicationId,f,y,b,h);return{addAction:w,addError:N,addTiming:E,configuration:e,startView:C,setViewContext:k,setViewContextProperty:x,getViewContext:O,setViewName:T,lifeCycle:s,viewContexts:y,session:f,stopSession:function(){f.expire()},getInternalContext:M.get,stop:function(){a.forEach((function(e){e()}))}}}),"recorderApi",{startDeflateWorker:null,createDeflateEncoder:null});Ws=p(),Xs=$s,Ks=Ws[Js="DATAFLUX_RUM"],Ws[Js]=Xs,Ks&&Ks.q&&k(Ks.q,(function(e){d(e,"onReady callback threw an error:")()}))}();